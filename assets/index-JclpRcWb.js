var ah=Object.defineProperty;var ch=(e,n,t)=>n in e?ah(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;var sl=(e,n,t)=>ch(e,typeof n!="symbol"?n+"":n,t);(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function t(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerPolicy&&(o.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?o.credentials="include":l.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(l){if(l.ep)return;l.ep=!0;const o=t(l);fetch(l.href,o)}})();function fh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var af={exports:{}},mi={},cf={exports:{}},J={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zl=Symbol.for("react.element"),dh=Symbol.for("react.portal"),ph=Symbol.for("react.fragment"),hh=Symbol.for("react.strict_mode"),mh=Symbol.for("react.profiler"),gh=Symbol.for("react.provider"),yh=Symbol.for("react.context"),Sh=Symbol.for("react.forward_ref"),vh=Symbol.for("react.suspense"),wh=Symbol.for("react.memo"),kh=Symbol.for("react.lazy"),Ba=Symbol.iterator;function Ch(e){return e===null||typeof e!="object"?null:(e=Ba&&e[Ba]||e["@@iterator"],typeof e=="function"?e:null)}var ff={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},df=Object.assign,pf={};function Qr(e,n,t){this.props=e,this.context=n,this.refs=pf,this.updater=t||ff}Qr.prototype.isReactComponent={};Qr.prototype.setState=function(e,n){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,n,"setState")};Qr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function hf(){}hf.prototype=Qr.prototype;function Su(e,n,t){this.props=e,this.context=n,this.refs=pf,this.updater=t||ff}var vu=Su.prototype=new hf;vu.constructor=Su;df(vu,Qr.prototype);vu.isPureReactComponent=!0;var La=Array.isArray,mf=Object.prototype.hasOwnProperty,wu={current:null},gf={key:!0,ref:!0,__self:!0,__source:!0};function yf(e,n,t){var r,l={},o=null,i=null;if(n!=null)for(r in n.ref!==void 0&&(i=n.ref),n.key!==void 0&&(o=""+n.key),n)mf.call(n,r)&&!gf.hasOwnProperty(r)&&(l[r]=n[r]);var s=arguments.length-2;if(s===1)l.children=t;else if(1<s){for(var u=Array(s),a=0;a<s;a++)u[a]=arguments[a+2];l.children=u}if(e&&e.defaultProps)for(r in s=e.defaultProps,s)l[r]===void 0&&(l[r]=s[r]);return{$$typeof:Zl,type:e,key:o,ref:i,props:l,_owner:wu.current}}function Ah(e,n){return{$$typeof:Zl,type:e.type,key:n,ref:e.ref,props:e.props,_owner:e._owner}}function ku(e){return typeof e=="object"&&e!==null&&e.$$typeof===Zl}function Fh(e){var n={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(t){return n[t]})}var Da=/\/+/g;function zi(e,n){return typeof e=="object"&&e!==null&&e.key!=null?Fh(""+e.key):n.toString(36)}function _o(e,n,t,r,l){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(o){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case Zl:case dh:i=!0}}if(i)return i=e,l=l(i),e=r===""?"."+zi(i,0):r,La(l)?(t="",e!=null&&(t=e.replace(Da,"$&/")+"/"),_o(l,n,t,"",function(a){return a})):l!=null&&(ku(l)&&(l=Ah(l,t+(!l.key||i&&i.key===l.key?"":(""+l.key).replace(Da,"$&/")+"/")+e)),n.push(l)),1;if(i=0,r=r===""?".":r+":",La(e))for(var s=0;s<e.length;s++){o=e[s];var u=r+zi(o,s);i+=_o(o,n,t,u,l)}else if(u=Ch(e),typeof u=="function")for(e=u.call(e),s=0;!(o=e.next()).done;)o=o.value,u=r+zi(o,s++),i+=_o(o,n,t,u,l);else if(o==="object")throw n=String(e),Error("Objects are not valid as a React child (found: "+(n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n)+"). If you meant to render a collection of children, use an array instead.");return i}function so(e,n,t){if(e==null)return e;var r=[],l=0;return _o(e,r,"","",function(o){return n.call(t,o,l++)}),r}function Rh(e){if(e._status===-1){var n=e._result;n=n(),n.then(function(t){(e._status===0||e._status===-1)&&(e._status=1,e._result=t)},function(t){(e._status===0||e._status===-1)&&(e._status=2,e._result=t)}),e._status===-1&&(e._status=0,e._result=n)}if(e._status===1)return e._result.default;throw e._result}var nn={current:null},To={transition:null},_h={ReactCurrentDispatcher:nn,ReactCurrentBatchConfig:To,ReactCurrentOwner:wu};function Sf(){throw Error("act(...) is not supported in production builds of React.")}J.Children={map:so,forEach:function(e,n,t){so(e,function(){n.apply(this,arguments)},t)},count:function(e){var n=0;return so(e,function(){n++}),n},toArray:function(e){return so(e,function(n){return n})||[]},only:function(e){if(!ku(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};J.Component=Qr;J.Fragment=ph;J.Profiler=mh;J.PureComponent=Su;J.StrictMode=hh;J.Suspense=vh;J.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_h;J.act=Sf;J.cloneElement=function(e,n,t){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=df({},e.props),l=e.key,o=e.ref,i=e._owner;if(n!=null){if(n.ref!==void 0&&(o=n.ref,i=wu.current),n.key!==void 0&&(l=""+n.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(u in n)mf.call(n,u)&&!gf.hasOwnProperty(u)&&(r[u]=n[u]===void 0&&s!==void 0?s[u]:n[u])}var u=arguments.length-2;if(u===1)r.children=t;else if(1<u){s=Array(u);for(var a=0;a<u;a++)s[a]=arguments[a+2];r.children=s}return{$$typeof:Zl,type:e.type,key:l,ref:o,props:r,_owner:i}};J.createContext=function(e){return e={$$typeof:yh,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:gh,_context:e},e.Consumer=e};J.createElement=yf;J.createFactory=function(e){var n=yf.bind(null,e);return n.type=e,n};J.createRef=function(){return{current:null}};J.forwardRef=function(e){return{$$typeof:Sh,render:e}};J.isValidElement=ku;J.lazy=function(e){return{$$typeof:kh,_payload:{_status:-1,_result:e},_init:Rh}};J.memo=function(e,n){return{$$typeof:wh,type:e,compare:n===void 0?null:n}};J.startTransition=function(e){var n=To.transition;To.transition={};try{e()}finally{To.transition=n}};J.unstable_act=Sf;J.useCallback=function(e,n){return nn.current.useCallback(e,n)};J.useContext=function(e){return nn.current.useContext(e)};J.useDebugValue=function(){};J.useDeferredValue=function(e){return nn.current.useDeferredValue(e)};J.useEffect=function(e,n){return nn.current.useEffect(e,n)};J.useId=function(){return nn.current.useId()};J.useImperativeHandle=function(e,n,t){return nn.current.useImperativeHandle(e,n,t)};J.useInsertionEffect=function(e,n){return nn.current.useInsertionEffect(e,n)};J.useLayoutEffect=function(e,n){return nn.current.useLayoutEffect(e,n)};J.useMemo=function(e,n){return nn.current.useMemo(e,n)};J.useReducer=function(e,n,t){return nn.current.useReducer(e,n,t)};J.useRef=function(e){return nn.current.useRef(e)};J.useState=function(e){return nn.current.useState(e)};J.useSyncExternalStore=function(e,n,t){return nn.current.useSyncExternalStore(e,n,t)};J.useTransition=function(){return nn.current.useTransition()};J.version="18.3.1";cf.exports=J;var L=cf.exports;const Th=fh(L);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Eh=L,Mh=Symbol.for("react.element"),Ph=Symbol.for("react.fragment"),Ih=Object.prototype.hasOwnProperty,Bh=Eh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Lh={key:!0,ref:!0,__self:!0,__source:!0};function vf(e,n,t){var r,l={},o=null,i=null;t!==void 0&&(o=""+t),n.key!==void 0&&(o=""+n.key),n.ref!==void 0&&(i=n.ref);for(r in n)Ih.call(n,r)&&!Lh.hasOwnProperty(r)&&(l[r]=n[r]);if(e&&e.defaultProps)for(r in n=e.defaultProps,n)l[r]===void 0&&(l[r]=n[r]);return{$$typeof:Mh,type:e,key:o,ref:i,props:l,_owner:Bh.current}}mi.Fragment=Ph;mi.jsx=vf;mi.jsxs=vf;af.exports=mi;var Tt=af.exports,hs={},wf={exports:{}},wn={},kf={exports:{}},Cf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function n(I,$){var N=I.length;I.push($);e:for(;0<N;){var j=N-1>>>1,le=I[j];if(0<l(le,$))I[j]=$,I[N]=le,N=j;else break e}}function t(I){return I.length===0?null:I[0]}function r(I){if(I.length===0)return null;var $=I[0],N=I.pop();if(N!==$){I[0]=N;e:for(var j=0,le=I.length,oe=le>>>1;j<oe;){var Ge=2*(j+1)-1,Re=I[Ge],Be=Ge+1,Ve=I[Be];if(0>l(Re,N))Be<le&&0>l(Ve,Re)?(I[j]=Ve,I[Be]=N,j=Be):(I[j]=Re,I[Ge]=N,j=Ge);else if(Be<le&&0>l(Ve,N))I[j]=Ve,I[Be]=N,j=Be;else break e}}return $}function l(I,$){var N=I.sortIndex-$.sortIndex;return N!==0?N:I.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var i=Date,s=i.now();e.unstable_now=function(){return i.now()-s}}var u=[],a=[],c=1,d=null,f=3,p=!1,S=!1,y=!1,k=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,h=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(I){for(var $=t(a);$!==null;){if($.callback===null)r(a);else if($.startTime<=I)r(a),$.sortIndex=$.expirationTime,n(u,$);else break;$=t(a)}}function v(I){if(y=!1,g(I),!S)if(t(u)!==null)S=!0,D(C);else{var $=t(a);$!==null&&Z(v,$.startTime-I)}}function C(I,$){S=!1,y&&(y=!1,m(R),R=-1),p=!0;var N=f;try{for(g($),d=t(u);d!==null&&(!(d.expirationTime>$)||I&&!b());){var j=d.callback;if(typeof j=="function"){d.callback=null,f=d.priorityLevel;var le=j(d.expirationTime<=$);$=e.unstable_now(),typeof le=="function"?d.callback=le:d===t(u)&&r(u),g($)}else r(u);d=t(u)}if(d!==null)var oe=!0;else{var Ge=t(a);Ge!==null&&Z(v,Ge.startTime-$),oe=!1}return oe}finally{d=null,f=N,p=!1}}var F=!1,_=null,R=-1,z=5,P=-1;function b(){return!(e.unstable_now()-P<z)}function V(){if(_!==null){var I=e.unstable_now();P=I;var $=!0;try{$=_(!0,I)}finally{$?K():(F=!1,_=null)}}else F=!1}var K;if(typeof h=="function")K=function(){h(V)};else if(typeof MessageChannel<"u"){var x=new MessageChannel,Q=x.port2;x.port1.onmessage=V,K=function(){Q.postMessage(null)}}else K=function(){k(V,0)};function D(I){_=I,F||(F=!0,K())}function Z(I,$){R=k(function(){I(e.unstable_now())},$)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(I){I.callback=null},e.unstable_continueExecution=function(){S||p||(S=!0,D(C))},e.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<I?Math.floor(1e3/I):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return t(u)},e.unstable_next=function(I){switch(f){case 1:case 2:case 3:var $=3;break;default:$=f}var N=f;f=$;try{return I()}finally{f=N}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(I,$){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var N=f;f=I;try{return $()}finally{f=N}},e.unstable_scheduleCallback=function(I,$,N){var j=e.unstable_now();switch(typeof N=="object"&&N!==null?(N=N.delay,N=typeof N=="number"&&0<N?j+N:j):N=j,I){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=N+le,I={id:c++,callback:$,priorityLevel:I,startTime:N,expirationTime:le,sortIndex:-1},N>j?(I.sortIndex=N,n(a,I),t(u)===null&&I===t(a)&&(y?(m(R),R=-1):y=!0,Z(v,N-j))):(I.sortIndex=le,n(u,I),S||p||(S=!0,D(C))),I},e.unstable_shouldYield=b,e.unstable_wrapCallback=function(I){var $=f;return function(){var N=f;f=$;try{return I.apply(this,arguments)}finally{f=N}}}})(Cf);kf.exports=Cf;var Dh=kf.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oh=L,Sn=Dh;function E(e){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+e,t=1;t<arguments.length;t++)n+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Af=new Set,Il={};function ar(e,n){$r(e,n),$r(e+"Capture",n)}function $r(e,n){for(Il[e]=n,e=0;e<n.length;e++)Af.add(n[e])}var ct=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ms=Object.prototype.hasOwnProperty,zh=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Oa={},za={};function Nh(e){return ms.call(za,e)?!0:ms.call(Oa,e)?!1:zh.test(e)?za[e]=!0:(Oa[e]=!0,!1)}function bh(e,n,t,r){if(t!==null&&t.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function $h(e,n,t,r){if(n===null||typeof n>"u"||bh(e,n,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function tn(e,n,t,r,l,o,i){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=r,this.attributeNamespace=l,this.mustUseProperty=t,this.propertyName=e,this.type=n,this.sanitizeURL=o,this.removeEmptyString=i}var Ye={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ye[e]=new tn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var n=e[0];Ye[n]=new tn(n,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ye[e]=new tn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ye[e]=new tn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ye[e]=new tn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ye[e]=new tn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ye[e]=new tn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ye[e]=new tn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ye[e]=new tn(e,5,!1,e.toLowerCase(),null,!1,!1)});var Cu=/[\-:]([a-z])/g;function Au(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var n=e.replace(Cu,Au);Ye[n]=new tn(n,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var n=e.replace(Cu,Au);Ye[n]=new tn(n,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var n=e.replace(Cu,Au);Ye[n]=new tn(n,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ye[e]=new tn(e,1,!1,e.toLowerCase(),null,!1,!1)});Ye.xlinkHref=new tn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ye[e]=new tn(e,1,!1,e.toLowerCase(),null,!0,!0)});function Fu(e,n,t,r){var l=Ye.hasOwnProperty(n)?Ye[n]:null;(l!==null?l.type!==0:r||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&($h(n,t,l,r)&&(t=null),r||l===null?Nh(n)&&(t===null?e.removeAttribute(n):e.setAttribute(n,""+t)):l.mustUseProperty?e[l.propertyName]=t===null?l.type===3?!1:"":t:(n=l.attributeName,r=l.attributeNamespace,t===null?e.removeAttribute(n):(l=l.type,t=l===3||l===4&&t===!0?"":""+t,r?e.setAttributeNS(r,n,t):e.setAttribute(n,t))))}var gt=Oh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,uo=Symbol.for("react.element"),Sr=Symbol.for("react.portal"),vr=Symbol.for("react.fragment"),Ru=Symbol.for("react.strict_mode"),gs=Symbol.for("react.profiler"),Ff=Symbol.for("react.provider"),Rf=Symbol.for("react.context"),_u=Symbol.for("react.forward_ref"),ys=Symbol.for("react.suspense"),Ss=Symbol.for("react.suspense_list"),Tu=Symbol.for("react.memo"),Ct=Symbol.for("react.lazy"),_f=Symbol.for("react.offscreen"),Na=Symbol.iterator;function ul(e){return e===null||typeof e!="object"?null:(e=Na&&e[Na]||e["@@iterator"],typeof e=="function"?e:null)}var Fe=Object.assign,Ni;function gl(e){if(Ni===void 0)try{throw Error()}catch(t){var n=t.stack.trim().match(/\n( *(at )?)/);Ni=n&&n[1]||""}return`
`+Ni+e}var bi=!1;function $i(e,n){if(!e||bi)return"";bi=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(a){var r=a}Reflect.construct(e,[],n)}else{try{n.call()}catch(a){r=a}e.call(n.prototype)}else{try{throw Error()}catch(a){r=a}e()}}catch(a){if(a&&r&&typeof a.stack=="string"){for(var l=a.stack.split(`
`),o=r.stack.split(`
`),i=l.length-1,s=o.length-1;1<=i&&0<=s&&l[i]!==o[s];)s--;for(;1<=i&&0<=s;i--,s--)if(l[i]!==o[s]){if(i!==1||s!==1)do if(i--,s--,0>s||l[i]!==o[s]){var u=`
`+l[i].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=i&&0<=s);break}}}finally{bi=!1,Error.prepareStackTrace=t}return(e=e?e.displayName||e.name:"")?gl(e):""}function Wh(e){switch(e.tag){case 5:return gl(e.type);case 16:return gl("Lazy");case 13:return gl("Suspense");case 19:return gl("SuspenseList");case 0:case 2:case 15:return e=$i(e.type,!1),e;case 11:return e=$i(e.type.render,!1),e;case 1:return e=$i(e.type,!0),e;default:return""}}function vs(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case vr:return"Fragment";case Sr:return"Portal";case gs:return"Profiler";case Ru:return"StrictMode";case ys:return"Suspense";case Ss:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Rf:return(e.displayName||"Context")+".Consumer";case Ff:return(e._context.displayName||"Context")+".Provider";case _u:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Tu:return n=e.displayName||null,n!==null?n:vs(e.type)||"Memo";case Ct:n=e._payload,e=e._init;try{return vs(e(n))}catch{}}return null}function Hh(e){var n=e.type;switch(e.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=n.render,e=e.displayName||e.name||"",n.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return vs(n);case 8:return n===Ru?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function bt(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Tf(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function Uh(e){var n=Tf(e)?"checked":"value",t=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),r=""+e[n];if(!e.hasOwnProperty(n)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var l=t.get,o=t.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return l.call(this)},set:function(i){r=""+i,o.call(this,i)}}),Object.defineProperty(e,n,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function ao(e){e._valueTracker||(e._valueTracker=Uh(e))}function Ef(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var t=n.getValue(),r="";return e&&(r=Tf(e)?e.checked?"true":"false":e.value),e=r,e!==t?(n.setValue(e),!0):!1}function $o(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ws(e,n){var t=n.checked;return Fe({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??e._wrapperState.initialChecked})}function ba(e,n){var t=n.defaultValue==null?"":n.defaultValue,r=n.checked!=null?n.checked:n.defaultChecked;t=bt(n.value!=null?n.value:t),e._wrapperState={initialChecked:r,initialValue:t,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function Mf(e,n){n=n.checked,n!=null&&Fu(e,"checked",n,!1)}function ks(e,n){Mf(e,n);var t=bt(n.value),r=n.type;if(t!=null)r==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+t):e.value!==""+t&&(e.value=""+t);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}n.hasOwnProperty("value")?Cs(e,n.type,t):n.hasOwnProperty("defaultValue")&&Cs(e,n.type,bt(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(e.defaultChecked=!!n.defaultChecked)}function $a(e,n,t){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var r=n.type;if(!(r!=="submit"&&r!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+e._wrapperState.initialValue,t||n===e.value||(e.value=n),e.defaultValue=n}t=e.name,t!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,t!==""&&(e.name=t)}function Cs(e,n,t){(n!=="number"||$o(e.ownerDocument)!==e)&&(t==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+t&&(e.defaultValue=""+t))}var yl=Array.isArray;function Lr(e,n,t,r){if(e=e.options,n){n={};for(var l=0;l<t.length;l++)n["$"+t[l]]=!0;for(t=0;t<e.length;t++)l=n.hasOwnProperty("$"+e[t].value),e[t].selected!==l&&(e[t].selected=l),l&&r&&(e[t].defaultSelected=!0)}else{for(t=""+bt(t),n=null,l=0;l<e.length;l++){if(e[l].value===t){e[l].selected=!0,r&&(e[l].defaultSelected=!0);return}n!==null||e[l].disabled||(n=e[l])}n!==null&&(n.selected=!0)}}function As(e,n){if(n.dangerouslySetInnerHTML!=null)throw Error(E(91));return Fe({},n,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Wa(e,n){var t=n.value;if(t==null){if(t=n.children,n=n.defaultValue,t!=null){if(n!=null)throw Error(E(92));if(yl(t)){if(1<t.length)throw Error(E(93));t=t[0]}n=t}n==null&&(n=""),t=n}e._wrapperState={initialValue:bt(t)}}function Pf(e,n){var t=bt(n.value),r=bt(n.defaultValue);t!=null&&(t=""+t,t!==e.value&&(e.value=t),n.defaultValue==null&&e.defaultValue!==t&&(e.defaultValue=t)),r!=null&&(e.defaultValue=""+r)}function Ha(e){var n=e.textContent;n===e._wrapperState.initialValue&&n!==""&&n!==null&&(e.value=n)}function If(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Fs(e,n){return e==null||e==="http://www.w3.org/1999/xhtml"?If(n):e==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var co,Bf=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,t,r,l){MSApp.execUnsafeLocalFunction(function(){return e(n,t,r,l)})}:e}(function(e,n){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=n;else{for(co=co||document.createElement("div"),co.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=co.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;n.firstChild;)e.appendChild(n.firstChild)}});function Bl(e,n){if(n){var t=e.firstChild;if(t&&t===e.lastChild&&t.nodeType===3){t.nodeValue=n;return}}e.textContent=n}var wl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Yh=["Webkit","ms","Moz","O"];Object.keys(wl).forEach(function(e){Yh.forEach(function(n){n=n+e.charAt(0).toUpperCase()+e.substring(1),wl[n]=wl[e]})});function Lf(e,n,t){return n==null||typeof n=="boolean"||n===""?"":t||typeof n!="number"||n===0||wl.hasOwnProperty(e)&&wl[e]?(""+n).trim():n+"px"}function Df(e,n){e=e.style;for(var t in n)if(n.hasOwnProperty(t)){var r=t.indexOf("--")===0,l=Lf(t,n[t],r);t==="float"&&(t="cssFloat"),r?e.setProperty(t,l):e[t]=l}}var Gh=Fe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Rs(e,n){if(n){if(Gh[e]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(E(137,e));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(E(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(E(61))}if(n.style!=null&&typeof n.style!="object")throw Error(E(62))}}function _s(e,n){if(e.indexOf("-")===-1)return typeof n.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ts=null;function Eu(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Es=null,Dr=null,Or=null;function Ua(e){if(e=eo(e)){if(typeof Es!="function")throw Error(E(280));var n=e.stateNode;n&&(n=wi(n),Es(e.stateNode,e.type,n))}}function Of(e){Dr?Or?Or.push(e):Or=[e]:Dr=e}function zf(){if(Dr){var e=Dr,n=Or;if(Or=Dr=null,Ua(e),n)for(e=0;e<n.length;e++)Ua(n[e])}}function Nf(e,n){return e(n)}function bf(){}var Wi=!1;function $f(e,n,t){if(Wi)return e(n,t);Wi=!0;try{return Nf(e,n,t)}finally{Wi=!1,(Dr!==null||Or!==null)&&(bf(),zf())}}function Ll(e,n){var t=e.stateNode;if(t===null)return null;var r=wi(t);if(r===null)return null;t=r[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(t&&typeof t!="function")throw Error(E(231,n,typeof t));return t}var Ms=!1;if(ct)try{var al={};Object.defineProperty(al,"passive",{get:function(){Ms=!0}}),window.addEventListener("test",al,al),window.removeEventListener("test",al,al)}catch{Ms=!1}function Vh(e,n,t,r,l,o,i,s,u){var a=Array.prototype.slice.call(arguments,3);try{n.apply(t,a)}catch(c){this.onError(c)}}var kl=!1,Wo=null,Ho=!1,Ps=null,jh={onError:function(e){kl=!0,Wo=e}};function xh(e,n,t,r,l,o,i,s,u){kl=!1,Wo=null,Vh.apply(jh,arguments)}function Xh(e,n,t,r,l,o,i,s,u){if(xh.apply(this,arguments),kl){if(kl){var a=Wo;kl=!1,Wo=null}else throw Error(E(198));Ho||(Ho=!0,Ps=a)}}function cr(e){var n=e,t=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,n.flags&4098&&(t=n.return),e=n.return;while(e)}return n.tag===3?t:null}function Wf(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function Ya(e){if(cr(e)!==e)throw Error(E(188))}function Kh(e){var n=e.alternate;if(!n){if(n=cr(e),n===null)throw Error(E(188));return n!==e?null:e}for(var t=e,r=n;;){var l=t.return;if(l===null)break;var o=l.alternate;if(o===null){if(r=l.return,r!==null){t=r;continue}break}if(l.child===o.child){for(o=l.child;o;){if(o===t)return Ya(l),e;if(o===r)return Ya(l),n;o=o.sibling}throw Error(E(188))}if(t.return!==r.return)t=l,r=o;else{for(var i=!1,s=l.child;s;){if(s===t){i=!0,t=l,r=o;break}if(s===r){i=!0,r=l,t=o;break}s=s.sibling}if(!i){for(s=o.child;s;){if(s===t){i=!0,t=o,r=l;break}if(s===r){i=!0,r=o,t=l;break}s=s.sibling}if(!i)throw Error(E(189))}}if(t.alternate!==r)throw Error(E(190))}if(t.tag!==3)throw Error(E(188));return t.stateNode.current===t?e:n}function Hf(e){return e=Kh(e),e!==null?Uf(e):null}function Uf(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var n=Uf(e);if(n!==null)return n;e=e.sibling}return null}var Yf=Sn.unstable_scheduleCallback,Ga=Sn.unstable_cancelCallback,Qh=Sn.unstable_shouldYield,Zh=Sn.unstable_requestPaint,Ie=Sn.unstable_now,Jh=Sn.unstable_getCurrentPriorityLevel,Mu=Sn.unstable_ImmediatePriority,Gf=Sn.unstable_UserBlockingPriority,Uo=Sn.unstable_NormalPriority,qh=Sn.unstable_LowPriority,Vf=Sn.unstable_IdlePriority,gi=null,jn=null;function em(e){if(jn&&typeof jn.onCommitFiberRoot=="function")try{jn.onCommitFiberRoot(gi,e,void 0,(e.current.flags&128)===128)}catch{}}var bn=Math.clz32?Math.clz32:rm,nm=Math.log,tm=Math.LN2;function rm(e){return e>>>=0,e===0?32:31-(nm(e)/tm|0)|0}var fo=64,po=4194304;function Sl(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Yo(e,n){var t=e.pendingLanes;if(t===0)return 0;var r=0,l=e.suspendedLanes,o=e.pingedLanes,i=t&268435455;if(i!==0){var s=i&~l;s!==0?r=Sl(s):(o&=i,o!==0&&(r=Sl(o)))}else i=t&~l,i!==0?r=Sl(i):o!==0&&(r=Sl(o));if(r===0)return 0;if(n!==0&&n!==r&&!(n&l)&&(l=r&-r,o=n&-n,l>=o||l===16&&(o&4194240)!==0))return n;if(r&4&&(r|=t&16),n=e.entangledLanes,n!==0)for(e=e.entanglements,n&=r;0<n;)t=31-bn(n),l=1<<t,r|=e[t],n&=~l;return r}function lm(e,n){switch(e){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function om(e,n){for(var t=e.suspendedLanes,r=e.pingedLanes,l=e.expirationTimes,o=e.pendingLanes;0<o;){var i=31-bn(o),s=1<<i,u=l[i];u===-1?(!(s&t)||s&r)&&(l[i]=lm(s,n)):u<=n&&(e.expiredLanes|=s),o&=~s}}function Is(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function jf(){var e=fo;return fo<<=1,!(fo&4194240)&&(fo=64),e}function Hi(e){for(var n=[],t=0;31>t;t++)n.push(e);return n}function Jl(e,n,t){e.pendingLanes|=n,n!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,n=31-bn(n),e[n]=t}function im(e,n){var t=e.pendingLanes&~n;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=n,e.mutableReadLanes&=n,e.entangledLanes&=n,n=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<t;){var l=31-bn(t),o=1<<l;n[l]=0,r[l]=-1,e[l]=-1,t&=~o}}function Pu(e,n){var t=e.entangledLanes|=n;for(e=e.entanglements;t;){var r=31-bn(t),l=1<<r;l&n|e[r]&n&&(e[r]|=n),t&=~l}}var ae=0;function xf(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Xf,Iu,Kf,Qf,Zf,Bs=!1,ho=[],Pt=null,It=null,Bt=null,Dl=new Map,Ol=new Map,Rt=[],sm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Va(e,n){switch(e){case"focusin":case"focusout":Pt=null;break;case"dragenter":case"dragleave":It=null;break;case"mouseover":case"mouseout":Bt=null;break;case"pointerover":case"pointerout":Dl.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ol.delete(n.pointerId)}}function cl(e,n,t,r,l,o){return e===null||e.nativeEvent!==o?(e={blockedOn:n,domEventName:t,eventSystemFlags:r,nativeEvent:o,targetContainers:[l]},n!==null&&(n=eo(n),n!==null&&Iu(n)),e):(e.eventSystemFlags|=r,n=e.targetContainers,l!==null&&n.indexOf(l)===-1&&n.push(l),e)}function um(e,n,t,r,l){switch(n){case"focusin":return Pt=cl(Pt,e,n,t,r,l),!0;case"dragenter":return It=cl(It,e,n,t,r,l),!0;case"mouseover":return Bt=cl(Bt,e,n,t,r,l),!0;case"pointerover":var o=l.pointerId;return Dl.set(o,cl(Dl.get(o)||null,e,n,t,r,l)),!0;case"gotpointercapture":return o=l.pointerId,Ol.set(o,cl(Ol.get(o)||null,e,n,t,r,l)),!0}return!1}function Jf(e){var n=Qt(e.target);if(n!==null){var t=cr(n);if(t!==null){if(n=t.tag,n===13){if(n=Wf(t),n!==null){e.blockedOn=n,Zf(e.priority,function(){Kf(t)});return}}else if(n===3&&t.stateNode.current.memoizedState.isDehydrated){e.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Eo(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var t=Ls(e.domEventName,e.eventSystemFlags,n[0],e.nativeEvent);if(t===null){t=e.nativeEvent;var r=new t.constructor(t.type,t);Ts=r,t.target.dispatchEvent(r),Ts=null}else return n=eo(t),n!==null&&Iu(n),e.blockedOn=t,!1;n.shift()}return!0}function ja(e,n,t){Eo(e)&&t.delete(n)}function am(){Bs=!1,Pt!==null&&Eo(Pt)&&(Pt=null),It!==null&&Eo(It)&&(It=null),Bt!==null&&Eo(Bt)&&(Bt=null),Dl.forEach(ja),Ol.forEach(ja)}function fl(e,n){e.blockedOn===n&&(e.blockedOn=null,Bs||(Bs=!0,Sn.unstable_scheduleCallback(Sn.unstable_NormalPriority,am)))}function zl(e){function n(l){return fl(l,e)}if(0<ho.length){fl(ho[0],e);for(var t=1;t<ho.length;t++){var r=ho[t];r.blockedOn===e&&(r.blockedOn=null)}}for(Pt!==null&&fl(Pt,e),It!==null&&fl(It,e),Bt!==null&&fl(Bt,e),Dl.forEach(n),Ol.forEach(n),t=0;t<Rt.length;t++)r=Rt[t],r.blockedOn===e&&(r.blockedOn=null);for(;0<Rt.length&&(t=Rt[0],t.blockedOn===null);)Jf(t),t.blockedOn===null&&Rt.shift()}var zr=gt.ReactCurrentBatchConfig,Go=!0;function cm(e,n,t,r){var l=ae,o=zr.transition;zr.transition=null;try{ae=1,Bu(e,n,t,r)}finally{ae=l,zr.transition=o}}function fm(e,n,t,r){var l=ae,o=zr.transition;zr.transition=null;try{ae=4,Bu(e,n,t,r)}finally{ae=l,zr.transition=o}}function Bu(e,n,t,r){if(Go){var l=Ls(e,n,t,r);if(l===null)Zi(e,n,r,Vo,t),Va(e,r);else if(um(l,e,n,t,r))r.stopPropagation();else if(Va(e,r),n&4&&-1<sm.indexOf(e)){for(;l!==null;){var o=eo(l);if(o!==null&&Xf(o),o=Ls(e,n,t,r),o===null&&Zi(e,n,r,Vo,t),o===l)break;l=o}l!==null&&r.stopPropagation()}else Zi(e,n,r,null,t)}}var Vo=null;function Ls(e,n,t,r){if(Vo=null,e=Eu(r),e=Qt(e),e!==null)if(n=cr(e),n===null)e=null;else if(t=n.tag,t===13){if(e=Wf(n),e!==null)return e;e=null}else if(t===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null);return Vo=e,null}function qf(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Jh()){case Mu:return 1;case Gf:return 4;case Uo:case qh:return 16;case Vf:return 536870912;default:return 16}default:return 16}}var Et=null,Lu=null,Mo=null;function ed(){if(Mo)return Mo;var e,n=Lu,t=n.length,r,l="value"in Et?Et.value:Et.textContent,o=l.length;for(e=0;e<t&&n[e]===l[e];e++);var i=t-e;for(r=1;r<=i&&n[t-r]===l[o-r];r++);return Mo=l.slice(e,1<r?1-r:void 0)}function Po(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function mo(){return!0}function xa(){return!1}function kn(e){function n(t,r,l,o,i){this._reactName=t,this._targetInst=l,this.type=r,this.nativeEvent=o,this.target=i,this.currentTarget=null;for(var s in e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(o):o[s]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?mo:xa,this.isPropagationStopped=xa,this}return Fe(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=mo)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=mo)},persist:function(){},isPersistent:mo}),n}var Zr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Du=kn(Zr),ql=Fe({},Zr,{view:0,detail:0}),dm=kn(ql),Ui,Yi,dl,yi=Fe({},ql,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ou,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==dl&&(dl&&e.type==="mousemove"?(Ui=e.screenX-dl.screenX,Yi=e.screenY-dl.screenY):Yi=Ui=0,dl=e),Ui)},movementY:function(e){return"movementY"in e?e.movementY:Yi}}),Xa=kn(yi),pm=Fe({},yi,{dataTransfer:0}),hm=kn(pm),mm=Fe({},ql,{relatedTarget:0}),Gi=kn(mm),gm=Fe({},Zr,{animationName:0,elapsedTime:0,pseudoElement:0}),ym=kn(gm),Sm=Fe({},Zr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vm=kn(Sm),wm=Fe({},Zr,{data:0}),Ka=kn(wm),km={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Am={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fm(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=Am[e])?!!n[e]:!1}function Ou(){return Fm}var Rm=Fe({},ql,{key:function(e){if(e.key){var n=km[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=Po(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Cm[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ou,charCode:function(e){return e.type==="keypress"?Po(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Po(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),_m=kn(Rm),Tm=Fe({},yi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qa=kn(Tm),Em=Fe({},ql,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ou}),Mm=kn(Em),Pm=Fe({},Zr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Im=kn(Pm),Bm=Fe({},yi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Lm=kn(Bm),Dm=[9,13,27,32],zu=ct&&"CompositionEvent"in window,Cl=null;ct&&"documentMode"in document&&(Cl=document.documentMode);var Om=ct&&"TextEvent"in window&&!Cl,nd=ct&&(!zu||Cl&&8<Cl&&11>=Cl),Za=" ",Ja=!1;function td(e,n){switch(e){case"keyup":return Dm.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var wr=!1;function zm(e,n){switch(e){case"compositionend":return rd(n);case"keypress":return n.which!==32?null:(Ja=!0,Za);case"textInput":return e=n.data,e===Za&&Ja?null:e;default:return null}}function Nm(e,n){if(wr)return e==="compositionend"||!zu&&td(e,n)?(e=ed(),Mo=Lu=Et=null,wr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return nd&&n.locale!=="ko"?null:n.data;default:return null}}var bm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qa(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!bm[e.type]:n==="textarea"}function ld(e,n,t,r){Of(r),n=jo(n,"onChange"),0<n.length&&(t=new Du("onChange","change",null,t,r),e.push({event:t,listeners:n}))}var Al=null,Nl=null;function $m(e){md(e,0)}function Si(e){var n=Ar(e);if(Ef(n))return e}function Wm(e,n){if(e==="change")return n}var od=!1;if(ct){var Vi;if(ct){var ji="oninput"in document;if(!ji){var ec=document.createElement("div");ec.setAttribute("oninput","return;"),ji=typeof ec.oninput=="function"}Vi=ji}else Vi=!1;od=Vi&&(!document.documentMode||9<document.documentMode)}function nc(){Al&&(Al.detachEvent("onpropertychange",id),Nl=Al=null)}function id(e){if(e.propertyName==="value"&&Si(Nl)){var n=[];ld(n,Nl,e,Eu(e)),$f($m,n)}}function Hm(e,n,t){e==="focusin"?(nc(),Al=n,Nl=t,Al.attachEvent("onpropertychange",id)):e==="focusout"&&nc()}function Um(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Si(Nl)}function Ym(e,n){if(e==="click")return Si(n)}function Gm(e,n){if(e==="input"||e==="change")return Si(n)}function Vm(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var Hn=typeof Object.is=="function"?Object.is:Vm;function bl(e,n){if(Hn(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var t=Object.keys(e),r=Object.keys(n);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var l=t[r];if(!ms.call(n,l)||!Hn(e[l],n[l]))return!1}return!0}function tc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function rc(e,n){var t=tc(e);e=0;for(var r;t;){if(t.nodeType===3){if(r=e+t.textContent.length,e<=n&&r>=n)return{node:t,offset:n-e};e=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=tc(t)}}function sd(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?sd(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function ud(){for(var e=window,n=$o();n instanceof e.HTMLIFrameElement;){try{var t=typeof n.contentWindow.location.href=="string"}catch{t=!1}if(t)e=n.contentWindow;else break;n=$o(e.document)}return n}function Nu(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}function jm(e){var n=ud(),t=e.focusedElem,r=e.selectionRange;if(n!==t&&t&&t.ownerDocument&&sd(t.ownerDocument.documentElement,t)){if(r!==null&&Nu(t)){if(n=r.start,e=r.end,e===void 0&&(e=n),"selectionStart"in t)t.selectionStart=n,t.selectionEnd=Math.min(e,t.value.length);else if(e=(n=t.ownerDocument||document)&&n.defaultView||window,e.getSelection){e=e.getSelection();var l=t.textContent.length,o=Math.min(r.start,l);r=r.end===void 0?o:Math.min(r.end,l),!e.extend&&o>r&&(l=r,r=o,o=l),l=rc(t,o);var i=rc(t,r);l&&i&&(e.rangeCount!==1||e.anchorNode!==l.node||e.anchorOffset!==l.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(n=n.createRange(),n.setStart(l.node,l.offset),e.removeAllRanges(),o>r?(e.addRange(n),e.extend(i.node,i.offset)):(n.setEnd(i.node,i.offset),e.addRange(n)))}}for(n=[],e=t;e=e.parentNode;)e.nodeType===1&&n.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<n.length;t++)e=n[t],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var xm=ct&&"documentMode"in document&&11>=document.documentMode,kr=null,Ds=null,Fl=null,Os=!1;function lc(e,n,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;Os||kr==null||kr!==$o(r)||(r=kr,"selectionStart"in r&&Nu(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Fl&&bl(Fl,r)||(Fl=r,r=jo(Ds,"onSelect"),0<r.length&&(n=new Du("onSelect","select",null,n,t),e.push({event:n,listeners:r}),n.target=kr)))}function go(e,n){var t={};return t[e.toLowerCase()]=n.toLowerCase(),t["Webkit"+e]="webkit"+n,t["Moz"+e]="moz"+n,t}var Cr={animationend:go("Animation","AnimationEnd"),animationiteration:go("Animation","AnimationIteration"),animationstart:go("Animation","AnimationStart"),transitionend:go("Transition","TransitionEnd")},xi={},ad={};ct&&(ad=document.createElement("div").style,"AnimationEvent"in window||(delete Cr.animationend.animation,delete Cr.animationiteration.animation,delete Cr.animationstart.animation),"TransitionEvent"in window||delete Cr.transitionend.transition);function vi(e){if(xi[e])return xi[e];if(!Cr[e])return e;var n=Cr[e],t;for(t in n)if(n.hasOwnProperty(t)&&t in ad)return xi[e]=n[t];return e}var cd=vi("animationend"),fd=vi("animationiteration"),dd=vi("animationstart"),pd=vi("transitionend"),hd=new Map,oc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ht(e,n){hd.set(e,n),ar(n,[e])}for(var Xi=0;Xi<oc.length;Xi++){var Ki=oc[Xi],Xm=Ki.toLowerCase(),Km=Ki[0].toUpperCase()+Ki.slice(1);Ht(Xm,"on"+Km)}Ht(cd,"onAnimationEnd");Ht(fd,"onAnimationIteration");Ht(dd,"onAnimationStart");Ht("dblclick","onDoubleClick");Ht("focusin","onFocus");Ht("focusout","onBlur");Ht(pd,"onTransitionEnd");$r("onMouseEnter",["mouseout","mouseover"]);$r("onMouseLeave",["mouseout","mouseover"]);$r("onPointerEnter",["pointerout","pointerover"]);$r("onPointerLeave",["pointerout","pointerover"]);ar("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ar("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ar("onBeforeInput",["compositionend","keypress","textInput","paste"]);ar("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ar("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ar("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Qm=new Set("cancel close invalid load scroll toggle".split(" ").concat(vl));function ic(e,n,t){var r=e.type||"unknown-event";e.currentTarget=t,Xh(r,n,void 0,e),e.currentTarget=null}function md(e,n){n=(n&4)!==0;for(var t=0;t<e.length;t++){var r=e[t],l=r.event;r=r.listeners;e:{var o=void 0;if(n)for(var i=r.length-1;0<=i;i--){var s=r[i],u=s.instance,a=s.currentTarget;if(s=s.listener,u!==o&&l.isPropagationStopped())break e;ic(l,s,a),o=u}else for(i=0;i<r.length;i++){if(s=r[i],u=s.instance,a=s.currentTarget,s=s.listener,u!==o&&l.isPropagationStopped())break e;ic(l,s,a),o=u}}}if(Ho)throw e=Ps,Ho=!1,Ps=null,e}function he(e,n){var t=n[Ws];t===void 0&&(t=n[Ws]=new Set);var r=e+"__bubble";t.has(r)||(gd(n,e,2,!1),t.add(r))}function Qi(e,n,t){var r=0;n&&(r|=4),gd(t,e,r,n)}var yo="_reactListening"+Math.random().toString(36).slice(2);function $l(e){if(!e[yo]){e[yo]=!0,Af.forEach(function(t){t!=="selectionchange"&&(Qm.has(t)||Qi(t,!1,e),Qi(t,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[yo]||(n[yo]=!0,Qi("selectionchange",!1,n))}}function gd(e,n,t,r){switch(qf(n)){case 1:var l=cm;break;case 4:l=fm;break;default:l=Bu}t=l.bind(null,n,t,e),l=void 0,!Ms||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(l=!0),r?l!==void 0?e.addEventListener(n,t,{capture:!0,passive:l}):e.addEventListener(n,t,!0):l!==void 0?e.addEventListener(n,t,{passive:l}):e.addEventListener(n,t,!1)}function Zi(e,n,t,r,l){var o=r;if(!(n&1)&&!(n&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var s=r.stateNode.containerInfo;if(s===l||s.nodeType===8&&s.parentNode===l)break;if(i===4)for(i=r.return;i!==null;){var u=i.tag;if((u===3||u===4)&&(u=i.stateNode.containerInfo,u===l||u.nodeType===8&&u.parentNode===l))return;i=i.return}for(;s!==null;){if(i=Qt(s),i===null)return;if(u=i.tag,u===5||u===6){r=o=i;continue e}s=s.parentNode}}r=r.return}$f(function(){var a=o,c=Eu(t),d=[];e:{var f=hd.get(e);if(f!==void 0){var p=Du,S=e;switch(e){case"keypress":if(Po(t)===0)break e;case"keydown":case"keyup":p=_m;break;case"focusin":S="focus",p=Gi;break;case"focusout":S="blur",p=Gi;break;case"beforeblur":case"afterblur":p=Gi;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Xa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=hm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=Mm;break;case cd:case fd:case dd:p=ym;break;case pd:p=Im;break;case"scroll":p=dm;break;case"wheel":p=Lm;break;case"copy":case"cut":case"paste":p=vm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Qa}var y=(n&4)!==0,k=!y&&e==="scroll",m=y?f!==null?f+"Capture":null:f;y=[];for(var h=a,g;h!==null;){g=h;var v=g.stateNode;if(g.tag===5&&v!==null&&(g=v,m!==null&&(v=Ll(h,m),v!=null&&y.push(Wl(h,v,g)))),k)break;h=h.return}0<y.length&&(f=new p(f,S,null,t,c),d.push({event:f,listeners:y}))}}if(!(n&7)){e:{if(f=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",f&&t!==Ts&&(S=t.relatedTarget||t.fromElement)&&(Qt(S)||S[ft]))break e;if((p||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,p?(S=t.relatedTarget||t.toElement,p=a,S=S?Qt(S):null,S!==null&&(k=cr(S),S!==k||S.tag!==5&&S.tag!==6)&&(S=null)):(p=null,S=a),p!==S)){if(y=Xa,v="onMouseLeave",m="onMouseEnter",h="mouse",(e==="pointerout"||e==="pointerover")&&(y=Qa,v="onPointerLeave",m="onPointerEnter",h="pointer"),k=p==null?f:Ar(p),g=S==null?f:Ar(S),f=new y(v,h+"leave",p,t,c),f.target=k,f.relatedTarget=g,v=null,Qt(c)===a&&(y=new y(m,h+"enter",S,t,c),y.target=g,y.relatedTarget=k,v=y),k=v,p&&S)n:{for(y=p,m=S,h=0,g=y;g;g=yr(g))h++;for(g=0,v=m;v;v=yr(v))g++;for(;0<h-g;)y=yr(y),h--;for(;0<g-h;)m=yr(m),g--;for(;h--;){if(y===m||m!==null&&y===m.alternate)break n;y=yr(y),m=yr(m)}y=null}else y=null;p!==null&&sc(d,f,p,y,!1),S!==null&&k!==null&&sc(d,k,S,y,!0)}}e:{if(f=a?Ar(a):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var C=Wm;else if(qa(f))if(od)C=Gm;else{C=Um;var F=Hm}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(C=Ym);if(C&&(C=C(e,a))){ld(d,C,t,c);break e}F&&F(e,f,a),e==="focusout"&&(F=f._wrapperState)&&F.controlled&&f.type==="number"&&Cs(f,"number",f.value)}switch(F=a?Ar(a):window,e){case"focusin":(qa(F)||F.contentEditable==="true")&&(kr=F,Ds=a,Fl=null);break;case"focusout":Fl=Ds=kr=null;break;case"mousedown":Os=!0;break;case"contextmenu":case"mouseup":case"dragend":Os=!1,lc(d,t,c);break;case"selectionchange":if(xm)break;case"keydown":case"keyup":lc(d,t,c)}var _;if(zu)e:{switch(e){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else wr?td(e,t)&&(R="onCompositionEnd"):e==="keydown"&&t.keyCode===229&&(R="onCompositionStart");R&&(nd&&t.locale!=="ko"&&(wr||R!=="onCompositionStart"?R==="onCompositionEnd"&&wr&&(_=ed()):(Et=c,Lu="value"in Et?Et.value:Et.textContent,wr=!0)),F=jo(a,R),0<F.length&&(R=new Ka(R,e,null,t,c),d.push({event:R,listeners:F}),_?R.data=_:(_=rd(t),_!==null&&(R.data=_)))),(_=Om?zm(e,t):Nm(e,t))&&(a=jo(a,"onBeforeInput"),0<a.length&&(c=new Ka("onBeforeInput","beforeinput",null,t,c),d.push({event:c,listeners:a}),c.data=_))}md(d,n)})}function Wl(e,n,t){return{instance:e,listener:n,currentTarget:t}}function jo(e,n){for(var t=n+"Capture",r=[];e!==null;){var l=e,o=l.stateNode;l.tag===5&&o!==null&&(l=o,o=Ll(e,t),o!=null&&r.unshift(Wl(e,o,l)),o=Ll(e,n),o!=null&&r.push(Wl(e,o,l))),e=e.return}return r}function yr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function sc(e,n,t,r,l){for(var o=n._reactName,i=[];t!==null&&t!==r;){var s=t,u=s.alternate,a=s.stateNode;if(u!==null&&u===r)break;s.tag===5&&a!==null&&(s=a,l?(u=Ll(t,o),u!=null&&i.unshift(Wl(t,u,s))):l||(u=Ll(t,o),u!=null&&i.push(Wl(t,u,s)))),t=t.return}i.length!==0&&e.push({event:n,listeners:i})}var Zm=/\r\n?/g,Jm=/\u0000|\uFFFD/g;function uc(e){return(typeof e=="string"?e:""+e).replace(Zm,`
`).replace(Jm,"")}function So(e,n,t){if(n=uc(n),uc(e)!==n&&t)throw Error(E(425))}function xo(){}var zs=null,Ns=null;function bs(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var $s=typeof setTimeout=="function"?setTimeout:void 0,qm=typeof clearTimeout=="function"?clearTimeout:void 0,ac=typeof Promise=="function"?Promise:void 0,eg=typeof queueMicrotask=="function"?queueMicrotask:typeof ac<"u"?function(e){return ac.resolve(null).then(e).catch(ng)}:$s;function ng(e){setTimeout(function(){throw e})}function Ji(e,n){var t=n,r=0;do{var l=t.nextSibling;if(e.removeChild(t),l&&l.nodeType===8)if(t=l.data,t==="/$"){if(r===0){e.removeChild(l),zl(n);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=l}while(t);zl(n)}function Lt(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return e}function cc(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var t=e.data;if(t==="$"||t==="$!"||t==="$?"){if(n===0)return e;n--}else t==="/$"&&n++}e=e.previousSibling}return null}var Jr=Math.random().toString(36).slice(2),Vn="__reactFiber$"+Jr,Hl="__reactProps$"+Jr,ft="__reactContainer$"+Jr,Ws="__reactEvents$"+Jr,tg="__reactListeners$"+Jr,rg="__reactHandles$"+Jr;function Qt(e){var n=e[Vn];if(n)return n;for(var t=e.parentNode;t;){if(n=t[ft]||t[Vn]){if(t=n.alternate,n.child!==null||t!==null&&t.child!==null)for(e=cc(e);e!==null;){if(t=e[Vn])return t;e=cc(e)}return n}e=t,t=e.parentNode}return null}function eo(e){return e=e[Vn]||e[ft],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ar(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(E(33))}function wi(e){return e[Hl]||null}var Hs=[],Fr=-1;function Ut(e){return{current:e}}function me(e){0>Fr||(e.current=Hs[Fr],Hs[Fr]=null,Fr--)}function de(e,n){Fr++,Hs[Fr]=e.current,e.current=n}var $t={},Ke=Ut($t),cn=Ut(!1),rr=$t;function Wr(e,n){var t=e.type.contextTypes;if(!t)return $t;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===n)return r.__reactInternalMemoizedMaskedChildContext;var l={},o;for(o in t)l[o]=n[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=l),l}function fn(e){return e=e.childContextTypes,e!=null}function Xo(){me(cn),me(Ke)}function fc(e,n,t){if(Ke.current!==$t)throw Error(E(168));de(Ke,n),de(cn,t)}function yd(e,n,t){var r=e.stateNode;if(n=n.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var l in r)if(!(l in n))throw Error(E(108,Hh(e)||"Unknown",l));return Fe({},t,r)}function Ko(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||$t,rr=Ke.current,de(Ke,e),de(cn,cn.current),!0}function dc(e,n,t){var r=e.stateNode;if(!r)throw Error(E(169));t?(e=yd(e,n,rr),r.__reactInternalMemoizedMergedChildContext=e,me(cn),me(Ke),de(Ke,e)):me(cn),de(cn,t)}var lt=null,ki=!1,qi=!1;function Sd(e){lt===null?lt=[e]:lt.push(e)}function lg(e){ki=!0,Sd(e)}function Yt(){if(!qi&&lt!==null){qi=!0;var e=0,n=ae;try{var t=lt;for(ae=1;e<t.length;e++){var r=t[e];do r=r(!0);while(r!==null)}lt=null,ki=!1}catch(l){throw lt!==null&&(lt=lt.slice(e+1)),Yf(Mu,Yt),l}finally{ae=n,qi=!1}}return null}var Rr=[],_r=0,Qo=null,Zo=0,Rn=[],_n=0,lr=null,ot=1,it="";function xt(e,n){Rr[_r++]=Zo,Rr[_r++]=Qo,Qo=e,Zo=n}function vd(e,n,t){Rn[_n++]=ot,Rn[_n++]=it,Rn[_n++]=lr,lr=e;var r=ot;e=it;var l=32-bn(r)-1;r&=~(1<<l),t+=1;var o=32-bn(n)+l;if(30<o){var i=l-l%5;o=(r&(1<<i)-1).toString(32),r>>=i,l-=i,ot=1<<32-bn(n)+l|t<<l|r,it=o+e}else ot=1<<o|t<<l|r,it=e}function bu(e){e.return!==null&&(xt(e,1),vd(e,1,0))}function $u(e){for(;e===Qo;)Qo=Rr[--_r],Rr[_r]=null,Zo=Rr[--_r],Rr[_r]=null;for(;e===lr;)lr=Rn[--_n],Rn[_n]=null,it=Rn[--_n],Rn[_n]=null,ot=Rn[--_n],Rn[_n]=null}var yn=null,gn=null,ye=!1,Nn=null;function wd(e,n){var t=Tn(5,null,null,0);t.elementType="DELETED",t.stateNode=n,t.return=e,n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)}function pc(e,n){switch(e.tag){case 5:var t=e.type;return n=n.nodeType!==1||t.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(e.stateNode=n,yn=e,gn=Lt(n.firstChild),!0):!1;case 6:return n=e.pendingProps===""||n.nodeType!==3?null:n,n!==null?(e.stateNode=n,yn=e,gn=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(t=lr!==null?{id:ot,overflow:it}:null,e.memoizedState={dehydrated:n,treeContext:t,retryLane:1073741824},t=Tn(18,null,null,0),t.stateNode=n,t.return=e,e.child=t,yn=e,gn=null,!0):!1;default:return!1}}function Us(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ys(e){if(ye){var n=gn;if(n){var t=n;if(!pc(e,n)){if(Us(e))throw Error(E(418));n=Lt(t.nextSibling);var r=yn;n&&pc(e,n)?wd(r,t):(e.flags=e.flags&-4097|2,ye=!1,yn=e)}}else{if(Us(e))throw Error(E(418));e.flags=e.flags&-4097|2,ye=!1,yn=e}}}function hc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;yn=e}function vo(e){if(e!==yn)return!1;if(!ye)return hc(e),ye=!0,!1;var n;if((n=e.tag!==3)&&!(n=e.tag!==5)&&(n=e.type,n=n!=="head"&&n!=="body"&&!bs(e.type,e.memoizedProps)),n&&(n=gn)){if(Us(e))throw kd(),Error(E(418));for(;n;)wd(e,n),n=Lt(n.nextSibling)}if(hc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(E(317));e:{for(e=e.nextSibling,n=0;e;){if(e.nodeType===8){var t=e.data;if(t==="/$"){if(n===0){gn=Lt(e.nextSibling);break e}n--}else t!=="$"&&t!=="$!"&&t!=="$?"||n++}e=e.nextSibling}gn=null}}else gn=yn?Lt(e.stateNode.nextSibling):null;return!0}function kd(){for(var e=gn;e;)e=Lt(e.nextSibling)}function Hr(){gn=yn=null,ye=!1}function Wu(e){Nn===null?Nn=[e]:Nn.push(e)}var og=gt.ReactCurrentBatchConfig;function pl(e,n,t){if(e=t.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(E(309));var r=t.stateNode}if(!r)throw Error(E(147,e));var l=r,o=""+e;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===o?n.ref:(n=function(i){var s=l.refs;i===null?delete s[o]:s[o]=i},n._stringRef=o,n)}if(typeof e!="string")throw Error(E(284));if(!t._owner)throw Error(E(290,e))}return e}function wo(e,n){throw e=Object.prototype.toString.call(n),Error(E(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e))}function mc(e){var n=e._init;return n(e._payload)}function Cd(e){function n(m,h){if(e){var g=m.deletions;g===null?(m.deletions=[h],m.flags|=16):g.push(h)}}function t(m,h){if(!e)return null;for(;h!==null;)n(m,h),h=h.sibling;return null}function r(m,h){for(m=new Map;h!==null;)h.key!==null?m.set(h.key,h):m.set(h.index,h),h=h.sibling;return m}function l(m,h){return m=Nt(m,h),m.index=0,m.sibling=null,m}function o(m,h,g){return m.index=g,e?(g=m.alternate,g!==null?(g=g.index,g<h?(m.flags|=2,h):g):(m.flags|=2,h)):(m.flags|=1048576,h)}function i(m){return e&&m.alternate===null&&(m.flags|=2),m}function s(m,h,g,v){return h===null||h.tag!==6?(h=is(g,m.mode,v),h.return=m,h):(h=l(h,g),h.return=m,h)}function u(m,h,g,v){var C=g.type;return C===vr?c(m,h,g.props.children,v,g.key):h!==null&&(h.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Ct&&mc(C)===h.type)?(v=l(h,g.props),v.ref=pl(m,h,g),v.return=m,v):(v=No(g.type,g.key,g.props,null,m.mode,v),v.ref=pl(m,h,g),v.return=m,v)}function a(m,h,g,v){return h===null||h.tag!==4||h.stateNode.containerInfo!==g.containerInfo||h.stateNode.implementation!==g.implementation?(h=ss(g,m.mode,v),h.return=m,h):(h=l(h,g.children||[]),h.return=m,h)}function c(m,h,g,v,C){return h===null||h.tag!==7?(h=tr(g,m.mode,v,C),h.return=m,h):(h=l(h,g),h.return=m,h)}function d(m,h,g){if(typeof h=="string"&&h!==""||typeof h=="number")return h=is(""+h,m.mode,g),h.return=m,h;if(typeof h=="object"&&h!==null){switch(h.$$typeof){case uo:return g=No(h.type,h.key,h.props,null,m.mode,g),g.ref=pl(m,null,h),g.return=m,g;case Sr:return h=ss(h,m.mode,g),h.return=m,h;case Ct:var v=h._init;return d(m,v(h._payload),g)}if(yl(h)||ul(h))return h=tr(h,m.mode,g,null),h.return=m,h;wo(m,h)}return null}function f(m,h,g,v){var C=h!==null?h.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return C!==null?null:s(m,h,""+g,v);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case uo:return g.key===C?u(m,h,g,v):null;case Sr:return g.key===C?a(m,h,g,v):null;case Ct:return C=g._init,f(m,h,C(g._payload),v)}if(yl(g)||ul(g))return C!==null?null:c(m,h,g,v,null);wo(m,g)}return null}function p(m,h,g,v,C){if(typeof v=="string"&&v!==""||typeof v=="number")return m=m.get(g)||null,s(h,m,""+v,C);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case uo:return m=m.get(v.key===null?g:v.key)||null,u(h,m,v,C);case Sr:return m=m.get(v.key===null?g:v.key)||null,a(h,m,v,C);case Ct:var F=v._init;return p(m,h,g,F(v._payload),C)}if(yl(v)||ul(v))return m=m.get(g)||null,c(h,m,v,C,null);wo(h,v)}return null}function S(m,h,g,v){for(var C=null,F=null,_=h,R=h=0,z=null;_!==null&&R<g.length;R++){_.index>R?(z=_,_=null):z=_.sibling;var P=f(m,_,g[R],v);if(P===null){_===null&&(_=z);break}e&&_&&P.alternate===null&&n(m,_),h=o(P,h,R),F===null?C=P:F.sibling=P,F=P,_=z}if(R===g.length)return t(m,_),ye&&xt(m,R),C;if(_===null){for(;R<g.length;R++)_=d(m,g[R],v),_!==null&&(h=o(_,h,R),F===null?C=_:F.sibling=_,F=_);return ye&&xt(m,R),C}for(_=r(m,_);R<g.length;R++)z=p(_,m,R,g[R],v),z!==null&&(e&&z.alternate!==null&&_.delete(z.key===null?R:z.key),h=o(z,h,R),F===null?C=z:F.sibling=z,F=z);return e&&_.forEach(function(b){return n(m,b)}),ye&&xt(m,R),C}function y(m,h,g,v){var C=ul(g);if(typeof C!="function")throw Error(E(150));if(g=C.call(g),g==null)throw Error(E(151));for(var F=C=null,_=h,R=h=0,z=null,P=g.next();_!==null&&!P.done;R++,P=g.next()){_.index>R?(z=_,_=null):z=_.sibling;var b=f(m,_,P.value,v);if(b===null){_===null&&(_=z);break}e&&_&&b.alternate===null&&n(m,_),h=o(b,h,R),F===null?C=b:F.sibling=b,F=b,_=z}if(P.done)return t(m,_),ye&&xt(m,R),C;if(_===null){for(;!P.done;R++,P=g.next())P=d(m,P.value,v),P!==null&&(h=o(P,h,R),F===null?C=P:F.sibling=P,F=P);return ye&&xt(m,R),C}for(_=r(m,_);!P.done;R++,P=g.next())P=p(_,m,R,P.value,v),P!==null&&(e&&P.alternate!==null&&_.delete(P.key===null?R:P.key),h=o(P,h,R),F===null?C=P:F.sibling=P,F=P);return e&&_.forEach(function(V){return n(m,V)}),ye&&xt(m,R),C}function k(m,h,g,v){if(typeof g=="object"&&g!==null&&g.type===vr&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case uo:e:{for(var C=g.key,F=h;F!==null;){if(F.key===C){if(C=g.type,C===vr){if(F.tag===7){t(m,F.sibling),h=l(F,g.props.children),h.return=m,m=h;break e}}else if(F.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Ct&&mc(C)===F.type){t(m,F.sibling),h=l(F,g.props),h.ref=pl(m,F,g),h.return=m,m=h;break e}t(m,F);break}else n(m,F);F=F.sibling}g.type===vr?(h=tr(g.props.children,m.mode,v,g.key),h.return=m,m=h):(v=No(g.type,g.key,g.props,null,m.mode,v),v.ref=pl(m,h,g),v.return=m,m=v)}return i(m);case Sr:e:{for(F=g.key;h!==null;){if(h.key===F)if(h.tag===4&&h.stateNode.containerInfo===g.containerInfo&&h.stateNode.implementation===g.implementation){t(m,h.sibling),h=l(h,g.children||[]),h.return=m,m=h;break e}else{t(m,h);break}else n(m,h);h=h.sibling}h=ss(g,m.mode,v),h.return=m,m=h}return i(m);case Ct:return F=g._init,k(m,h,F(g._payload),v)}if(yl(g))return S(m,h,g,v);if(ul(g))return y(m,h,g,v);wo(m,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,h!==null&&h.tag===6?(t(m,h.sibling),h=l(h,g),h.return=m,m=h):(t(m,h),h=is(g,m.mode,v),h.return=m,m=h),i(m)):t(m,h)}return k}var Ur=Cd(!0),Ad=Cd(!1),Jo=Ut(null),qo=null,Tr=null,Hu=null;function Uu(){Hu=Tr=qo=null}function Yu(e){var n=Jo.current;me(Jo),e._currentValue=n}function Gs(e,n,t){for(;e!==null;){var r=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,r!==null&&(r.childLanes|=n)):r!==null&&(r.childLanes&n)!==n&&(r.childLanes|=n),e===t)break;e=e.return}}function Nr(e,n){qo=e,Hu=Tr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&n&&(an=!0),e.firstContext=null)}function Pn(e){var n=e._currentValue;if(Hu!==e)if(e={context:e,memoizedValue:n,next:null},Tr===null){if(qo===null)throw Error(E(308));Tr=e,qo.dependencies={lanes:0,firstContext:e}}else Tr=Tr.next=e;return n}var Zt=null;function Gu(e){Zt===null?Zt=[e]:Zt.push(e)}function Fd(e,n,t,r){var l=n.interleaved;return l===null?(t.next=t,Gu(n)):(t.next=l.next,l.next=t),n.interleaved=t,dt(e,r)}function dt(e,n){e.lanes|=n;var t=e.alternate;for(t!==null&&(t.lanes|=n),t=e,e=e.return;e!==null;)e.childLanes|=n,t=e.alternate,t!==null&&(t.childLanes|=n),t=e,e=e.return;return t.tag===3?t.stateNode:null}var At=!1;function Vu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Rd(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ut(e,n){return{eventTime:e,lane:n,tag:0,payload:null,callback:null,next:null}}function Dt(e,n,t){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,re&2){var l=r.pending;return l===null?n.next=n:(n.next=l.next,l.next=n),r.pending=n,dt(e,t)}return l=r.interleaved,l===null?(n.next=n,Gu(r)):(n.next=l.next,l.next=n),r.interleaved=n,dt(e,t)}function Io(e,n,t){if(n=n.updateQueue,n!==null&&(n=n.shared,(t&4194240)!==0)){var r=n.lanes;r&=e.pendingLanes,t|=r,n.lanes=t,Pu(e,t)}}function gc(e,n){var t=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var l=null,o=null;if(t=t.firstBaseUpdate,t!==null){do{var i={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};o===null?l=o=i:o=o.next=i,t=t.next}while(t!==null);o===null?l=o=n:o=o.next=n}else l=o=n;t={baseState:r.baseState,firstBaseUpdate:l,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=t;return}e=t.lastBaseUpdate,e===null?t.firstBaseUpdate=n:e.next=n,t.lastBaseUpdate=n}function ei(e,n,t,r){var l=e.updateQueue;At=!1;var o=l.firstBaseUpdate,i=l.lastBaseUpdate,s=l.shared.pending;if(s!==null){l.shared.pending=null;var u=s,a=u.next;u.next=null,i===null?o=a:i.next=a,i=u;var c=e.alternate;c!==null&&(c=c.updateQueue,s=c.lastBaseUpdate,s!==i&&(s===null?c.firstBaseUpdate=a:s.next=a,c.lastBaseUpdate=u))}if(o!==null){var d=l.baseState;i=0,c=a=u=null,s=o;do{var f=s.lane,p=s.eventTime;if((r&f)===f){c!==null&&(c=c.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var S=e,y=s;switch(f=n,p=t,y.tag){case 1:if(S=y.payload,typeof S=="function"){d=S.call(p,d,f);break e}d=S;break e;case 3:S.flags=S.flags&-65537|128;case 0:if(S=y.payload,f=typeof S=="function"?S.call(p,d,f):S,f==null)break e;d=Fe({},d,f);break e;case 2:At=!0}}s.callback!==null&&s.lane!==0&&(e.flags|=64,f=l.effects,f===null?l.effects=[s]:f.push(s))}else p={eventTime:p,lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},c===null?(a=c=p,u=d):c=c.next=p,i|=f;if(s=s.next,s===null){if(s=l.shared.pending,s===null)break;f=s,s=f.next,f.next=null,l.lastBaseUpdate=f,l.shared.pending=null}}while(!0);if(c===null&&(u=d),l.baseState=u,l.firstBaseUpdate=a,l.lastBaseUpdate=c,n=l.shared.interleaved,n!==null){l=n;do i|=l.lane,l=l.next;while(l!==n)}else o===null&&(l.shared.lanes=0);ir|=i,e.lanes=i,e.memoizedState=d}}function yc(e,n,t){if(e=n.effects,n.effects=null,e!==null)for(n=0;n<e.length;n++){var r=e[n],l=r.callback;if(l!==null){if(r.callback=null,r=t,typeof l!="function")throw Error(E(191,l));l.call(r)}}}var no={},xn=Ut(no),Ul=Ut(no),Yl=Ut(no);function Jt(e){if(e===no)throw Error(E(174));return e}function ju(e,n){switch(de(Yl,n),de(Ul,e),de(xn,no),e=n.nodeType,e){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:Fs(null,"");break;default:e=e===8?n.parentNode:n,n=e.namespaceURI||null,e=e.tagName,n=Fs(n,e)}me(xn),de(xn,n)}function Yr(){me(xn),me(Ul),me(Yl)}function _d(e){Jt(Yl.current);var n=Jt(xn.current),t=Fs(n,e.type);n!==t&&(de(Ul,e),de(xn,t))}function xu(e){Ul.current===e&&(me(xn),me(Ul))}var we=Ut(0);function ni(e){for(var n=e;n!==null;){if(n.tag===13){var t=n.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if(n.flags&128)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var es=[];function Xu(){for(var e=0;e<es.length;e++)es[e]._workInProgressVersionPrimary=null;es.length=0}var Bo=gt.ReactCurrentDispatcher,ns=gt.ReactCurrentBatchConfig,or=0,Ce=null,ze=null,be=null,ti=!1,Rl=!1,Gl=0,ig=0;function je(){throw Error(E(321))}function Ku(e,n){if(n===null)return!1;for(var t=0;t<n.length&&t<e.length;t++)if(!Hn(e[t],n[t]))return!1;return!0}function Qu(e,n,t,r,l,o){if(or=o,Ce=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,Bo.current=e===null||e.memoizedState===null?cg:fg,e=t(r,l),Rl){o=0;do{if(Rl=!1,Gl=0,25<=o)throw Error(E(301));o+=1,be=ze=null,n.updateQueue=null,Bo.current=dg,e=t(r,l)}while(Rl)}if(Bo.current=ri,n=ze!==null&&ze.next!==null,or=0,be=ze=Ce=null,ti=!1,n)throw Error(E(300));return e}function Zu(){var e=Gl!==0;return Gl=0,e}function Gn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return be===null?Ce.memoizedState=be=e:be=be.next=e,be}function In(){if(ze===null){var e=Ce.alternate;e=e!==null?e.memoizedState:null}else e=ze.next;var n=be===null?Ce.memoizedState:be.next;if(n!==null)be=n,ze=e;else{if(e===null)throw Error(E(310));ze=e,e={memoizedState:ze.memoizedState,baseState:ze.baseState,baseQueue:ze.baseQueue,queue:ze.queue,next:null},be===null?Ce.memoizedState=be=e:be=be.next=e}return be}function Vl(e,n){return typeof n=="function"?n(e):n}function ts(e){var n=In(),t=n.queue;if(t===null)throw Error(E(311));t.lastRenderedReducer=e;var r=ze,l=r.baseQueue,o=t.pending;if(o!==null){if(l!==null){var i=l.next;l.next=o.next,o.next=i}r.baseQueue=l=o,t.pending=null}if(l!==null){o=l.next,r=r.baseState;var s=i=null,u=null,a=o;do{var c=a.lane;if((or&c)===c)u!==null&&(u=u.next={lane:0,action:a.action,hasEagerState:a.hasEagerState,eagerState:a.eagerState,next:null}),r=a.hasEagerState?a.eagerState:e(r,a.action);else{var d={lane:c,action:a.action,hasEagerState:a.hasEagerState,eagerState:a.eagerState,next:null};u===null?(s=u=d,i=r):u=u.next=d,Ce.lanes|=c,ir|=c}a=a.next}while(a!==null&&a!==o);u===null?i=r:u.next=s,Hn(r,n.memoizedState)||(an=!0),n.memoizedState=r,n.baseState=i,n.baseQueue=u,t.lastRenderedState=r}if(e=t.interleaved,e!==null){l=e;do o=l.lane,Ce.lanes|=o,ir|=o,l=l.next;while(l!==e)}else l===null&&(t.lanes=0);return[n.memoizedState,t.dispatch]}function rs(e){var n=In(),t=n.queue;if(t===null)throw Error(E(311));t.lastRenderedReducer=e;var r=t.dispatch,l=t.pending,o=n.memoizedState;if(l!==null){t.pending=null;var i=l=l.next;do o=e(o,i.action),i=i.next;while(i!==l);Hn(o,n.memoizedState)||(an=!0),n.memoizedState=o,n.baseQueue===null&&(n.baseState=o),t.lastRenderedState=o}return[o,r]}function Td(){}function Ed(e,n){var t=Ce,r=In(),l=n(),o=!Hn(r.memoizedState,l);if(o&&(r.memoizedState=l,an=!0),r=r.queue,Ju(Id.bind(null,t,r,e),[e]),r.getSnapshot!==n||o||be!==null&&be.memoizedState.tag&1){if(t.flags|=2048,jl(9,Pd.bind(null,t,r,l,n),void 0,null),$e===null)throw Error(E(349));or&30||Md(t,n,l)}return l}function Md(e,n,t){e.flags|=16384,e={getSnapshot:n,value:t},n=Ce.updateQueue,n===null?(n={lastEffect:null,stores:null},Ce.updateQueue=n,n.stores=[e]):(t=n.stores,t===null?n.stores=[e]:t.push(e))}function Pd(e,n,t,r){n.value=t,n.getSnapshot=r,Bd(n)&&Ld(e)}function Id(e,n,t){return t(function(){Bd(n)&&Ld(e)})}function Bd(e){var n=e.getSnapshot;e=e.value;try{var t=n();return!Hn(e,t)}catch{return!0}}function Ld(e){var n=dt(e,1);n!==null&&$n(n,e,1,-1)}function Sc(e){var n=Gn();return typeof e=="function"&&(e=e()),n.memoizedState=n.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vl,lastRenderedState:e},n.queue=e,e=e.dispatch=ag.bind(null,Ce,e),[n.memoizedState,e]}function jl(e,n,t,r){return e={tag:e,create:n,destroy:t,deps:r,next:null},n=Ce.updateQueue,n===null?(n={lastEffect:null,stores:null},Ce.updateQueue=n,n.lastEffect=e.next=e):(t=n.lastEffect,t===null?n.lastEffect=e.next=e:(r=t.next,t.next=e,e.next=r,n.lastEffect=e)),e}function Dd(){return In().memoizedState}function Lo(e,n,t,r){var l=Gn();Ce.flags|=e,l.memoizedState=jl(1|n,t,void 0,r===void 0?null:r)}function Ci(e,n,t,r){var l=In();r=r===void 0?null:r;var o=void 0;if(ze!==null){var i=ze.memoizedState;if(o=i.destroy,r!==null&&Ku(r,i.deps)){l.memoizedState=jl(n,t,o,r);return}}Ce.flags|=e,l.memoizedState=jl(1|n,t,o,r)}function vc(e,n){return Lo(8390656,8,e,n)}function Ju(e,n){return Ci(2048,8,e,n)}function Od(e,n){return Ci(4,2,e,n)}function zd(e,n){return Ci(4,4,e,n)}function Nd(e,n){if(typeof n=="function")return e=e(),n(e),function(){n(null)};if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function bd(e,n,t){return t=t!=null?t.concat([e]):null,Ci(4,4,Nd.bind(null,n,e),t)}function qu(){}function $d(e,n){var t=In();n=n===void 0?null:n;var r=t.memoizedState;return r!==null&&n!==null&&Ku(n,r[1])?r[0]:(t.memoizedState=[e,n],e)}function Wd(e,n){var t=In();n=n===void 0?null:n;var r=t.memoizedState;return r!==null&&n!==null&&Ku(n,r[1])?r[0]:(e=e(),t.memoizedState=[e,n],e)}function Hd(e,n,t){return or&21?(Hn(t,n)||(t=jf(),Ce.lanes|=t,ir|=t,e.baseState=!0),n):(e.baseState&&(e.baseState=!1,an=!0),e.memoizedState=t)}function sg(e,n){var t=ae;ae=t!==0&&4>t?t:4,e(!0);var r=ns.transition;ns.transition={};try{e(!1),n()}finally{ae=t,ns.transition=r}}function Ud(){return In().memoizedState}function ug(e,n,t){var r=zt(e);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},Yd(e))Gd(n,t);else if(t=Fd(e,n,t,r),t!==null){var l=en();$n(t,e,r,l),Vd(t,n,r)}}function ag(e,n,t){var r=zt(e),l={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(Yd(e))Gd(n,l);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=n.lastRenderedReducer,o!==null))try{var i=n.lastRenderedState,s=o(i,t);if(l.hasEagerState=!0,l.eagerState=s,Hn(s,i)){var u=n.interleaved;u===null?(l.next=l,Gu(n)):(l.next=u.next,u.next=l),n.interleaved=l;return}}catch{}finally{}t=Fd(e,n,l,r),t!==null&&(l=en(),$n(t,e,r,l),Vd(t,n,r))}}function Yd(e){var n=e.alternate;return e===Ce||n!==null&&n===Ce}function Gd(e,n){Rl=ti=!0;var t=e.pending;t===null?n.next=n:(n.next=t.next,t.next=n),e.pending=n}function Vd(e,n,t){if(t&4194240){var r=n.lanes;r&=e.pendingLanes,t|=r,n.lanes=t,Pu(e,t)}}var ri={readContext:Pn,useCallback:je,useContext:je,useEffect:je,useImperativeHandle:je,useInsertionEffect:je,useLayoutEffect:je,useMemo:je,useReducer:je,useRef:je,useState:je,useDebugValue:je,useDeferredValue:je,useTransition:je,useMutableSource:je,useSyncExternalStore:je,useId:je,unstable_isNewReconciler:!1},cg={readContext:Pn,useCallback:function(e,n){return Gn().memoizedState=[e,n===void 0?null:n],e},useContext:Pn,useEffect:vc,useImperativeHandle:function(e,n,t){return t=t!=null?t.concat([e]):null,Lo(4194308,4,Nd.bind(null,n,e),t)},useLayoutEffect:function(e,n){return Lo(4194308,4,e,n)},useInsertionEffect:function(e,n){return Lo(4,2,e,n)},useMemo:function(e,n){var t=Gn();return n=n===void 0?null:n,e=e(),t.memoizedState=[e,n],e},useReducer:function(e,n,t){var r=Gn();return n=t!==void 0?t(n):n,r.memoizedState=r.baseState=n,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},r.queue=e,e=e.dispatch=ug.bind(null,Ce,e),[r.memoizedState,e]},useRef:function(e){var n=Gn();return e={current:e},n.memoizedState=e},useState:Sc,useDebugValue:qu,useDeferredValue:function(e){return Gn().memoizedState=e},useTransition:function(){var e=Sc(!1),n=e[0];return e=sg.bind(null,e[1]),Gn().memoizedState=e,[n,e]},useMutableSource:function(){},useSyncExternalStore:function(e,n,t){var r=Ce,l=Gn();if(ye){if(t===void 0)throw Error(E(407));t=t()}else{if(t=n(),$e===null)throw Error(E(349));or&30||Md(r,n,t)}l.memoizedState=t;var o={value:t,getSnapshot:n};return l.queue=o,vc(Id.bind(null,r,o,e),[e]),r.flags|=2048,jl(9,Pd.bind(null,r,o,t,n),void 0,null),t},useId:function(){var e=Gn(),n=$e.identifierPrefix;if(ye){var t=it,r=ot;t=(r&~(1<<32-bn(r)-1)).toString(32)+t,n=":"+n+"R"+t,t=Gl++,0<t&&(n+="H"+t.toString(32)),n+=":"}else t=ig++,n=":"+n+"r"+t.toString(32)+":";return e.memoizedState=n},unstable_isNewReconciler:!1},fg={readContext:Pn,useCallback:$d,useContext:Pn,useEffect:Ju,useImperativeHandle:bd,useInsertionEffect:Od,useLayoutEffect:zd,useMemo:Wd,useReducer:ts,useRef:Dd,useState:function(){return ts(Vl)},useDebugValue:qu,useDeferredValue:function(e){var n=In();return Hd(n,ze.memoizedState,e)},useTransition:function(){var e=ts(Vl)[0],n=In().memoizedState;return[e,n]},useMutableSource:Td,useSyncExternalStore:Ed,useId:Ud,unstable_isNewReconciler:!1},dg={readContext:Pn,useCallback:$d,useContext:Pn,useEffect:Ju,useImperativeHandle:bd,useInsertionEffect:Od,useLayoutEffect:zd,useMemo:Wd,useReducer:rs,useRef:Dd,useState:function(){return rs(Vl)},useDebugValue:qu,useDeferredValue:function(e){var n=In();return ze===null?n.memoizedState=e:Hd(n,ze.memoizedState,e)},useTransition:function(){var e=rs(Vl)[0],n=In().memoizedState;return[e,n]},useMutableSource:Td,useSyncExternalStore:Ed,useId:Ud,unstable_isNewReconciler:!1};function On(e,n){if(e&&e.defaultProps){n=Fe({},n),e=e.defaultProps;for(var t in e)n[t]===void 0&&(n[t]=e[t]);return n}return n}function Vs(e,n,t,r){n=e.memoizedState,t=t(r,n),t=t==null?n:Fe({},n,t),e.memoizedState=t,e.lanes===0&&(e.updateQueue.baseState=t)}var Ai={isMounted:function(e){return(e=e._reactInternals)?cr(e)===e:!1},enqueueSetState:function(e,n,t){e=e._reactInternals;var r=en(),l=zt(e),o=ut(r,l);o.payload=n,t!=null&&(o.callback=t),n=Dt(e,o,l),n!==null&&($n(n,e,l,r),Io(n,e,l))},enqueueReplaceState:function(e,n,t){e=e._reactInternals;var r=en(),l=zt(e),o=ut(r,l);o.tag=1,o.payload=n,t!=null&&(o.callback=t),n=Dt(e,o,l),n!==null&&($n(n,e,l,r),Io(n,e,l))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var t=en(),r=zt(e),l=ut(t,r);l.tag=2,n!=null&&(l.callback=n),n=Dt(e,l,r),n!==null&&($n(n,e,r,t),Io(n,e,r))}};function wc(e,n,t,r,l,o,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,i):n.prototype&&n.prototype.isPureReactComponent?!bl(t,r)||!bl(l,o):!0}function jd(e,n,t){var r=!1,l=$t,o=n.contextType;return typeof o=="object"&&o!==null?o=Pn(o):(l=fn(n)?rr:Ke.current,r=n.contextTypes,o=(r=r!=null)?Wr(e,l):$t),n=new n(t,o),e.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=Ai,e.stateNode=n,n._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=l,e.__reactInternalMemoizedMaskedChildContext=o),n}function kc(e,n,t,r){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(t,r),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(t,r),n.state!==e&&Ai.enqueueReplaceState(n,n.state,null)}function js(e,n,t,r){var l=e.stateNode;l.props=t,l.state=e.memoizedState,l.refs={},Vu(e);var o=n.contextType;typeof o=="object"&&o!==null?l.context=Pn(o):(o=fn(n)?rr:Ke.current,l.context=Wr(e,o)),l.state=e.memoizedState,o=n.getDerivedStateFromProps,typeof o=="function"&&(Vs(e,n,o,t),l.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(n=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),n!==l.state&&Ai.enqueueReplaceState(l,l.state,null),ei(e,t,l,r),l.state=e.memoizedState),typeof l.componentDidMount=="function"&&(e.flags|=4194308)}function Gr(e,n){try{var t="",r=n;do t+=Wh(r),r=r.return;while(r);var l=t}catch(o){l=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:n,stack:l,digest:null}}function ls(e,n,t){return{value:e,source:null,stack:t??null,digest:n??null}}function xs(e,n){try{console.error(n.value)}catch(t){setTimeout(function(){throw t})}}var pg=typeof WeakMap=="function"?WeakMap:Map;function xd(e,n,t){t=ut(-1,t),t.tag=3,t.payload={element:null};var r=n.value;return t.callback=function(){oi||(oi=!0,ru=r),xs(e,n)},t}function Xd(e,n,t){t=ut(-1,t),t.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var l=n.value;t.payload=function(){return r(l)},t.callback=function(){xs(e,n)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(t.callback=function(){xs(e,n),typeof r!="function"&&(Ot===null?Ot=new Set([this]):Ot.add(this));var i=n.stack;this.componentDidCatch(n.value,{componentStack:i!==null?i:""})}),t}function Cc(e,n,t){var r=e.pingCache;if(r===null){r=e.pingCache=new pg;var l=new Set;r.set(n,l)}else l=r.get(n),l===void 0&&(l=new Set,r.set(n,l));l.has(t)||(l.add(t),e=Tg.bind(null,e,n,t),n.then(e,e))}function Ac(e){do{var n;if((n=e.tag===13)&&(n=e.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return e;e=e.return}while(e!==null);return null}function Fc(e,n,t,r,l){return e.mode&1?(e.flags|=65536,e.lanes=l,e):(e===n?e.flags|=65536:(e.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(n=ut(-1,1),n.tag=2,Dt(t,n,1))),t.lanes|=1),e)}var hg=gt.ReactCurrentOwner,an=!1;function qe(e,n,t,r){n.child=e===null?Ad(n,null,t,r):Ur(n,e.child,t,r)}function Rc(e,n,t,r,l){t=t.render;var o=n.ref;return Nr(n,l),r=Qu(e,n,t,r,o,l),t=Zu(),e!==null&&!an?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~l,pt(e,n,l)):(ye&&t&&bu(n),n.flags|=1,qe(e,n,r,l),n.child)}function _c(e,n,t,r,l){if(e===null){var o=t.type;return typeof o=="function"&&!sa(o)&&o.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(n.tag=15,n.type=o,Kd(e,n,o,r,l)):(e=No(t.type,null,r,n,n.mode,l),e.ref=n.ref,e.return=n,n.child=e)}if(o=e.child,!(e.lanes&l)){var i=o.memoizedProps;if(t=t.compare,t=t!==null?t:bl,t(i,r)&&e.ref===n.ref)return pt(e,n,l)}return n.flags|=1,e=Nt(o,r),e.ref=n.ref,e.return=n,n.child=e}function Kd(e,n,t,r,l){if(e!==null){var o=e.memoizedProps;if(bl(o,r)&&e.ref===n.ref)if(an=!1,n.pendingProps=r=o,(e.lanes&l)!==0)e.flags&131072&&(an=!0);else return n.lanes=e.lanes,pt(e,n,l)}return Xs(e,n,t,r,l)}function Qd(e,n,t){var r=n.pendingProps,l=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(n.mode&1))n.memoizedState={baseLanes:0,cachePool:null,transitions:null},de(Mr,mn),mn|=t;else{if(!(t&1073741824))return e=o!==null?o.baseLanes|t:t,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:e,cachePool:null,transitions:null},n.updateQueue=null,de(Mr,mn),mn|=e,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:t,de(Mr,mn),mn|=r}else o!==null?(r=o.baseLanes|t,n.memoizedState=null):r=t,de(Mr,mn),mn|=r;return qe(e,n,l,t),n.child}function Zd(e,n){var t=n.ref;(e===null&&t!==null||e!==null&&e.ref!==t)&&(n.flags|=512,n.flags|=2097152)}function Xs(e,n,t,r,l){var o=fn(t)?rr:Ke.current;return o=Wr(n,o),Nr(n,l),t=Qu(e,n,t,r,o,l),r=Zu(),e!==null&&!an?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~l,pt(e,n,l)):(ye&&r&&bu(n),n.flags|=1,qe(e,n,t,l),n.child)}function Tc(e,n,t,r,l){if(fn(t)){var o=!0;Ko(n)}else o=!1;if(Nr(n,l),n.stateNode===null)Do(e,n),jd(n,t,r),js(n,t,r,l),r=!0;else if(e===null){var i=n.stateNode,s=n.memoizedProps;i.props=s;var u=i.context,a=t.contextType;typeof a=="object"&&a!==null?a=Pn(a):(a=fn(t)?rr:Ke.current,a=Wr(n,a));var c=t.getDerivedStateFromProps,d=typeof c=="function"||typeof i.getSnapshotBeforeUpdate=="function";d||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(s!==r||u!==a)&&kc(n,i,r,a),At=!1;var f=n.memoizedState;i.state=f,ei(n,r,i,l),u=n.memoizedState,s!==r||f!==u||cn.current||At?(typeof c=="function"&&(Vs(n,t,c,r),u=n.memoizedState),(s=At||wc(n,t,s,r,f,u,a))?(d||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(n.flags|=4194308)):(typeof i.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=r,n.memoizedState=u),i.props=r,i.state=u,i.context=a,r=s):(typeof i.componentDidMount=="function"&&(n.flags|=4194308),r=!1)}else{i=n.stateNode,Rd(e,n),s=n.memoizedProps,a=n.type===n.elementType?s:On(n.type,s),i.props=a,d=n.pendingProps,f=i.context,u=t.contextType,typeof u=="object"&&u!==null?u=Pn(u):(u=fn(t)?rr:Ke.current,u=Wr(n,u));var p=t.getDerivedStateFromProps;(c=typeof p=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(s!==d||f!==u)&&kc(n,i,r,u),At=!1,f=n.memoizedState,i.state=f,ei(n,r,i,l);var S=n.memoizedState;s!==d||f!==S||cn.current||At?(typeof p=="function"&&(Vs(n,t,p,r),S=n.memoizedState),(a=At||wc(n,t,a,r,f,S,u)||!1)?(c||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,S,u),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,S,u)),typeof i.componentDidUpdate=="function"&&(n.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof i.componentDidUpdate!="function"||s===e.memoizedProps&&f===e.memoizedState||(n.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&f===e.memoizedState||(n.flags|=1024),n.memoizedProps=r,n.memoizedState=S),i.props=r,i.state=S,i.context=u,r=a):(typeof i.componentDidUpdate!="function"||s===e.memoizedProps&&f===e.memoizedState||(n.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&f===e.memoizedState||(n.flags|=1024),r=!1)}return Ks(e,n,t,r,o,l)}function Ks(e,n,t,r,l,o){Zd(e,n);var i=(n.flags&128)!==0;if(!r&&!i)return l&&dc(n,t,!1),pt(e,n,o);r=n.stateNode,hg.current=n;var s=i&&typeof t.getDerivedStateFromError!="function"?null:r.render();return n.flags|=1,e!==null&&i?(n.child=Ur(n,e.child,null,o),n.child=Ur(n,null,s,o)):qe(e,n,s,o),n.memoizedState=r.state,l&&dc(n,t,!0),n.child}function Jd(e){var n=e.stateNode;n.pendingContext?fc(e,n.pendingContext,n.pendingContext!==n.context):n.context&&fc(e,n.context,!1),ju(e,n.containerInfo)}function Ec(e,n,t,r,l){return Hr(),Wu(l),n.flags|=256,qe(e,n,t,r),n.child}var Qs={dehydrated:null,treeContext:null,retryLane:0};function Zs(e){return{baseLanes:e,cachePool:null,transitions:null}}function qd(e,n,t){var r=n.pendingProps,l=we.current,o=!1,i=(n.flags&128)!==0,s;if((s=i)||(s=e!==null&&e.memoizedState===null?!1:(l&2)!==0),s?(o=!0,n.flags&=-129):(e===null||e.memoizedState!==null)&&(l|=1),de(we,l&1),e===null)return Ys(n),e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(n.mode&1?e.data==="$!"?n.lanes=8:n.lanes=1073741824:n.lanes=1,null):(i=r.children,e=r.fallback,o?(r=n.mode,o=n.child,i={mode:"hidden",children:i},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=i):o=_i(i,r,0,null),e=tr(e,r,t,null),o.return=n,e.return=n,o.sibling=e,n.child=o,n.child.memoizedState=Zs(t),n.memoizedState=Qs,e):ea(n,i));if(l=e.memoizedState,l!==null&&(s=l.dehydrated,s!==null))return mg(e,n,i,r,s,l,t);if(o){o=r.fallback,i=n.mode,l=e.child,s=l.sibling;var u={mode:"hidden",children:r.children};return!(i&1)&&n.child!==l?(r=n.child,r.childLanes=0,r.pendingProps=u,n.deletions=null):(r=Nt(l,u),r.subtreeFlags=l.subtreeFlags&14680064),s!==null?o=Nt(s,o):(o=tr(o,i,t,null),o.flags|=2),o.return=n,r.return=n,r.sibling=o,n.child=r,r=o,o=n.child,i=e.child.memoizedState,i=i===null?Zs(t):{baseLanes:i.baseLanes|t,cachePool:null,transitions:i.transitions},o.memoizedState=i,o.childLanes=e.childLanes&~t,n.memoizedState=Qs,r}return o=e.child,e=o.sibling,r=Nt(o,{mode:"visible",children:r.children}),!(n.mode&1)&&(r.lanes=t),r.return=n,r.sibling=null,e!==null&&(t=n.deletions,t===null?(n.deletions=[e],n.flags|=16):t.push(e)),n.child=r,n.memoizedState=null,r}function ea(e,n){return n=_i({mode:"visible",children:n},e.mode,0,null),n.return=e,e.child=n}function ko(e,n,t,r){return r!==null&&Wu(r),Ur(n,e.child,null,t),e=ea(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function mg(e,n,t,r,l,o,i){if(t)return n.flags&256?(n.flags&=-257,r=ls(Error(E(422))),ko(e,n,i,r)):n.memoizedState!==null?(n.child=e.child,n.flags|=128,null):(o=r.fallback,l=n.mode,r=_i({mode:"visible",children:r.children},l,0,null),o=tr(o,l,i,null),o.flags|=2,r.return=n,o.return=n,r.sibling=o,n.child=r,n.mode&1&&Ur(n,e.child,null,i),n.child.memoizedState=Zs(i),n.memoizedState=Qs,o);if(!(n.mode&1))return ko(e,n,i,null);if(l.data==="$!"){if(r=l.nextSibling&&l.nextSibling.dataset,r)var s=r.dgst;return r=s,o=Error(E(419)),r=ls(o,r,void 0),ko(e,n,i,r)}if(s=(i&e.childLanes)!==0,an||s){if(r=$e,r!==null){switch(i&-i){case 4:l=2;break;case 16:l=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:l=32;break;case 536870912:l=268435456;break;default:l=0}l=l&(r.suspendedLanes|i)?0:l,l!==0&&l!==o.retryLane&&(o.retryLane=l,dt(e,l),$n(r,e,l,-1))}return ia(),r=ls(Error(E(421))),ko(e,n,i,r)}return l.data==="$?"?(n.flags|=128,n.child=e.child,n=Eg.bind(null,e),l._reactRetry=n,null):(e=o.treeContext,gn=Lt(l.nextSibling),yn=n,ye=!0,Nn=null,e!==null&&(Rn[_n++]=ot,Rn[_n++]=it,Rn[_n++]=lr,ot=e.id,it=e.overflow,lr=n),n=ea(n,r.children),n.flags|=4096,n)}function Mc(e,n,t){e.lanes|=n;var r=e.alternate;r!==null&&(r.lanes|=n),Gs(e.return,n,t)}function os(e,n,t,r,l){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:l}:(o.isBackwards=n,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=t,o.tailMode=l)}function ep(e,n,t){var r=n.pendingProps,l=r.revealOrder,o=r.tail;if(qe(e,n,r.children,t),r=we.current,r&2)r=r&1|2,n.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Mc(e,t,n);else if(e.tag===19)Mc(e,t,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(de(we,r),!(n.mode&1))n.memoizedState=null;else switch(l){case"forwards":for(t=n.child,l=null;t!==null;)e=t.alternate,e!==null&&ni(e)===null&&(l=t),t=t.sibling;t=l,t===null?(l=n.child,n.child=null):(l=t.sibling,t.sibling=null),os(n,!1,l,t,o);break;case"backwards":for(t=null,l=n.child,n.child=null;l!==null;){if(e=l.alternate,e!==null&&ni(e)===null){n.child=l;break}e=l.sibling,l.sibling=t,t=l,l=e}os(n,!0,t,null,o);break;case"together":os(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Do(e,n){!(n.mode&1)&&e!==null&&(e.alternate=null,n.alternate=null,n.flags|=2)}function pt(e,n,t){if(e!==null&&(n.dependencies=e.dependencies),ir|=n.lanes,!(t&n.childLanes))return null;if(e!==null&&n.child!==e.child)throw Error(E(153));if(n.child!==null){for(e=n.child,t=Nt(e,e.pendingProps),n.child=t,t.return=n;e.sibling!==null;)e=e.sibling,t=t.sibling=Nt(e,e.pendingProps),t.return=n;t.sibling=null}return n.child}function gg(e,n,t){switch(n.tag){case 3:Jd(n),Hr();break;case 5:_d(n);break;case 1:fn(n.type)&&Ko(n);break;case 4:ju(n,n.stateNode.containerInfo);break;case 10:var r=n.type._context,l=n.memoizedProps.value;de(Jo,r._currentValue),r._currentValue=l;break;case 13:if(r=n.memoizedState,r!==null)return r.dehydrated!==null?(de(we,we.current&1),n.flags|=128,null):t&n.child.childLanes?qd(e,n,t):(de(we,we.current&1),e=pt(e,n,t),e!==null?e.sibling:null);de(we,we.current&1);break;case 19:if(r=(t&n.childLanes)!==0,e.flags&128){if(r)return ep(e,n,t);n.flags|=128}if(l=n.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),de(we,we.current),r)break;return null;case 22:case 23:return n.lanes=0,Qd(e,n,t)}return pt(e,n,t)}var np,Js,tp,rp;np=function(e,n){for(var t=n.child;t!==null;){if(t.tag===5||t.tag===6)e.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break;for(;t.sibling===null;){if(t.return===null||t.return===n)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};Js=function(){};tp=function(e,n,t,r){var l=e.memoizedProps;if(l!==r){e=n.stateNode,Jt(xn.current);var o=null;switch(t){case"input":l=ws(e,l),r=ws(e,r),o=[];break;case"select":l=Fe({},l,{value:void 0}),r=Fe({},r,{value:void 0}),o=[];break;case"textarea":l=As(e,l),r=As(e,r),o=[];break;default:typeof l.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=xo)}Rs(t,r);var i;t=null;for(a in l)if(!r.hasOwnProperty(a)&&l.hasOwnProperty(a)&&l[a]!=null)if(a==="style"){var s=l[a];for(i in s)s.hasOwnProperty(i)&&(t||(t={}),t[i]="")}else a!=="dangerouslySetInnerHTML"&&a!=="children"&&a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Il.hasOwnProperty(a)?o||(o=[]):(o=o||[]).push(a,null));for(a in r){var u=r[a];if(s=l!=null?l[a]:void 0,r.hasOwnProperty(a)&&u!==s&&(u!=null||s!=null))if(a==="style")if(s){for(i in s)!s.hasOwnProperty(i)||u&&u.hasOwnProperty(i)||(t||(t={}),t[i]="");for(i in u)u.hasOwnProperty(i)&&s[i]!==u[i]&&(t||(t={}),t[i]=u[i])}else t||(o||(o=[]),o.push(a,t)),t=u;else a==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,s=s?s.__html:void 0,u!=null&&s!==u&&(o=o||[]).push(a,u)):a==="children"?typeof u!="string"&&typeof u!="number"||(o=o||[]).push(a,""+u):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&(Il.hasOwnProperty(a)?(u!=null&&a==="onScroll"&&he("scroll",e),o||s===u||(o=[])):(o=o||[]).push(a,u))}t&&(o=o||[]).push("style",t);var a=o;(n.updateQueue=a)&&(n.flags|=4)}};rp=function(e,n,t,r){t!==r&&(n.flags|=4)};function hl(e,n){if(!ye)switch(e.tailMode){case"hidden":n=e.tail;for(var t=null;n!==null;)n.alternate!==null&&(t=n),n=n.sibling;t===null?e.tail=null:t.sibling=null;break;case"collapsed":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function xe(e){var n=e.alternate!==null&&e.alternate.child===e.child,t=0,r=0;if(n)for(var l=e.child;l!==null;)t|=l.lanes|l.childLanes,r|=l.subtreeFlags&14680064,r|=l.flags&14680064,l.return=e,l=l.sibling;else for(l=e.child;l!==null;)t|=l.lanes|l.childLanes,r|=l.subtreeFlags,r|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=r,e.childLanes=t,n}function yg(e,n,t){var r=n.pendingProps;switch($u(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xe(n),null;case 1:return fn(n.type)&&Xo(),xe(n),null;case 3:return r=n.stateNode,Yr(),me(cn),me(Ke),Xu(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(vo(n)?n.flags|=4:e===null||e.memoizedState.isDehydrated&&!(n.flags&256)||(n.flags|=1024,Nn!==null&&(iu(Nn),Nn=null))),Js(e,n),xe(n),null;case 5:xu(n);var l=Jt(Yl.current);if(t=n.type,e!==null&&n.stateNode!=null)tp(e,n,t,r,l),e.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!r){if(n.stateNode===null)throw Error(E(166));return xe(n),null}if(e=Jt(xn.current),vo(n)){r=n.stateNode,t=n.type;var o=n.memoizedProps;switch(r[Vn]=n,r[Hl]=o,e=(n.mode&1)!==0,t){case"dialog":he("cancel",r),he("close",r);break;case"iframe":case"object":case"embed":he("load",r);break;case"video":case"audio":for(l=0;l<vl.length;l++)he(vl[l],r);break;case"source":he("error",r);break;case"img":case"image":case"link":he("error",r),he("load",r);break;case"details":he("toggle",r);break;case"input":ba(r,o),he("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},he("invalid",r);break;case"textarea":Wa(r,o),he("invalid",r)}Rs(t,o),l=null;for(var i in o)if(o.hasOwnProperty(i)){var s=o[i];i==="children"?typeof s=="string"?r.textContent!==s&&(o.suppressHydrationWarning!==!0&&So(r.textContent,s,e),l=["children",s]):typeof s=="number"&&r.textContent!==""+s&&(o.suppressHydrationWarning!==!0&&So(r.textContent,s,e),l=["children",""+s]):Il.hasOwnProperty(i)&&s!=null&&i==="onScroll"&&he("scroll",r)}switch(t){case"input":ao(r),$a(r,o,!0);break;case"textarea":ao(r),Ha(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=xo)}r=l,n.updateQueue=r,r!==null&&(n.flags|=4)}else{i=l.nodeType===9?l:l.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=If(t)),e==="http://www.w3.org/1999/xhtml"?t==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=i.createElement(t,{is:r.is}):(e=i.createElement(t),t==="select"&&(i=e,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):e=i.createElementNS(e,t),e[Vn]=n,e[Hl]=r,np(e,n,!1,!1),n.stateNode=e;e:{switch(i=_s(t,r),t){case"dialog":he("cancel",e),he("close",e),l=r;break;case"iframe":case"object":case"embed":he("load",e),l=r;break;case"video":case"audio":for(l=0;l<vl.length;l++)he(vl[l],e);l=r;break;case"source":he("error",e),l=r;break;case"img":case"image":case"link":he("error",e),he("load",e),l=r;break;case"details":he("toggle",e),l=r;break;case"input":ba(e,r),l=ws(e,r),he("invalid",e);break;case"option":l=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},l=Fe({},r,{value:void 0}),he("invalid",e);break;case"textarea":Wa(e,r),l=As(e,r),he("invalid",e);break;default:l=r}Rs(t,l),s=l;for(o in s)if(s.hasOwnProperty(o)){var u=s[o];o==="style"?Df(e,u):o==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Bf(e,u)):o==="children"?typeof u=="string"?(t!=="textarea"||u!=="")&&Bl(e,u):typeof u=="number"&&Bl(e,""+u):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Il.hasOwnProperty(o)?u!=null&&o==="onScroll"&&he("scroll",e):u!=null&&Fu(e,o,u,i))}switch(t){case"input":ao(e),$a(e,r,!1);break;case"textarea":ao(e),Ha(e);break;case"option":r.value!=null&&e.setAttribute("value",""+bt(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?Lr(e,!!r.multiple,o,!1):r.defaultValue!=null&&Lr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof l.onClick=="function"&&(e.onclick=xo)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return xe(n),null;case 6:if(e&&n.stateNode!=null)rp(e,n,e.memoizedProps,r);else{if(typeof r!="string"&&n.stateNode===null)throw Error(E(166));if(t=Jt(Yl.current),Jt(xn.current),vo(n)){if(r=n.stateNode,t=n.memoizedProps,r[Vn]=n,(o=r.nodeValue!==t)&&(e=yn,e!==null))switch(e.tag){case 3:So(r.nodeValue,t,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&So(r.nodeValue,t,(e.mode&1)!==0)}o&&(n.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[Vn]=n,n.stateNode=r}return xe(n),null;case 13:if(me(we),r=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ye&&gn!==null&&n.mode&1&&!(n.flags&128))kd(),Hr(),n.flags|=98560,o=!1;else if(o=vo(n),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(E(318));if(o=n.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(E(317));o[Vn]=n}else Hr(),!(n.flags&128)&&(n.memoizedState=null),n.flags|=4;xe(n),o=!1}else Nn!==null&&(iu(Nn),Nn=null),o=!0;if(!o)return n.flags&65536?n:null}return n.flags&128?(n.lanes=t,n):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(n.child.flags|=8192,n.mode&1&&(e===null||we.current&1?Ne===0&&(Ne=3):ia())),n.updateQueue!==null&&(n.flags|=4),xe(n),null);case 4:return Yr(),Js(e,n),e===null&&$l(n.stateNode.containerInfo),xe(n),null;case 10:return Yu(n.type._context),xe(n),null;case 17:return fn(n.type)&&Xo(),xe(n),null;case 19:if(me(we),o=n.memoizedState,o===null)return xe(n),null;if(r=(n.flags&128)!==0,i=o.rendering,i===null)if(r)hl(o,!1);else{if(Ne!==0||e!==null&&e.flags&128)for(e=n.child;e!==null;){if(i=ni(e),i!==null){for(n.flags|=128,hl(o,!1),r=i.updateQueue,r!==null&&(n.updateQueue=r,n.flags|=4),n.subtreeFlags=0,r=t,t=n.child;t!==null;)o=t,e=r,o.flags&=14680066,i=o.alternate,i===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,o.type=i.type,e=i.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t=t.sibling;return de(we,we.current&1|2),n.child}e=e.sibling}o.tail!==null&&Ie()>Vr&&(n.flags|=128,r=!0,hl(o,!1),n.lanes=4194304)}else{if(!r)if(e=ni(i),e!==null){if(n.flags|=128,r=!0,t=e.updateQueue,t!==null&&(n.updateQueue=t,n.flags|=4),hl(o,!0),o.tail===null&&o.tailMode==="hidden"&&!i.alternate&&!ye)return xe(n),null}else 2*Ie()-o.renderingStartTime>Vr&&t!==1073741824&&(n.flags|=128,r=!0,hl(o,!1),n.lanes=4194304);o.isBackwards?(i.sibling=n.child,n.child=i):(t=o.last,t!==null?t.sibling=i:n.child=i,o.last=i)}return o.tail!==null?(n=o.tail,o.rendering=n,o.tail=n.sibling,o.renderingStartTime=Ie(),n.sibling=null,t=we.current,de(we,r?t&1|2:t&1),n):(xe(n),null);case 22:case 23:return oa(),r=n.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(n.flags|=8192),r&&n.mode&1?mn&1073741824&&(xe(n),n.subtreeFlags&6&&(n.flags|=8192)):xe(n),null;case 24:return null;case 25:return null}throw Error(E(156,n.tag))}function Sg(e,n){switch($u(n),n.tag){case 1:return fn(n.type)&&Xo(),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Yr(),me(cn),me(Ke),Xu(),e=n.flags,e&65536&&!(e&128)?(n.flags=e&-65537|128,n):null;case 5:return xu(n),null;case 13:if(me(we),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(E(340));Hr()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return me(we),null;case 4:return Yr(),null;case 10:return Yu(n.type._context),null;case 22:case 23:return oa(),null;case 24:return null;default:return null}}var Co=!1,Xe=!1,vg=typeof WeakSet=="function"?WeakSet:Set,H=null;function Er(e,n){var t=e.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){Me(e,n,r)}else t.current=null}function qs(e,n,t){try{t()}catch(r){Me(e,n,r)}}var Pc=!1;function wg(e,n){if(zs=Go,e=ud(),Nu(e)){if("selectionStart"in e)var t={start:e.selectionStart,end:e.selectionEnd};else e:{t=(t=e.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var l=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{t.nodeType,o.nodeType}catch{t=null;break e}var i=0,s=-1,u=-1,a=0,c=0,d=e,f=null;n:for(;;){for(var p;d!==t||l!==0&&d.nodeType!==3||(s=i+l),d!==o||r!==0&&d.nodeType!==3||(u=i+r),d.nodeType===3&&(i+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===e)break n;if(f===t&&++a===l&&(s=i),f===o&&++c===r&&(u=i),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}t=s===-1||u===-1?null:{start:s,end:u}}else t=null}t=t||{start:0,end:0}}else t=null;for(Ns={focusedElem:e,selectionRange:t},Go=!1,H=n;H!==null;)if(n=H,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,H=e;else for(;H!==null;){n=H;try{var S=n.alternate;if(n.flags&1024)switch(n.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var y=S.memoizedProps,k=S.memoizedState,m=n.stateNode,h=m.getSnapshotBeforeUpdate(n.elementType===n.type?y:On(n.type,y),k);m.__reactInternalSnapshotBeforeUpdate=h}break;case 3:var g=n.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(E(163))}}catch(v){Me(n,n.return,v)}if(e=n.sibling,e!==null){e.return=n.return,H=e;break}H=n.return}return S=Pc,Pc=!1,S}function _l(e,n,t){var r=n.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var l=r=r.next;do{if((l.tag&e)===e){var o=l.destroy;l.destroy=void 0,o!==void 0&&qs(n,t,o)}l=l.next}while(l!==r)}}function Fi(e,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var t=n=n.next;do{if((t.tag&e)===e){var r=t.create;t.destroy=r()}t=t.next}while(t!==n)}}function eu(e){var n=e.ref;if(n!==null){var t=e.stateNode;switch(e.tag){case 5:e=t;break;default:e=t}typeof n=="function"?n(e):n.current=e}}function lp(e){var n=e.alternate;n!==null&&(e.alternate=null,lp(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&(delete n[Vn],delete n[Hl],delete n[Ws],delete n[tg],delete n[rg])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function op(e){return e.tag===5||e.tag===3||e.tag===4}function Ic(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||op(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function nu(e,n,t){var r=e.tag;if(r===5||r===6)e=e.stateNode,n?t.nodeType===8?t.parentNode.insertBefore(e,n):t.insertBefore(e,n):(t.nodeType===8?(n=t.parentNode,n.insertBefore(e,t)):(n=t,n.appendChild(e)),t=t._reactRootContainer,t!=null||n.onclick!==null||(n.onclick=xo));else if(r!==4&&(e=e.child,e!==null))for(nu(e,n,t),e=e.sibling;e!==null;)nu(e,n,t),e=e.sibling}function tu(e,n,t){var r=e.tag;if(r===5||r===6)e=e.stateNode,n?t.insertBefore(e,n):t.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(tu(e,n,t),e=e.sibling;e!==null;)tu(e,n,t),e=e.sibling}var We=null,zn=!1;function kt(e,n,t){for(t=t.child;t!==null;)ip(e,n,t),t=t.sibling}function ip(e,n,t){if(jn&&typeof jn.onCommitFiberUnmount=="function")try{jn.onCommitFiberUnmount(gi,t)}catch{}switch(t.tag){case 5:Xe||Er(t,n);case 6:var r=We,l=zn;We=null,kt(e,n,t),We=r,zn=l,We!==null&&(zn?(e=We,t=t.stateNode,e.nodeType===8?e.parentNode.removeChild(t):e.removeChild(t)):We.removeChild(t.stateNode));break;case 18:We!==null&&(zn?(e=We,t=t.stateNode,e.nodeType===8?Ji(e.parentNode,t):e.nodeType===1&&Ji(e,t),zl(e)):Ji(We,t.stateNode));break;case 4:r=We,l=zn,We=t.stateNode.containerInfo,zn=!0,kt(e,n,t),We=r,zn=l;break;case 0:case 11:case 14:case 15:if(!Xe&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){l=r=r.next;do{var o=l,i=o.destroy;o=o.tag,i!==void 0&&(o&2||o&4)&&qs(t,n,i),l=l.next}while(l!==r)}kt(e,n,t);break;case 1:if(!Xe&&(Er(t,n),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(s){Me(t,n,s)}kt(e,n,t);break;case 21:kt(e,n,t);break;case 22:t.mode&1?(Xe=(r=Xe)||t.memoizedState!==null,kt(e,n,t),Xe=r):kt(e,n,t);break;default:kt(e,n,t)}}function Bc(e){var n=e.updateQueue;if(n!==null){e.updateQueue=null;var t=e.stateNode;t===null&&(t=e.stateNode=new vg),n.forEach(function(r){var l=Mg.bind(null,e,r);t.has(r)||(t.add(r),r.then(l,l))})}}function Dn(e,n){var t=n.deletions;if(t!==null)for(var r=0;r<t.length;r++){var l=t[r];try{var o=e,i=n,s=i;e:for(;s!==null;){switch(s.tag){case 5:We=s.stateNode,zn=!1;break e;case 3:We=s.stateNode.containerInfo,zn=!0;break e;case 4:We=s.stateNode.containerInfo,zn=!0;break e}s=s.return}if(We===null)throw Error(E(160));ip(o,i,l),We=null,zn=!1;var u=l.alternate;u!==null&&(u.return=null),l.return=null}catch(a){Me(l,n,a)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)sp(n,e),n=n.sibling}function sp(e,n){var t=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Dn(n,e),Yn(e),r&4){try{_l(3,e,e.return),Fi(3,e)}catch(y){Me(e,e.return,y)}try{_l(5,e,e.return)}catch(y){Me(e,e.return,y)}}break;case 1:Dn(n,e),Yn(e),r&512&&t!==null&&Er(t,t.return);break;case 5:if(Dn(n,e),Yn(e),r&512&&t!==null&&Er(t,t.return),e.flags&32){var l=e.stateNode;try{Bl(l,"")}catch(y){Me(e,e.return,y)}}if(r&4&&(l=e.stateNode,l!=null)){var o=e.memoizedProps,i=t!==null?t.memoizedProps:o,s=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{s==="input"&&o.type==="radio"&&o.name!=null&&Mf(l,o),_s(s,i);var a=_s(s,o);for(i=0;i<u.length;i+=2){var c=u[i],d=u[i+1];c==="style"?Df(l,d):c==="dangerouslySetInnerHTML"?Bf(l,d):c==="children"?Bl(l,d):Fu(l,c,d,a)}switch(s){case"input":ks(l,o);break;case"textarea":Pf(l,o);break;case"select":var f=l._wrapperState.wasMultiple;l._wrapperState.wasMultiple=!!o.multiple;var p=o.value;p!=null?Lr(l,!!o.multiple,p,!1):f!==!!o.multiple&&(o.defaultValue!=null?Lr(l,!!o.multiple,o.defaultValue,!0):Lr(l,!!o.multiple,o.multiple?[]:"",!1))}l[Hl]=o}catch(y){Me(e,e.return,y)}}break;case 6:if(Dn(n,e),Yn(e),r&4){if(e.stateNode===null)throw Error(E(162));l=e.stateNode,o=e.memoizedProps;try{l.nodeValue=o}catch(y){Me(e,e.return,y)}}break;case 3:if(Dn(n,e),Yn(e),r&4&&t!==null&&t.memoizedState.isDehydrated)try{zl(n.containerInfo)}catch(y){Me(e,e.return,y)}break;case 4:Dn(n,e),Yn(e);break;case 13:Dn(n,e),Yn(e),l=e.child,l.flags&8192&&(o=l.memoizedState!==null,l.stateNode.isHidden=o,!o||l.alternate!==null&&l.alternate.memoizedState!==null||(ra=Ie())),r&4&&Bc(e);break;case 22:if(c=t!==null&&t.memoizedState!==null,e.mode&1?(Xe=(a=Xe)||c,Dn(n,e),Xe=a):Dn(n,e),Yn(e),r&8192){if(a=e.memoizedState!==null,(e.stateNode.isHidden=a)&&!c&&e.mode&1)for(H=e,c=e.child;c!==null;){for(d=H=c;H!==null;){switch(f=H,p=f.child,f.tag){case 0:case 11:case 14:case 15:_l(4,f,f.return);break;case 1:Er(f,f.return);var S=f.stateNode;if(typeof S.componentWillUnmount=="function"){r=f,t=f.return;try{n=r,S.props=n.memoizedProps,S.state=n.memoizedState,S.componentWillUnmount()}catch(y){Me(r,t,y)}}break;case 5:Er(f,f.return);break;case 22:if(f.memoizedState!==null){Dc(d);continue}}p!==null?(p.return=f,H=p):Dc(d)}c=c.sibling}e:for(c=null,d=e;;){if(d.tag===5){if(c===null){c=d;try{l=d.stateNode,a?(o=l.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(s=d.stateNode,u=d.memoizedProps.style,i=u!=null&&u.hasOwnProperty("display")?u.display:null,s.style.display=Lf("display",i))}catch(y){Me(e,e.return,y)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=a?"":d.memoizedProps}catch(y){Me(e,e.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Dn(n,e),Yn(e),r&4&&Bc(e);break;case 21:break;default:Dn(n,e),Yn(e)}}function Yn(e){var n=e.flags;if(n&2){try{e:{for(var t=e.return;t!==null;){if(op(t)){var r=t;break e}t=t.return}throw Error(E(160))}switch(r.tag){case 5:var l=r.stateNode;r.flags&32&&(Bl(l,""),r.flags&=-33);var o=Ic(e);tu(e,o,l);break;case 3:case 4:var i=r.stateNode.containerInfo,s=Ic(e);nu(e,s,i);break;default:throw Error(E(161))}}catch(u){Me(e,e.return,u)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function kg(e,n,t){H=e,up(e)}function up(e,n,t){for(var r=(e.mode&1)!==0;H!==null;){var l=H,o=l.child;if(l.tag===22&&r){var i=l.memoizedState!==null||Co;if(!i){var s=l.alternate,u=s!==null&&s.memoizedState!==null||Xe;s=Co;var a=Xe;if(Co=i,(Xe=u)&&!a)for(H=l;H!==null;)i=H,u=i.child,i.tag===22&&i.memoizedState!==null?Oc(l):u!==null?(u.return=i,H=u):Oc(l);for(;o!==null;)H=o,up(o),o=o.sibling;H=l,Co=s,Xe=a}Lc(e)}else l.subtreeFlags&8772&&o!==null?(o.return=l,H=o):Lc(e)}}function Lc(e){for(;H!==null;){var n=H;if(n.flags&8772){var t=n.alternate;try{if(n.flags&8772)switch(n.tag){case 0:case 11:case 15:Xe||Fi(5,n);break;case 1:var r=n.stateNode;if(n.flags&4&&!Xe)if(t===null)r.componentDidMount();else{var l=n.elementType===n.type?t.memoizedProps:On(n.type,t.memoizedProps);r.componentDidUpdate(l,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=n.updateQueue;o!==null&&yc(n,o,r);break;case 3:var i=n.updateQueue;if(i!==null){if(t=null,n.child!==null)switch(n.child.tag){case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}yc(n,i,t)}break;case 5:var s=n.stateNode;if(t===null&&n.flags&4){t=s;var u=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&t.focus();break;case"img":u.src&&(t.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var a=n.alternate;if(a!==null){var c=a.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&zl(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(E(163))}Xe||n.flags&512&&eu(n)}catch(f){Me(n,n.return,f)}}if(n===e){H=null;break}if(t=n.sibling,t!==null){t.return=n.return,H=t;break}H=n.return}}function Dc(e){for(;H!==null;){var n=H;if(n===e){H=null;break}var t=n.sibling;if(t!==null){t.return=n.return,H=t;break}H=n.return}}function Oc(e){for(;H!==null;){var n=H;try{switch(n.tag){case 0:case 11:case 15:var t=n.return;try{Fi(4,n)}catch(u){Me(n,t,u)}break;case 1:var r=n.stateNode;if(typeof r.componentDidMount=="function"){var l=n.return;try{r.componentDidMount()}catch(u){Me(n,l,u)}}var o=n.return;try{eu(n)}catch(u){Me(n,o,u)}break;case 5:var i=n.return;try{eu(n)}catch(u){Me(n,i,u)}}}catch(u){Me(n,n.return,u)}if(n===e){H=null;break}var s=n.sibling;if(s!==null){s.return=n.return,H=s;break}H=n.return}}var Cg=Math.ceil,li=gt.ReactCurrentDispatcher,na=gt.ReactCurrentOwner,Mn=gt.ReactCurrentBatchConfig,re=0,$e=null,Le=null,Ue=0,mn=0,Mr=Ut(0),Ne=0,xl=null,ir=0,Ri=0,ta=0,Tl=null,sn=null,ra=0,Vr=1/0,rt=null,oi=!1,ru=null,Ot=null,Ao=!1,Mt=null,ii=0,El=0,lu=null,Oo=-1,zo=0;function en(){return re&6?Ie():Oo!==-1?Oo:Oo=Ie()}function zt(e){return e.mode&1?re&2&&Ue!==0?Ue&-Ue:og.transition!==null?(zo===0&&(zo=jf()),zo):(e=ae,e!==0||(e=window.event,e=e===void 0?16:qf(e.type)),e):1}function $n(e,n,t,r){if(50<El)throw El=0,lu=null,Error(E(185));Jl(e,t,r),(!(re&2)||e!==$e)&&(e===$e&&(!(re&2)&&(Ri|=t),Ne===4&&_t(e,Ue)),dn(e,r),t===1&&re===0&&!(n.mode&1)&&(Vr=Ie()+500,ki&&Yt()))}function dn(e,n){var t=e.callbackNode;om(e,n);var r=Yo(e,e===$e?Ue:0);if(r===0)t!==null&&Ga(t),e.callbackNode=null,e.callbackPriority=0;else if(n=r&-r,e.callbackPriority!==n){if(t!=null&&Ga(t),n===1)e.tag===0?lg(zc.bind(null,e)):Sd(zc.bind(null,e)),eg(function(){!(re&6)&&Yt()}),t=null;else{switch(xf(r)){case 1:t=Mu;break;case 4:t=Gf;break;case 16:t=Uo;break;case 536870912:t=Vf;break;default:t=Uo}t=gp(t,ap.bind(null,e))}e.callbackPriority=n,e.callbackNode=t}}function ap(e,n){if(Oo=-1,zo=0,re&6)throw Error(E(327));var t=e.callbackNode;if(br()&&e.callbackNode!==t)return null;var r=Yo(e,e===$e?Ue:0);if(r===0)return null;if(r&30||r&e.expiredLanes||n)n=si(e,r);else{n=r;var l=re;re|=2;var o=fp();($e!==e||Ue!==n)&&(rt=null,Vr=Ie()+500,nr(e,n));do try{Rg();break}catch(s){cp(e,s)}while(!0);Uu(),li.current=o,re=l,Le!==null?n=0:($e=null,Ue=0,n=Ne)}if(n!==0){if(n===2&&(l=Is(e),l!==0&&(r=l,n=ou(e,l))),n===1)throw t=xl,nr(e,0),_t(e,r),dn(e,Ie()),t;if(n===6)_t(e,r);else{if(l=e.current.alternate,!(r&30)&&!Ag(l)&&(n=si(e,r),n===2&&(o=Is(e),o!==0&&(r=o,n=ou(e,o))),n===1))throw t=xl,nr(e,0),_t(e,r),dn(e,Ie()),t;switch(e.finishedWork=l,e.finishedLanes=r,n){case 0:case 1:throw Error(E(345));case 2:Xt(e,sn,rt);break;case 3:if(_t(e,r),(r&130023424)===r&&(n=ra+500-Ie(),10<n)){if(Yo(e,0)!==0)break;if(l=e.suspendedLanes,(l&r)!==r){en(),e.pingedLanes|=e.suspendedLanes&l;break}e.timeoutHandle=$s(Xt.bind(null,e,sn,rt),n);break}Xt(e,sn,rt);break;case 4:if(_t(e,r),(r&4194240)===r)break;for(n=e.eventTimes,l=-1;0<r;){var i=31-bn(r);o=1<<i,i=n[i],i>l&&(l=i),r&=~o}if(r=l,r=Ie()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Cg(r/1960))-r,10<r){e.timeoutHandle=$s(Xt.bind(null,e,sn,rt),r);break}Xt(e,sn,rt);break;case 5:Xt(e,sn,rt);break;default:throw Error(E(329))}}}return dn(e,Ie()),e.callbackNode===t?ap.bind(null,e):null}function ou(e,n){var t=Tl;return e.current.memoizedState.isDehydrated&&(nr(e,n).flags|=256),e=si(e,n),e!==2&&(n=sn,sn=t,n!==null&&iu(n)),e}function iu(e){sn===null?sn=e:sn.push.apply(sn,e)}function Ag(e){for(var n=e;;){if(n.flags&16384){var t=n.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var l=t[r],o=l.getSnapshot;l=l.value;try{if(!Hn(o(),l))return!1}catch{return!1}}}if(t=n.child,n.subtreeFlags&16384&&t!==null)t.return=n,n=t;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function _t(e,n){for(n&=~ta,n&=~Ri,e.suspendedLanes|=n,e.pingedLanes&=~n,e=e.expirationTimes;0<n;){var t=31-bn(n),r=1<<t;e[t]=-1,n&=~r}}function zc(e){if(re&6)throw Error(E(327));br();var n=Yo(e,0);if(!(n&1))return dn(e,Ie()),null;var t=si(e,n);if(e.tag!==0&&t===2){var r=Is(e);r!==0&&(n=r,t=ou(e,r))}if(t===1)throw t=xl,nr(e,0),_t(e,n),dn(e,Ie()),t;if(t===6)throw Error(E(345));return e.finishedWork=e.current.alternate,e.finishedLanes=n,Xt(e,sn,rt),dn(e,Ie()),null}function la(e,n){var t=re;re|=1;try{return e(n)}finally{re=t,re===0&&(Vr=Ie()+500,ki&&Yt())}}function sr(e){Mt!==null&&Mt.tag===0&&!(re&6)&&br();var n=re;re|=1;var t=Mn.transition,r=ae;try{if(Mn.transition=null,ae=1,e)return e()}finally{ae=r,Mn.transition=t,re=n,!(re&6)&&Yt()}}function oa(){mn=Mr.current,me(Mr)}function nr(e,n){e.finishedWork=null,e.finishedLanes=0;var t=e.timeoutHandle;if(t!==-1&&(e.timeoutHandle=-1,qm(t)),Le!==null)for(t=Le.return;t!==null;){var r=t;switch($u(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Xo();break;case 3:Yr(),me(cn),me(Ke),Xu();break;case 5:xu(r);break;case 4:Yr();break;case 13:me(we);break;case 19:me(we);break;case 10:Yu(r.type._context);break;case 22:case 23:oa()}t=t.return}if($e=e,Le=e=Nt(e.current,null),Ue=mn=n,Ne=0,xl=null,ta=Ri=ir=0,sn=Tl=null,Zt!==null){for(n=0;n<Zt.length;n++)if(t=Zt[n],r=t.interleaved,r!==null){t.interleaved=null;var l=r.next,o=t.pending;if(o!==null){var i=o.next;o.next=l,r.next=i}t.pending=r}Zt=null}return e}function cp(e,n){do{var t=Le;try{if(Uu(),Bo.current=ri,ti){for(var r=Ce.memoizedState;r!==null;){var l=r.queue;l!==null&&(l.pending=null),r=r.next}ti=!1}if(or=0,be=ze=Ce=null,Rl=!1,Gl=0,na.current=null,t===null||t.return===null){Ne=1,xl=n,Le=null;break}e:{var o=e,i=t.return,s=t,u=n;if(n=Ue,s.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var a=u,c=s,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var p=Ac(i);if(p!==null){p.flags&=-257,Fc(p,i,s,o,n),p.mode&1&&Cc(o,a,n),n=p,u=a;var S=n.updateQueue;if(S===null){var y=new Set;y.add(u),n.updateQueue=y}else S.add(u);break e}else{if(!(n&1)){Cc(o,a,n),ia();break e}u=Error(E(426))}}else if(ye&&s.mode&1){var k=Ac(i);if(k!==null){!(k.flags&65536)&&(k.flags|=256),Fc(k,i,s,o,n),Wu(Gr(u,s));break e}}o=u=Gr(u,s),Ne!==4&&(Ne=2),Tl===null?Tl=[o]:Tl.push(o),o=i;do{switch(o.tag){case 3:o.flags|=65536,n&=-n,o.lanes|=n;var m=xd(o,u,n);gc(o,m);break e;case 1:s=u;var h=o.type,g=o.stateNode;if(!(o.flags&128)&&(typeof h.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Ot===null||!Ot.has(g)))){o.flags|=65536,n&=-n,o.lanes|=n;var v=Xd(o,s,n);gc(o,v);break e}}o=o.return}while(o!==null)}pp(t)}catch(C){n=C,Le===t&&t!==null&&(Le=t=t.return);continue}break}while(!0)}function fp(){var e=li.current;return li.current=ri,e===null?ri:e}function ia(){(Ne===0||Ne===3||Ne===2)&&(Ne=4),$e===null||!(ir&268435455)&&!(Ri&268435455)||_t($e,Ue)}function si(e,n){var t=re;re|=2;var r=fp();($e!==e||Ue!==n)&&(rt=null,nr(e,n));do try{Fg();break}catch(l){cp(e,l)}while(!0);if(Uu(),re=t,li.current=r,Le!==null)throw Error(E(261));return $e=null,Ue=0,Ne}function Fg(){for(;Le!==null;)dp(Le)}function Rg(){for(;Le!==null&&!Qh();)dp(Le)}function dp(e){var n=mp(e.alternate,e,mn);e.memoizedProps=e.pendingProps,n===null?pp(e):Le=n,na.current=null}function pp(e){var n=e;do{var t=n.alternate;if(e=n.return,n.flags&32768){if(t=Sg(t,n),t!==null){t.flags&=32767,Le=t;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ne=6,Le=null;return}}else if(t=yg(t,n,mn),t!==null){Le=t;return}if(n=n.sibling,n!==null){Le=n;return}Le=n=e}while(n!==null);Ne===0&&(Ne=5)}function Xt(e,n,t){var r=ae,l=Mn.transition;try{Mn.transition=null,ae=1,_g(e,n,t,r)}finally{Mn.transition=l,ae=r}return null}function _g(e,n,t,r){do br();while(Mt!==null);if(re&6)throw Error(E(327));t=e.finishedWork;var l=e.finishedLanes;if(t===null)return null;if(e.finishedWork=null,e.finishedLanes=0,t===e.current)throw Error(E(177));e.callbackNode=null,e.callbackPriority=0;var o=t.lanes|t.childLanes;if(im(e,o),e===$e&&(Le=$e=null,Ue=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Ao||(Ao=!0,gp(Uo,function(){return br(),null})),o=(t.flags&15990)!==0,t.subtreeFlags&15990||o){o=Mn.transition,Mn.transition=null;var i=ae;ae=1;var s=re;re|=4,na.current=null,wg(e,t),sp(t,e),jm(Ns),Go=!!zs,Ns=zs=null,e.current=t,kg(t),Zh(),re=s,ae=i,Mn.transition=o}else e.current=t;if(Ao&&(Ao=!1,Mt=e,ii=l),o=e.pendingLanes,o===0&&(Ot=null),em(t.stateNode),dn(e,Ie()),n!==null)for(r=e.onRecoverableError,t=0;t<n.length;t++)l=n[t],r(l.value,{componentStack:l.stack,digest:l.digest});if(oi)throw oi=!1,e=ru,ru=null,e;return ii&1&&e.tag!==0&&br(),o=e.pendingLanes,o&1?e===lu?El++:(El=0,lu=e):El=0,Yt(),null}function br(){if(Mt!==null){var e=xf(ii),n=Mn.transition,t=ae;try{if(Mn.transition=null,ae=16>e?16:e,Mt===null)var r=!1;else{if(e=Mt,Mt=null,ii=0,re&6)throw Error(E(331));var l=re;for(re|=4,H=e.current;H!==null;){var o=H,i=o.child;if(H.flags&16){var s=o.deletions;if(s!==null){for(var u=0;u<s.length;u++){var a=s[u];for(H=a;H!==null;){var c=H;switch(c.tag){case 0:case 11:case 15:_l(8,c,o)}var d=c.child;if(d!==null)d.return=c,H=d;else for(;H!==null;){c=H;var f=c.sibling,p=c.return;if(lp(c),c===a){H=null;break}if(f!==null){f.return=p,H=f;break}H=p}}}var S=o.alternate;if(S!==null){var y=S.child;if(y!==null){S.child=null;do{var k=y.sibling;y.sibling=null,y=k}while(y!==null)}}H=o}}if(o.subtreeFlags&2064&&i!==null)i.return=o,H=i;else e:for(;H!==null;){if(o=H,o.flags&2048)switch(o.tag){case 0:case 11:case 15:_l(9,o,o.return)}var m=o.sibling;if(m!==null){m.return=o.return,H=m;break e}H=o.return}}var h=e.current;for(H=h;H!==null;){i=H;var g=i.child;if(i.subtreeFlags&2064&&g!==null)g.return=i,H=g;else e:for(i=h;H!==null;){if(s=H,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:Fi(9,s)}}catch(C){Me(s,s.return,C)}if(s===i){H=null;break e}var v=s.sibling;if(v!==null){v.return=s.return,H=v;break e}H=s.return}}if(re=l,Yt(),jn&&typeof jn.onPostCommitFiberRoot=="function")try{jn.onPostCommitFiberRoot(gi,e)}catch{}r=!0}return r}finally{ae=t,Mn.transition=n}}return!1}function Nc(e,n,t){n=Gr(t,n),n=xd(e,n,1),e=Dt(e,n,1),n=en(),e!==null&&(Jl(e,1,n),dn(e,n))}function Me(e,n,t){if(e.tag===3)Nc(e,e,t);else for(;n!==null;){if(n.tag===3){Nc(n,e,t);break}else if(n.tag===1){var r=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ot===null||!Ot.has(r))){e=Gr(t,e),e=Xd(n,e,1),n=Dt(n,e,1),e=en(),n!==null&&(Jl(n,1,e),dn(n,e));break}}n=n.return}}function Tg(e,n,t){var r=e.pingCache;r!==null&&r.delete(n),n=en(),e.pingedLanes|=e.suspendedLanes&t,$e===e&&(Ue&t)===t&&(Ne===4||Ne===3&&(Ue&130023424)===Ue&&500>Ie()-ra?nr(e,0):ta|=t),dn(e,n)}function hp(e,n){n===0&&(e.mode&1?(n=po,po<<=1,!(po&130023424)&&(po=4194304)):n=1);var t=en();e=dt(e,n),e!==null&&(Jl(e,n,t),dn(e,t))}function Eg(e){var n=e.memoizedState,t=0;n!==null&&(t=n.retryLane),hp(e,t)}function Mg(e,n){var t=0;switch(e.tag){case 13:var r=e.stateNode,l=e.memoizedState;l!==null&&(t=l.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(E(314))}r!==null&&r.delete(n),hp(e,t)}var mp;mp=function(e,n,t){if(e!==null)if(e.memoizedProps!==n.pendingProps||cn.current)an=!0;else{if(!(e.lanes&t)&&!(n.flags&128))return an=!1,gg(e,n,t);an=!!(e.flags&131072)}else an=!1,ye&&n.flags&1048576&&vd(n,Zo,n.index);switch(n.lanes=0,n.tag){case 2:var r=n.type;Do(e,n),e=n.pendingProps;var l=Wr(n,Ke.current);Nr(n,t),l=Qu(null,n,r,e,l,t);var o=Zu();return n.flags|=1,typeof l=="object"&&l!==null&&typeof l.render=="function"&&l.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,fn(r)?(o=!0,Ko(n)):o=!1,n.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,Vu(n),l.updater=Ai,n.stateNode=l,l._reactInternals=n,js(n,r,e,t),n=Ks(null,n,r,!0,o,t)):(n.tag=0,ye&&o&&bu(n),qe(null,n,l,t),n=n.child),n;case 16:r=n.elementType;e:{switch(Do(e,n),e=n.pendingProps,l=r._init,r=l(r._payload),n.type=r,l=n.tag=Ig(r),e=On(r,e),l){case 0:n=Xs(null,n,r,e,t);break e;case 1:n=Tc(null,n,r,e,t);break e;case 11:n=Rc(null,n,r,e,t);break e;case 14:n=_c(null,n,r,On(r.type,e),t);break e}throw Error(E(306,r,""))}return n;case 0:return r=n.type,l=n.pendingProps,l=n.elementType===r?l:On(r,l),Xs(e,n,r,l,t);case 1:return r=n.type,l=n.pendingProps,l=n.elementType===r?l:On(r,l),Tc(e,n,r,l,t);case 3:e:{if(Jd(n),e===null)throw Error(E(387));r=n.pendingProps,o=n.memoizedState,l=o.element,Rd(e,n),ei(n,r,null,t);var i=n.memoizedState;if(r=i.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},n.updateQueue.baseState=o,n.memoizedState=o,n.flags&256){l=Gr(Error(E(423)),n),n=Ec(e,n,r,t,l);break e}else if(r!==l){l=Gr(Error(E(424)),n),n=Ec(e,n,r,t,l);break e}else for(gn=Lt(n.stateNode.containerInfo.firstChild),yn=n,ye=!0,Nn=null,t=Ad(n,null,r,t),n.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Hr(),r===l){n=pt(e,n,t);break e}qe(e,n,r,t)}n=n.child}return n;case 5:return _d(n),e===null&&Ys(n),r=n.type,l=n.pendingProps,o=e!==null?e.memoizedProps:null,i=l.children,bs(r,l)?i=null:o!==null&&bs(r,o)&&(n.flags|=32),Zd(e,n),qe(e,n,i,t),n.child;case 6:return e===null&&Ys(n),null;case 13:return qd(e,n,t);case 4:return ju(n,n.stateNode.containerInfo),r=n.pendingProps,e===null?n.child=Ur(n,null,r,t):qe(e,n,r,t),n.child;case 11:return r=n.type,l=n.pendingProps,l=n.elementType===r?l:On(r,l),Rc(e,n,r,l,t);case 7:return qe(e,n,n.pendingProps,t),n.child;case 8:return qe(e,n,n.pendingProps.children,t),n.child;case 12:return qe(e,n,n.pendingProps.children,t),n.child;case 10:e:{if(r=n.type._context,l=n.pendingProps,o=n.memoizedProps,i=l.value,de(Jo,r._currentValue),r._currentValue=i,o!==null)if(Hn(o.value,i)){if(o.children===l.children&&!cn.current){n=pt(e,n,t);break e}}else for(o=n.child,o!==null&&(o.return=n);o!==null;){var s=o.dependencies;if(s!==null){i=o.child;for(var u=s.firstContext;u!==null;){if(u.context===r){if(o.tag===1){u=ut(-1,t&-t),u.tag=2;var a=o.updateQueue;if(a!==null){a=a.shared;var c=a.pending;c===null?u.next=u:(u.next=c.next,c.next=u),a.pending=u}}o.lanes|=t,u=o.alternate,u!==null&&(u.lanes|=t),Gs(o.return,t,n),s.lanes|=t;break}u=u.next}}else if(o.tag===10)i=o.type===n.type?null:o.child;else if(o.tag===18){if(i=o.return,i===null)throw Error(E(341));i.lanes|=t,s=i.alternate,s!==null&&(s.lanes|=t),Gs(i,t,n),i=o.sibling}else i=o.child;if(i!==null)i.return=o;else for(i=o;i!==null;){if(i===n){i=null;break}if(o=i.sibling,o!==null){o.return=i.return,i=o;break}i=i.return}o=i}qe(e,n,l.children,t),n=n.child}return n;case 9:return l=n.type,r=n.pendingProps.children,Nr(n,t),l=Pn(l),r=r(l),n.flags|=1,qe(e,n,r,t),n.child;case 14:return r=n.type,l=On(r,n.pendingProps),l=On(r.type,l),_c(e,n,r,l,t);case 15:return Kd(e,n,n.type,n.pendingProps,t);case 17:return r=n.type,l=n.pendingProps,l=n.elementType===r?l:On(r,l),Do(e,n),n.tag=1,fn(r)?(e=!0,Ko(n)):e=!1,Nr(n,t),jd(n,r,l),js(n,r,l,t),Ks(null,n,r,!0,e,t);case 19:return ep(e,n,t);case 22:return Qd(e,n,t)}throw Error(E(156,n.tag))};function gp(e,n){return Yf(e,n)}function Pg(e,n,t,r){this.tag=e,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tn(e,n,t,r){return new Pg(e,n,t,r)}function sa(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ig(e){if(typeof e=="function")return sa(e)?1:0;if(e!=null){if(e=e.$$typeof,e===_u)return 11;if(e===Tu)return 14}return 2}function Nt(e,n){var t=e.alternate;return t===null?(t=Tn(e.tag,n,e.key,e.mode),t.elementType=e.elementType,t.type=e.type,t.stateNode=e.stateNode,t.alternate=e,e.alternate=t):(t.pendingProps=n,t.type=e.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=e.flags&14680064,t.childLanes=e.childLanes,t.lanes=e.lanes,t.child=e.child,t.memoizedProps=e.memoizedProps,t.memoizedState=e.memoizedState,t.updateQueue=e.updateQueue,n=e.dependencies,t.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},t.sibling=e.sibling,t.index=e.index,t.ref=e.ref,t}function No(e,n,t,r,l,o){var i=2;if(r=e,typeof e=="function")sa(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case vr:return tr(t.children,l,o,n);case Ru:i=8,l|=8;break;case gs:return e=Tn(12,t,n,l|2),e.elementType=gs,e.lanes=o,e;case ys:return e=Tn(13,t,n,l),e.elementType=ys,e.lanes=o,e;case Ss:return e=Tn(19,t,n,l),e.elementType=Ss,e.lanes=o,e;case _f:return _i(t,l,o,n);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Ff:i=10;break e;case Rf:i=9;break e;case _u:i=11;break e;case Tu:i=14;break e;case Ct:i=16,r=null;break e}throw Error(E(130,e==null?e:typeof e,""))}return n=Tn(i,t,n,l),n.elementType=e,n.type=r,n.lanes=o,n}function tr(e,n,t,r){return e=Tn(7,e,r,n),e.lanes=t,e}function _i(e,n,t,r){return e=Tn(22,e,r,n),e.elementType=_f,e.lanes=t,e.stateNode={isHidden:!1},e}function is(e,n,t){return e=Tn(6,e,null,n),e.lanes=t,e}function ss(e,n,t){return n=Tn(4,e.children!==null?e.children:[],e.key,n),n.lanes=t,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}function Bg(e,n,t,r,l){this.tag=n,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Hi(0),this.expirationTimes=Hi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hi(0),this.identifierPrefix=r,this.onRecoverableError=l,this.mutableSourceEagerHydrationData=null}function ua(e,n,t,r,l,o,i,s,u){return e=new Bg(e,n,t,s,u),n===1?(n=1,o===!0&&(n|=8)):n=0,o=Tn(3,null,null,n),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},Vu(o),e}function Lg(e,n,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Sr,key:r==null?null:""+r,children:e,containerInfo:n,implementation:t}}function yp(e){if(!e)return $t;e=e._reactInternals;e:{if(cr(e)!==e||e.tag!==1)throw Error(E(170));var n=e;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(fn(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(E(171))}if(e.tag===1){var t=e.type;if(fn(t))return yd(e,t,n)}return n}function Sp(e,n,t,r,l,o,i,s,u){return e=ua(t,r,!0,e,l,o,i,s,u),e.context=yp(null),t=e.current,r=en(),l=zt(t),o=ut(r,l),o.callback=n??null,Dt(t,o,l),e.current.lanes=l,Jl(e,l,r),dn(e,r),e}function Ti(e,n,t,r){var l=n.current,o=en(),i=zt(l);return t=yp(t),n.context===null?n.context=t:n.pendingContext=t,n=ut(o,i),n.payload={element:e},r=r===void 0?null:r,r!==null&&(n.callback=r),e=Dt(l,n,i),e!==null&&($n(e,l,i,o),Io(e,l,i)),i}function ui(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function bc(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var t=e.retryLane;e.retryLane=t!==0&&t<n?t:n}}function aa(e,n){bc(e,n),(e=e.alternate)&&bc(e,n)}function Dg(){return null}var vp=typeof reportError=="function"?reportError:function(e){console.error(e)};function ca(e){this._internalRoot=e}Ei.prototype.render=ca.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(E(409));Ti(e,n,null,null)};Ei.prototype.unmount=ca.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;sr(function(){Ti(null,e,null,null)}),n[ft]=null}};function Ei(e){this._internalRoot=e}Ei.prototype.unstable_scheduleHydration=function(e){if(e){var n=Qf();e={blockedOn:null,target:e,priority:n};for(var t=0;t<Rt.length&&n!==0&&n<Rt[t].priority;t++);Rt.splice(t,0,e),t===0&&Jf(e)}};function fa(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Mi(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function $c(){}function Og(e,n,t,r,l){if(l){if(typeof r=="function"){var o=r;r=function(){var a=ui(i);o.call(a)}}var i=Sp(n,r,e,0,null,!1,!1,"",$c);return e._reactRootContainer=i,e[ft]=i.current,$l(e.nodeType===8?e.parentNode:e),sr(),i}for(;l=e.lastChild;)e.removeChild(l);if(typeof r=="function"){var s=r;r=function(){var a=ui(u);s.call(a)}}var u=ua(e,0,!1,null,null,!1,!1,"",$c);return e._reactRootContainer=u,e[ft]=u.current,$l(e.nodeType===8?e.parentNode:e),sr(function(){Ti(n,u,t,r)}),u}function Pi(e,n,t,r,l){var o=t._reactRootContainer;if(o){var i=o;if(typeof l=="function"){var s=l;l=function(){var u=ui(i);s.call(u)}}Ti(n,i,e,l)}else i=Og(t,n,e,l,r);return ui(i)}Xf=function(e){switch(e.tag){case 3:var n=e.stateNode;if(n.current.memoizedState.isDehydrated){var t=Sl(n.pendingLanes);t!==0&&(Pu(n,t|1),dn(n,Ie()),!(re&6)&&(Vr=Ie()+500,Yt()))}break;case 13:sr(function(){var r=dt(e,1);if(r!==null){var l=en();$n(r,e,1,l)}}),aa(e,1)}};Iu=function(e){if(e.tag===13){var n=dt(e,134217728);if(n!==null){var t=en();$n(n,e,134217728,t)}aa(e,134217728)}};Kf=function(e){if(e.tag===13){var n=zt(e),t=dt(e,n);if(t!==null){var r=en();$n(t,e,n,r)}aa(e,n)}};Qf=function(){return ae};Zf=function(e,n){var t=ae;try{return ae=e,n()}finally{ae=t}};Es=function(e,n,t){switch(n){case"input":if(ks(e,t),n=t.name,t.type==="radio"&&n!=null){for(t=e;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<t.length;n++){var r=t[n];if(r!==e&&r.form===e.form){var l=wi(r);if(!l)throw Error(E(90));Ef(r),ks(r,l)}}}break;case"textarea":Pf(e,t);break;case"select":n=t.value,n!=null&&Lr(e,!!t.multiple,n,!1)}};Nf=la;bf=sr;var zg={usingClientEntryPoint:!1,Events:[eo,Ar,wi,Of,zf,la]},ml={findFiberByHostInstance:Qt,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ng={bundleType:ml.bundleType,version:ml.version,rendererPackageName:ml.rendererPackageName,rendererConfig:ml.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:gt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Hf(e),e===null?null:e.stateNode},findFiberByHostInstance:ml.findFiberByHostInstance||Dg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fo.isDisabled&&Fo.supportsFiber)try{gi=Fo.inject(Ng),jn=Fo}catch{}}wn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zg;wn.createPortal=function(e,n){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!fa(n))throw Error(E(200));return Lg(e,n,null,t)};wn.createRoot=function(e,n){if(!fa(e))throw Error(E(299));var t=!1,r="",l=vp;return n!=null&&(n.unstable_strictMode===!0&&(t=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),n=ua(e,1,!1,null,null,t,!1,r,l),e[ft]=n.current,$l(e.nodeType===8?e.parentNode:e),new ca(n)};wn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(E(188)):(e=Object.keys(e).join(","),Error(E(268,e)));return e=Hf(n),e=e===null?null:e.stateNode,e};wn.flushSync=function(e){return sr(e)};wn.hydrate=function(e,n,t){if(!Mi(n))throw Error(E(200));return Pi(null,e,n,!0,t)};wn.hydrateRoot=function(e,n,t){if(!fa(e))throw Error(E(405));var r=t!=null&&t.hydratedSources||null,l=!1,o="",i=vp;if(t!=null&&(t.unstable_strictMode===!0&&(l=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),n=Sp(n,null,e,1,t??null,l,!1,o,i),e[ft]=n.current,$l(e),r)for(e=0;e<r.length;e++)t=r[e],l=t._getVersion,l=l(t._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[t,l]:n.mutableSourceEagerHydrationData.push(t,l);return new Ei(n)};wn.render=function(e,n,t){if(!Mi(n))throw Error(E(200));return Pi(null,e,n,!1,t)};wn.unmountComponentAtNode=function(e){if(!Mi(e))throw Error(E(40));return e._reactRootContainer?(sr(function(){Pi(null,null,e,!1,function(){e._reactRootContainer=null,e[ft]=null})}),!0):!1};wn.unstable_batchedUpdates=la;wn.unstable_renderSubtreeIntoContainer=function(e,n,t,r){if(!Mi(t))throw Error(E(200));if(e==null||e._reactInternals===void 0)throw Error(E(38));return Pi(e,n,t,!1,r)};wn.version="18.3.1-next-f1338f8080-20240426";function wp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(wp)}catch(e){console.error(e)}}wp(),wf.exports=wn;var bg=wf.exports,Wc=bg;hs.createRoot=Wc.createRoot,hs.hydrateRoot=Wc.hydrateRoot;const $g=e=>({row:e.y,col:e.x});function da(e){return e.type==="block"}function jr(e){return e.type==="relic"}function ai(e){return e.type==="amulet"}function us(e,n){return e.ownedRelics.includes(n)?e:{...e,ownedRelics:[...e.ownedRelics,n],relicDisplayOrder:[...e.relicDisplayOrder,n]}}function Wg(e,n){return kp(e,n)}function kp(e,n){return{...e,ownedRelics:e.ownedRelics.filter(t=>t!==n),relicDisplayOrder:e.relicDisplayOrder.filter(t=>t!==n)}}function Pr(e,n){return n<0?(console.warn("addGold: amount must be non-negative. Use subtractGold for deductions."),e):{...e,gold:e.gold+n,earnedGold:e.earnedGold+n}}function as(e,n){if(n<0)return console.warn("subtractGold: amount must be non-negative"),e;const t=e.gold-n;return t<0&&console.warn("subtractGold: insufficient gold, clamping to 0"),{...e,gold:Math.max(0,t)}}class Hg{constructor(n=100,t=!1){sl(this,"handlers",[]);sl(this,"eventLog",[]);sl(this,"maxLogSize");sl(this,"enableLogging");this.maxLogSize=n,this.enableLogging=t}on(n,t,r=0){const l={eventType:n,handler:t,priority:r};return this.handlers.push(l),this.handlers.sort((o,i)=>i.priority-o.priority),()=>{const o=this.handlers.indexOf(l);o>-1&&this.handlers.splice(o,1)}}emit(n){this.enableLogging&&console.log(`[GameEvent] ${n.type}`,n),this.eventLog.push(n),this.eventLog.length>this.maxLogSize&&this.eventLog.shift();for(const t of this.handlers)t.eventType===n.type&&t.handler(n)}getEventLog(){return[...this.eventLog]}clear(){this.handlers=[],this.eventLog=[]}}const Ug=!1,Gt=new Hg(100,Ug);function Yg(e,n,t){Gt.emit({type:"PIECE_PLACED",timestamp:Date.now(),piece:e,position:n,board:t})}function Gg(e,n,t){Gt.emit({type:"LINES_COMPLETED",timestamp:Date.now(),rows:e,cols:n,cells:t})}function Vg(e,n){Gt.emit({type:"LINES_CLEARED",timestamp:Date.now(),clearedCells:e,isBoardEmpty:n})}function jg(e,n,t){Gt.emit({type:"SCORE_CALCULATED",timestamp:Date.now(),baseScore:e,bonuses:n,totalScore:t})}function su(e,n){e<=0||Gt.emit({type:"GOLD_GAINED",timestamp:Date.now(),amount:e,source:n})}function Hc(e,n,t){Gt.emit({type:"ROUND_CLEARED",timestamp:Date.now(),round:e,finalScore:n,goldReward:t})}function xg(e,n){Gt.emit({type:"ROUND_STARTED",timestamp:Date.now(),round:e,targetScore:n})}function Xg(e,n,t){Gt.emit({type:"RELIC_TRIGGERED",timestamp:Date.now(),relicId:e,effect:n,value:t})}const vn={create:()=>new Map,createFromShape:e=>{const n=new Map;return e.forEach((t,r)=>{t.forEach((l,o)=>{l&&n.set(`${r},${o}`,{pattern:null,seal:null})})}),n},createWithPattern:(e,n)=>{const t=new Map;return e.forEach((r,l)=>{r.forEach((o,i)=>{o&&t.set(`${l},${i}`,{pattern:n,seal:null})})}),t},setSeal:(e,n,t,r)=>{const l=`${n},${t}`,o=e.get(l);if(!o)return e;const i=new Map(e);return i.set(l,{...o,seal:r}),i},get:(e,n,t)=>e.get(`${n},${t}`),has:(e,n,t)=>e.has(`${n},${t}`)},te=6,uu=5,Ii="#FF4444",Kg="#FFFFFF",Qg="#FFD700",Ae={boardBackground:"#8B7355",cellBackground:"#D2B48C",cellBorder:"#6B5344",piece:"#A0522D",pieceHighlight:"#CD853F",pieceShadow:"#5D3A1A",previewValid:"rgba(160, 82, 45, 0.5)",previewInvalid:"rgba(255, 0, 0, 0.3)"},Zg={dragOpacity:.8},Ro={boardPadding:4},ke={canvasWidth:1280,canvasHeight:720,rightPanelStartX:380,statusPadding:30,statusGroupGap:25,statusItemGap:8,boardOffsetX:570,boardOffsetY:50,cellSize:70,slotAreaY:480,slotCellSizeRatio:.55,slotGap:15,relicAreaX:470,relicAreaY:20},qr={padding:2,highlightWidth:3,shadowWidth:3},Bi={perCellDuration:400,maxTotalDuration:1500,minStaggerDelay:50,maxStaggerDelay:120,maxRotation:Math.PI,maxRise:30,initialScale:1,finalScale:0,effectLabelRise:40},Jg={targetFontSize:48,targetColor:"#FFFFFF",roundScoreFontSize:28,roundScoreColor:"#FFFFFF",roundScoreClearColor:"#FF4444",roundScoreFailColor:"#4488FF",roundScoreLabelFontSize:16,roundScoreLabelColor:"#AAAAAA",goldFontSize:24,goldColor:"#FFD700",roundFontSize:20,roundColor:"#FFFFFF",handFontSize:24,handColor:"#FFFFFF",handLabelFontSize:16,handLabelColor:"#AAAAAA",fontFamily:"Arial, sans-serif",fontWeight:"bold",shadowColor:"#000000",shadowBlur:4},pa={totalHands:12,drawCount:3,minoIds:["mono-1","dom-h","dom-v","tro-i-h","tro-i-v","tro-l-0"]},Wt={initialGold:5,maxRound:24,initialTargetScore:20,targetScoreIncrement:10},Cp={duration:1500,fontSize:36,subFontSize:24,color:"#FFFFFF",goldColor:"#FFD700",backgroundColor:"rgba(0, 0, 0, 0.7)",titleOffsetY:-30,goldTextOffsetY:20},qg={titleFontSize:36,subtextFontSize:20,color:"#FFFFFF",backgroundColor:"rgba(0, 0, 0, 0.85)",buttonWidth:160,buttonHeight:50,buttonColor:"#4CAF50",buttonTextColor:"#FFFFFF",buttonFontSize:20,titleOffsetY:-80,line1OffsetY:-30,line2OffsetY:5,line3OffsetY:40,buttonOffsetY:80},e0={titleFontSize:40,subtextFontSize:24,color:"#FFD700",backgroundColor:"rgba(0, 0, 0, 0.85)",buttonWidth:160,buttonHeight:50,buttonColor:"#4CAF50",buttonTextColor:"#FFFFFF",buttonFontSize:20,titleOffsetY:-60,line1OffsetY:-10,line2OffsetY:30,buttonOffsetY:80},G={backgroundColor:"rgba(0, 0, 0, 0.85)",titleFontSize:28,titleColor:"#FFFFFF",priceFontSize:18,priceColor:"#FFD700",priceDisabledColor:"#888888",itemBoxPadding:15,itemBoxGap:20,itemBorderColor:"#8B7355",itemBorderWidth:3,itemBackgroundColor:"rgba(210, 180, 140, 0.3)",itemPurchasedColor:"rgba(100, 100, 100, 0.5)",leaveButtonWidth:160,leaveButtonHeight:50,leaveButtonColor:"#8B7355",leaveButtonTextColor:"#FFFFFF",leaveButtonFontSize:20,leaveButtonGap:50,titleOffsetY:-250,itemsOffsetY:-50,goldDisplayOffsetY:-280,cellSizeRatio:.6,shapeVerticalOffset:15,priceVerticalOffset:20,relicRowOffsetY:20,relicBoxWidth:100,relicBoxHeight:100,relicIconSize:32,saleColor:"#FF4444",saleBadgeColor:"#FF0000",saleBadgeTextColor:"#FFFFFF",saleBadgeFontSize:10,saleBadgeWidth:40,saleBadgeHeight:16,saleBadgeOffsetX:5,saleBadgeOffsetY:5,originalPriceColor:"#888888",strikethroughColor:"#888888",unavailableOpacity:.5,rerollButtonWidth:200,rerollButtonHeight:50,rerollButtonColor:"#5B8DBE",rerollButtonDisabledColor:"#555555",rerollButtonTextColor:"#FFFFFF",rerollButtonFontSize:16,rerollButtonGap:15,rerollInitialCost:3,rerollCostIncrement:1,sellButtonWidth:160,sellButtonHeight:50,sellButtonColor:"#AA4444",sellButtonTextColor:"#FFFFFF",sellButtonFontSize:16,sellModeRelicBoxWidth:140,sellModeRelicBoxHeight:120,sellModeRelicBoxGap:15,sellModeIconSize:36,sellModeNameFontSize:13,sellModePriceFontSize:14,sellModePriceColor:"#FFD700",sellModeInfoFontSize:18,sellModeInfoColor:"#FFFFFF",ownedRelicIconSize:22,ownedRelicGap:6,ownedRelicOffsetY:-300,ownedRelicCountFontSize:14,ownedRelicCountColor:"#AAAAAA",cancelButtonWidth:160,cancelButtonHeight:50,cancelButtonColor:"#666666",cancelButtonTextColor:"#FFFFFF",cancelButtonFontSize:18},ha={iconSize:24,slotSize:80,slotGap:8,slotBorderWidth:2,slotBorderColor:"#8B7355",slotEmptyBorderColor:"#555555",slotBackgroundColor:"rgba(0, 0, 0, 0.3)",slotEmptyBackgroundColor:"rgba(0, 0, 0, 0.15)"},En={backgroundColor:"rgba(0, 0, 0, 0.85)",titleFontSize:14,titleColor:"#00FF00",infoFontSize:11,infoColor:"#FFFFFF",highlightBgColor:"rgba(255, 215, 0, 0.3)",fontFamily:"Consolas, Monaco, monospace",padding:10,itemPadding:4,cellSize:7,maxItems:20,numberColumnWidth:25,minWindowWidth:90,offsetX:10,offsetY:80,probabilitySection:{sectionMarginTop:12,labelFontSize:11,labelColor:"#AAAAAA",valueFontSize:12,valueColor:"#00FF00",buttonWidth:20,buttonHeight:18,buttonColor:"#4CAF50",buttonTextColor:"#FFFFFF",buttonFontSize:14,rowHeight:24,valueWidth:40,buttonGap:4},relicSection:{sectionMarginTop:12,iconSize:22,iconGap:4,iconsPerRow:5,ownedOpacity:1,unownedOpacity:.3,ownedBgColor:"rgba(255, 215, 0, 0.3)",labelFontSize:11,labelColor:"#AAAAAA"},valueSection:{sectionMarginTop:8,buttonWidth:26,buttonHeight:18,buttonGap:3,rowHeight:24,labelWidth:45,valueWidth:45,labelFontSize:11,labelColor:"#AAAAAA",valueFontSize:12,valueColor:"#00FF00",buttonTextColor:"#FFFFFF",buttonFontSize:10}},n0={common:"#AAAAAA",uncommon:"#55AA55",rare:"#5555FF",epic:"#AA00AA"},ht={enhanced:{base:"#DAA520",highlight:"#FFD700",shadow:"#B8860B"},lucky:{base:"#228B22",highlight:"#32CD32",shadow:"#006400"},combo:{base:"#8B008B",highlight:"#BA55D3",shadow:"#4B0082"},aura:{base:"#00CED1",highlight:"#40E0D0",shadow:"#008B8B"},moss:{base:"#2E8B57",highlight:"#3CB371",shadow:"#006400"},feather:{base:"#F5F5DC",highlight:"#FFFACD",shadow:"#D2B48C"},nohand:{base:"#87CEEB",highlight:"#B0E0E6",shadow:"#4682B4"},charge:{base:"#FF8C00",highlight:"#FFA500",shadow:"#CC7000"},obstacle:{base:"#696969",highlight:"#808080",shadow:"#2F4F4F"}},qt={fontSize:12,fontFamily:"Arial, sans-serif",color:"#FFFFFF",shadowColor:"#000000",shadowBlur:2},ma={gold:"#FFD700",score:"#00FF00",multi:"#FF69B4",stone:"#808080",arrow_v:"#1E90FF",arrow_h:"#FF6347"},au={fontSize:10,fontFamily:"Arial, sans-serif",backgroundColor:"rgba(0, 0, 0, 0.6)",borderRadius:2,padding:1},t0={MIN:0,MAX:100,STEP:10},r0={backgroundColor:"rgba(0, 0, 0, 0.9)",borderColor:"#8B7355",borderWidth:2,borderRadius:6,padding:10,maxWidth:180,nameFontSize:13,descFontSize:11,fontFamily:"Arial, sans-serif",nameColor:"#FFD700",descColor:"#FFFFFF",lineHeight:1.4,offsetX:15,offsetY:15,effectGap:8},ga={duration:1500,popupWidth:200,popupHeight:80,popupGap:10,backgroundColor:"rgba(0, 0, 0, 0.8)",borderColor:"#FFD700",borderWidth:3,borderRadius:10,iconSize:32,iconOffsetX:40,nameFontSize:16,nameOffsetX:70,nameOffsetY:25,bonusFontSize:20,bonusOffsetY:55,nameColor:"#FFFFFF",bonusColor:"#FFD700",fontFamily:"Arial, sans-serif",glowColor:"rgba(255, 215, 0, 0.5)",glowRadius:20},Ap={backgroundColor:"rgba(0, 0, 0, 0.85)",setFontSize:20,setColor:"#AAAAAA",setOffsetY:-200,cardWidth:180,cardHeight:240,cardGap:30,cardBorderRadius:12,cardBorderWidth:3,cardColors:{current:{background:"rgba(76, 175, 80, 0.3)",border:"#4CAF50"},cleared:{background:"rgba(100, 100, 100, 0.5)",border:"#666666"},locked:{background:"rgba(50, 50, 50, 0.5)",border:"#333333"}},typeColors:{normal:"#FFFFFF",elite:"#FFD700",boss:"#FF4444"},typeFontSize:24,typeOffsetY:40,roundFontSize:18,roundOffsetY:80,conditionFontSize:14,conditionColor:"#FF6666",conditionOffsetY:120,targetFontSize:16,targetOffsetY:110,targetBossOffsetY:145,rewardFontSize:14,rewardOffsetY:135,rewardBossOffsetY:170,rewardColor:"#FFD700",clearedMarkFontSize:48,clearedMarkColor:"#4CAF50",lockedMarkFontSize:32,lockedMarkColor:"#666666",buttonWidth:200,buttonHeight:60,buttonColor:"#4CAF50",buttonTextColor:"#FFFFFF",buttonFontSize:24,buttonOffsetY:150},Fp={backgroundColor:"rgba(0, 0, 0, 0.9)",titleFontSize:24,titleColor:"#FFFFFF",titleOffsetY:40,areaWidth:800,cardCellSize:8,cardGap:10,maxCardWidth:48,sectionFontSize:16,sectionColor:"#AAAAAA",deckSectionY:80,usedSectionY:300,usedOpacity:.4,usedOverlayColor:"rgba(100, 100, 100, 0.6)",closeButtonWidth:120,closeButtonHeight:40,closeButtonColor:"#8B7355",closeButtonTextColor:"#FFFFFF",closeButtonFontSize:16,closeButtonOffsetY:-50},l0={width:80,height:36,backgroundColor:"#8B7355",textColor:"#FFFFFF",fontSize:14,borderRadius:6},ci={x:470,y:520,width:80,height:80,borderWidth:3,borderColor:"#8B7355",backgroundColor:"rgba(210, 180, 140, 0.2)",labelFontSize:12,labelColor:"#AAAAAA"};function Rp(){const e=[];for(let n=0;n<te;n++){const t=[];for(let r=0;r<te;r++)t.push({filled:!1,blockSetId:null,pattern:null,seal:null,chargeValue:0});e.push(t)}return e}function _p(e,n,t){const{shape:r,blockSetId:l,blocks:o}=n,i=e.map(s=>s.map(u=>({...u})));for(let s=0;s<r.length;s++)for(let u=0;u<r[s].length;u++)if(r[s][u]){const a=t.x+u,c=t.y+s,d=vn.get(o,s,u);i[c][a]={filled:!0,blockSetId:l,pattern:(d==null?void 0:d.pattern)??null,seal:(d==null?void 0:d.seal)??null,chargeValue:0}}return i}function Tp(e,n){const t=Math.floor(n.next()*te),r=Math.floor(n.next()*te),l=e.map(o=>o.map(i=>({...i})));return l[t][r]={filled:!0,blockSetId:null,pattern:"obstacle",seal:null,chargeValue:0},l}function cu(e,n){return e.map(t=>t.map(r=>r.filled&&r.pattern==="charge"&&r.blockSetId!==n?{...r,chargeValue:r.chargeValue+1}:r))}function A(e){const n=e.trim().split(`
`).map(r=>r.trim()).filter(r=>r.length>0),t=Math.max(...n.map(r=>r.length));return n.map(r=>{const l=[...r].map(o=>o==="#");for(;l.length<t;)l.push(!1);return l})}function o0(e){return e.reduce((n,t)=>n+t.filter(Boolean).length,0)}function M(e,n,t){return{id:e,category:n,shape:t,cellCount:o0(t)}}const Ep=[M("mono-1","monomino",A("#"))],Mp=[M("dom-h","domino",A("##")),M("dom-v","domino",A(`
    #
    #
  `))],Pp=[M("tro-i-h","tromino",A("###")),M("tro-i-v","tromino",A(`
    #
    #
    #
  `)),M("tro-l-0","tromino",A(`
    #.
    ##
  `)),M("tro-l-90","tromino",A(`
    ##
    #.
  `)),M("tro-l-180","tromino",A(`
    ##
    .#
  `)),M("tro-l-270","tromino",A(`
    .#
    ##
  `))],Ip=[M("tet-i-h","tetromino",A("####")),M("tet-i-v","tetromino",A(`
    #
    #
    #
    #
  `)),M("tet-o","tetromino",A(`
    ##
    ##
  `)),M("tet-t-0","tetromino",A(`
    ###
    .#.
  `)),M("tet-t-90","tetromino",A(`
    .#
    ##
    .#
  `)),M("tet-t-180","tetromino",A(`
    .#.
    ###
  `)),M("tet-t-270","tetromino",A(`
    #.
    ##
    #.
  `)),M("tet-s-h","tetromino",A(`
    .##
    ##.
  `)),M("tet-s-v","tetromino",A(`
    #.
    ##
    .#
  `)),M("tet-z-h","tetromino",A(`
    ##.
    .##
  `)),M("tet-z-v","tetromino",A(`
    .#
    ##
    #.
  `)),M("tet-j-0","tetromino",A(`
    #..
    ###
  `)),M("tet-j-90","tetromino",A(`
    ##
    #.
    #.
  `)),M("tet-j-180","tetromino",A(`
    ###
    ..#
  `)),M("tet-j-270","tetromino",A(`
    .#
    .#
    ##
  `)),M("tet-l-0","tetromino",A(`
    ..#
    ###
  `)),M("tet-l-90","tetromino",A(`
    #.
    #.
    ##
  `)),M("tet-l-180","tetromino",A(`
    ###
    #..
  `)),M("tet-l-270","tetromino",A(`
    ##
    .#
    .#
  `))],Bp=[M("pent-f-0","pentomino",A(`
    .##
    ##.
    .#.
  `)),M("pent-f-90","pentomino",A(`
    #..
    ###
    .#.
  `)),M("pent-f-180","pentomino",A(`
    .#.
    .##
    ##.
  `)),M("pent-f-270","pentomino",A(`
    .#.
    ###
    ..#
  `)),M("pent-f-m0","pentomino",A(`
    ##.
    .##
    .#.
  `)),M("pent-f-m90","pentomino",A(`
    .#.
    ###
    #..
  `)),M("pent-f-m180","pentomino",A(`
    .#.
    ##.
    .##
  `)),M("pent-f-m270","pentomino",A(`
    ..#
    ###
    .#.
  `)),M("pent-i-h","pentomino",A("#####")),M("pent-i-v","pentomino",A(`
    #
    #
    #
    #
    #
  `)),M("pent-l-0","pentomino",A(`
    #.
    #.
    #.
    ##
  `)),M("pent-l-90","pentomino",A(`
    ####
    #...
  `)),M("pent-l-180","pentomino",A(`
    ##
    .#
    .#
    .#
  `)),M("pent-l-270","pentomino",A(`
    ...#
    ####
  `)),M("pent-l-m0","pentomino",A(`
    .#
    .#
    .#
    ##
  `)),M("pent-l-m90","pentomino",A(`
    #...
    ####
  `)),M("pent-l-m180","pentomino",A(`
    ##
    #.
    #.
    #.
  `)),M("pent-l-m270","pentomino",A(`
    ####
    ...#
  `)),M("pent-n-0","pentomino",A(`
    .#
    ##
    #.
    #.
  `)),M("pent-n-90","pentomino",A(`
    ##..
    .###
  `)),M("pent-n-180","pentomino",A(`
    .#
    .#
    ##
    #.
  `)),M("pent-n-270","pentomino",A(`
    ###.
    ..##
  `)),M("pent-n-m0","pentomino",A(`
    #.
    ##
    .#
    .#
  `)),M("pent-n-m90","pentomino",A(`
    .###
    ##..
  `)),M("pent-n-m180","pentomino",A(`
    #.
    #.
    ##
    .#
  `)),M("pent-n-m270","pentomino",A(`
    ..##
    ###.
  `)),M("pent-p-0","pentomino",A(`
    ##
    ##
    #.
  `)),M("pent-p-90","pentomino",A(`
    ###
    .##
  `)),M("pent-p-180","pentomino",A(`
    .#
    ##
    ##
  `)),M("pent-p-270","pentomino",A(`
    ##.
    ###
  `)),M("pent-p-m0","pentomino",A(`
    ##
    ##
    .#
  `)),M("pent-p-m90","pentomino",A(`
    .##
    ###
  `)),M("pent-p-m180","pentomino",A(`
    #.
    ##
    ##
  `)),M("pent-p-m270","pentomino",A(`
    ###
    ##.
  `)),M("pent-t-0","pentomino",A(`
    ###
    .#.
    .#.
  `)),M("pent-t-90","pentomino",A(`
    ..#
    ###
    ..#
  `)),M("pent-t-180","pentomino",A(`
    .#.
    .#.
    ###
  `)),M("pent-t-270","pentomino",A(`
    #..
    ###
    #..
  `)),M("pent-u-0","pentomino",A(`
    #.#
    ###
  `)),M("pent-u-90","pentomino",A(`
    ##
    #.
    ##
  `)),M("pent-u-180","pentomino",A(`
    ###
    #.#
  `)),M("pent-u-270","pentomino",A(`
    ##
    .#
    ##
  `)),M("pent-v-0","pentomino",A(`
    #..
    #..
    ###
  `)),M("pent-v-90","pentomino",A(`
    ###
    #..
    #..
  `)),M("pent-v-180","pentomino",A(`
    ###
    ..#
    ..#
  `)),M("pent-v-270","pentomino",A(`
    ..#
    ..#
    ###
  `)),M("pent-w-0","pentomino",A(`
    #..
    ##.
    .##
  `)),M("pent-w-90","pentomino",A(`
    .##
    ##.
    #..
  `)),M("pent-w-180","pentomino",A(`
    ##.
    .##
    ..#
  `)),M("pent-w-270","pentomino",A(`
    ..#
    .##
    ##.
  `)),M("pent-x","pentomino",A(`
    .#.
    ###
    .#.
  `)),M("pent-y-0","pentomino",A(`
    .#
    ##
    .#
    .#
  `)),M("pent-y-90","pentomino",A(`
    ..#.
    ####
  `)),M("pent-y-180","pentomino",A(`
    #.
    #.
    ##
    #.
  `)),M("pent-y-270","pentomino",A(`
    ####
    .#..
  `)),M("pent-y-m0","pentomino",A(`
    #.
    ##
    #.
    #.
  `)),M("pent-y-m90","pentomino",A(`
    ####
    ..#.
  `)),M("pent-y-m180","pentomino",A(`
    .#
    .#
    ##
    .#
  `)),M("pent-y-m270","pentomino",A(`
    .#..
    ####
  `)),M("pent-z-0","pentomino",A(`
    ##.
    .#.
    .##
  `)),M("pent-z-90","pentomino",A(`
    ..#
    ###
    #..
  `)),M("pent-z-m0","pentomino",A(`
    .##
    .#.
    ##.
  `)),M("pent-z-m90","pentomino",A(`
    #..
    ###
    ..#
  `))];function bo(e){const n=e.length,t=e[0].length,r=[];for(let l=0;l<t;l++){const o=[];for(let i=n-1;i>=0;i--)o.push(e[i][l]);r.push(o)}return r}function Lp(e){return e.map(n=>[...n].reverse())}function fu(e){const n=e,t=bo(n),r=bo(t),l=bo(r);return[n,t,r,l]}function du(e){return[e,bo(e)]}function i0(e){const n=fu(e),t=fu(Lp(e));return[...n,...t]}function s0(e){const n=du(e),t=du(Lp(e));return[...n,...t]}function ne(e,n,t){let r,l;switch(t){case"2rot":r=du(n),l=["0","90"];break;case"4rot":r=fu(n),l=["0","90","180","270"];break;case"4flip":r=s0(n),l=["0","90","m0","m90"];break;case"8":r=i0(n),l=["0","90","180","270","m0","m90","m180","m270"];break}return r.map((o,i)=>M(`hex-${e}-${l[i]}`,"hexomino",o))}const u0=[...ne("I6",A("######"),"2rot"),...ne("O6",A(`
    ###
    ###
  `),"2rot")],a0=[...ne("R1",A(`
    .#
    .#
    ##
    .#
    .#
  `),"4rot"),...ne("R2",A(`
    ##
    #.
    #.
    ##
  `),"4rot"),...ne("R3",A(`
    ###
    .#.
    .#.
    .#.
  `),"4rot"),...ne("R4",A(`
    .#.
    ###
    .#.
    .#.
  `),"4rot"),...ne("R5",A(`
    .##.
    ####
  `),"4rot"),...ne("R6",A(`
    .#.
    ###
    #.#
  `),"4rot")],c0=[...ne("B1",A(`
    .#.
    ##.
    .##
    .#.
  `),"4flip"),...ne("B2",A(`
    #.
    #.
    ##
    .#
    .#
  `),"4flip"),...ne("B3",A(`
    .#
    ##
    ##
    #.
  `),"4flip"),...ne("B4",A(`
    #..
    ##.
    .#.
    .##
  `),"4flip"),...ne("B5",A(`
    ##.
    .#.
    .#.
    .##
  `),"4flip")],f0=[...ne("G1",A(`
    ..#
    .##
    ###
  `),"4rot"),...ne("G2",A(`
    .#.
    ###
    .##
  `),"4rot")],d0=[...ne("K1",A(`
    ....#
    #####
  `),"8"),...ne("K2",A(`
    ...#.
    #####
  `),"8"),...ne("K3",A(`
    ..##
    ####
  `),"8"),...ne("K4",A(`
    .#.#
    ####
  `),"8"),...ne("K5",A(`
    ...#
    ...#
    ####
  `),"8"),...ne("K6",A(`
    ..#.
    ..#.
    ####
  `),"8"),...ne("K7",A(`
    ..#.
    ####
    ...#
  `),"8"),...ne("K8",A(`
    .#..
    ####
    ...#
  `),"8"),...ne("K9",A(`
    ...##
    ####.
  `),"8"),...ne("K10",A(`
    .#.
    ##.
    .###
  `),"8"),...ne("K11",A(`
    ##.#
    .###
  `),"8"),...ne("K12",A(`
    ..#.
    ###.
    ..##
  `),"8"),...ne("K13",A(`
    .#..
    ###.
    ..##
  `),"8"),...ne("K14",A(`
    ##..
    .#..
    .###
  `),"8"),...ne("K15",A(`
    #...
    ##..
    .###
  `),"8"),...ne("K16",A(`
    .##
    ..#
    ###
  `),"8"),...ne("K17",A(`
    ##..
    .###
    ...#
  `),"8"),...ne("K18",A(`
    ..#
    ###
    .##
  `),"8"),...ne("K19",A(`
    ##.
    .##
    .##
  `),"8"),...ne("K20",A(`
    ..#
    ###
    #.#
  `),"8")],Dp=[...u0,...a0,...c0,...f0,...d0],p0={monomino:Ep,domino:Mp,tromino:Pp,tetromino:Ip,pentomino:Bp,hexomino:Dp},h0=[...Ep,...Mp,...Pp,...Ip,...Bp,...Dp],m0=new Map(h0.map(e=>[e.id,e]));function Wn(e){return m0.get(e)}let Uc=0;const to=e=>`${e}-${Date.now()}-${Math.random().toString(36).substring(2,9)}`,ro=()=>(Uc+=1,Uc);function fi(e){return{id:to(e.id),shape:e.shape,blockSetId:ro(),blocks:vn.createFromShape(e.shape)}}function ya(e,n){return{id:to(e.id),shape:e.shape,blockSetId:ro(),blocks:vn.createWithPattern(e.shape,n)}}function Op(e){const n=[];return e.forEach((t,r)=>{t.forEach((l,o)=>{l&&n.push({row:r,col:o})})}),n}function g0(e,n,t){const r=e.shape;let l=vn.createFromShape(r);const o=Op(r);if(o.length>0){const i=Math.floor(t.next()*o.length),s=o[i];l=vn.setSeal(l,s.row,s.col,n)}return{id:to(e.id),shape:r,blockSetId:ro(),blocks:l}}function y0(e,n,t,r){const l=e.shape;let o=vn.createWithPattern(l,n);const i=Op(l);if(i.length>0){const s=Math.floor(r.next()*i.length),u=i[s];o=vn.setSeal(o,u.row,u.col,t)}return{id:to(e.id),shape:l,blockSetId:ro(),blocks:o}}function st(e){for(const n of e.blocks.values())if(n.pattern)return n.pattern;return null}function zp(e){var r;const n=e.length;return{width:((r=e[0])==null?void 0:r.length)??0,height:n}}function S0(){return[...pa.minoIds]}function Sa(e,n){const t=[...e];for(let r=t.length-1;r>0;r--){const l=Math.floor(n.next()*(r+1)),o=t[r];t[r]=t[l],t[l]=o}return t}function v0(e,n,t){const r=[...e.cards],l=e.allMinos;if(r.length>=n){const c=r.slice(0,n),d=r.slice(n);return{drawn:c,newDeck:{...e,cards:d,allMinos:l,purchasedPieces:e.purchasedPieces,stockSlot:e.stockSlot}}}const o=[...r],i=n-o.length,s=Sa([...l],t),u=s.slice(0,i),a=s.slice(i);return{drawn:[...o,...u],newDeck:{...e,cards:a,allMinos:l,purchasedPieces:e.purchasedPieces,stockSlot:e.stockSlot}}}function w0(e,n){if(n!=null&&n.has(e))return{...n.get(e),id:to(e),blockSetId:ro()};const t=Wn(e);return t?fi(t):null}function k0(e,n){const t=S0();return{cards:Sa(t,e),remainingHands:n,allMinos:[...t],purchasedPieces:new Map,stockSlot:null,stockSlot2:null}}function C0(e,n,t){const{drawn:r,newDeck:l}=v0(e,n,t),o=[];for(const i of r){const s=w0(i,l.purchasedPieces);s&&o.push(s)}return{pieces:o,newDeck:l}}function A0(e){return{...e,remainingHands:Math.max(0,e.remainingHands-1)}}const F0={obstacle:{id:"obstacle",name:"",description:"4"},energy_save:{id:"energy_save",name:"",description:""},two_cards:{id:"two_cards",name:"2",description:"2"}},Yc=["obstacle","energy_save","two_cards"],R0=.75,_0=2,Np=4,T0=(e,n=null)=>{const t=Math.floor((e-1)/3)+1,r=(e-1)%3;return{round:e,setNumber:t,positionInSet:r,roundType:["normal","elite","boss"][r],bossCondition:r===2?n:null}};function bp(e){return Wt.initialTargetScore+(e-1)*Wt.targetScoreIncrement}const $p={normal:1,elite:2,boss:5};function Wp(e){return $p[e]}function pu(e,n){return $p[n]+e}function hu(e){return Math.floor(Math.max(0,e)/5)}function E0(e){return e>=Wt.maxRound}function M0(e){const n=Math.floor(e.next()*Yc.length),t=Yc[n];return F0[t]}function Hp(e,n){const l=(e-1)%3===2?M0(n):null;return T0(e,l)}function Up(e){var t;const n=pa.totalHands;return((t=e==null?void 0:e.bossCondition)==null?void 0:t.id)==="energy_save"?Math.floor(n*R0):n}function xr(e){var n;return((n=e==null?void 0:e.bossCondition)==null?void 0:n.id)==="two_cards"?_0:pa.drawCount}class er{next(){return Math.random()}}function P0(e){return{gold:e,earnedGold:0,ownedRelics:[],relicDisplayOrder:[],amuletStock:[]}}const He={CHAIN_MASTER_MULTIPLIER:1.5,FULL_CLEAR_MULTIPLIER:5,SINGLE_LINE_MULTIPLIER:3,RENSHA_INCREMENT:1,NOBI_INCREMENT:.5,SCRIPT_LINE_BONUS_SINGLE:1,SCRIPT_LINE_BONUS_DOUBLE:2,BANDAID_TRIGGER_COUNT:3,TIMING_MULTIPLIER:3},mt={full_clear_bonus:{id:"full_clear_bonus",type:"full_clear_bonus",name:"",description:"5",rarity:"common",price:10,icon:""},size_bonus_1:{id:"size_bonus_1",type:"size_bonus_1",name:"1",description:"1+1",rarity:"common",price:10,icon:"1"},size_bonus_2:{id:"size_bonus_2",type:"size_bonus_2",name:"2",description:"2+1",rarity:"common",price:10,icon:"2"},size_bonus_3:{id:"size_bonus_3",type:"size_bonus_3",name:"3",description:"3+1",rarity:"common",price:10,icon:"3"},size_bonus_4:{id:"size_bonus_4",type:"size_bonus_4",name:"4",description:"4+1",rarity:"common",price:10,icon:"4"},size_bonus_5:{id:"size_bonus_5",type:"size_bonus_5",name:"5",description:"5+1",rarity:"common",price:10,icon:"5"},size_bonus_6:{id:"size_bonus_6",type:"size_bonus_6",name:"6",description:"6+1",rarity:"common",price:10,icon:"6"},chain_master:{id:"chain_master",type:"chain_master",name:"",description:"1.5",rarity:"rare",price:20,icon:""},single_line:{id:"single_line",type:"single_line",name:"",description:"113",rarity:"uncommon",price:15,icon:""},takenoko:{id:"takenoko",type:"takenoko",name:"",description:"",rarity:"common",price:10,icon:""},kani:{id:"kani",type:"kani",name:"",description:"",rarity:"common",price:10,icon:""},rensha:{id:"rensha",type:"rensha",name:"",description:"+1",rarity:"rare",price:20,icon:""},nobi_takenoko:{id:"nobi_takenoko",type:"nobi_takenoko",name:"",description:"+0.51",rarity:"uncommon",price:15,icon:""},nobi_kani:{id:"nobi_kani",type:"nobi_kani",name:"",description:"+0.51",rarity:"uncommon",price:15,icon:""},hand_stock:{id:"hand_stock",type:"hand_stock",name:"",description:"1",rarity:"epic",price:25,icon:""},script:{id:"script",type:"script",name:"",description:"2+12+2",rarity:"uncommon",price:15,icon:""},volcano:{id:"volcano",type:"volcano",name:"",description:"0",rarity:"uncommon",price:15,icon:""},bandaid:{id:"bandaid",type:"bandaid",name:"",description:"3",rarity:"rare",price:20,icon:""},timing:{id:"timing",type:"timing",name:"",description:"33",rarity:"uncommon",price:15,icon:""},copy:{id:"copy",type:"copy",name:"",description:"1",rarity:"epic",price:25,icon:""}},un=e=>mt[e];function tt(e){return{targetRelicId:e,bandaidCounter:0,renshaMultiplier:1,nobiTakenokoMultiplier:1,nobiKaniMultiplier:1}}const Ir={nobiTakenokoMultiplier:1,nobiKaniMultiplier:1,renshaMultiplier:1,bandaidCounter:0,copyRelicState:null};function I0(e,n){return n===0?{...e,renshaMultiplier:1}:{...e,renshaMultiplier:e.renshaMultiplier+He.RENSHA_INCREMENT}}function B0(e,n,t){return n>0?{...e,nobiTakenokoMultiplier:1}:t>0?{...e,nobiTakenokoMultiplier:e.nobiTakenokoMultiplier+He.NOBI_INCREMENT}:e}function L0(e,n,t){return t>0?{...e,nobiKaniMultiplier:1}:n>0?{...e,nobiKaniMultiplier:e.nobiKaniMultiplier+He.NOBI_INCREMENT}:e}function D0(e,n){if(!n)return{newState:e,shouldTrigger:!1};const t=e.bandaidCounter+1;return t>=He.BANDAID_TRIGGER_COUNT?{newState:{...e,bandaidCounter:0},shouldTrigger:!0}:{newState:{...e,bandaidCounter:t},shouldTrigger:!1}}function O0(e){return He.BANDAID_TRIGGER_COUNT-e.bandaidCounter}const va="hexomino_puzzle_game_state",Yp=1;function Ml(e){return{id:e.id,blockSetId:e.blockSetId,shape:e.shape,blocks:Array.from(e.blocks.entries())}}function z0(e){return{piece:e.piece?Ml(e.piece):null,position:e.position}}function N0(e){const n=[];return e.purchasedPieces.forEach((t,r)=>{n.push([r,Ml(t)])}),{cards:e.cards,allMinos:e.allMinos,remainingHands:e.remainingHands,purchasedPieces:n,stockSlot:e.stockSlot?Ml(e.stockSlot):null,stockSlot2:e.stockSlot2?Ml(e.stockSlot2):null}}function b0(e){return e.type==="relic"||e.type==="amulet"?e:{type:"block",piece:Ml(e.piece),price:e.price,originalPrice:e.originalPrice,purchased:e.purchased,onSale:e.onSale}}function $0(e){return e?{items:e.items.map(b0),rerollCount:e.rerollCount}:null}function W0(e){return{version:Yp,round:e.round,score:e.score,targetScore:e.targetScore,phase:e.phase,roundInfo:e.roundInfo,player:{gold:e.player.gold,ownedRelics:e.player.ownedRelics,relicDisplayOrder:e.player.relicDisplayOrder,amuletStock:e.player.amuletStock},deck:N0(e.deck),board:e.board,pieceSlots:e.pieceSlots.map(z0),shopState:$0(e.shopState),relicMultiplierState:e.relicMultiplierState,scriptRelicLines:e.scriptRelicLines,volcanoEligible:e.volcanoEligible}}function Pl(e){return{id:e.id,blockSetId:e.blockSetId,shape:e.shape,blocks:new Map(e.blocks)}}function H0(e){return{piece:e.piece?Pl(e.piece):null,position:e.position}}function U0(e){const n=new Map;for(const[t,r]of e.purchasedPieces)n.set(t,Pl(r));return{cards:e.cards,allMinos:e.allMinos,remainingHands:e.remainingHands,purchasedPieces:n,stockSlot:e.stockSlot?Pl(e.stockSlot):null,stockSlot2:e.stockSlot2?Pl(e.stockSlot2):null}}function Y0(e){return e.type==="relic"||e.type==="amulet"?e:{type:"block",piece:Pl(e.piece),price:e.price,originalPrice:e.originalPrice,purchased:e.purchased,onSale:e.onSale}}function G0(e){return e?{items:e.items.map(Y0),rerollCount:e.rerollCount??0,sellMode:!1,pendingPurchaseIndex:null}:null}function V0(e){if(!e||typeof e!="object")return!1;const n=e;if(typeof n.version!="number"||n.version!==Yp||typeof n.round!="number"||typeof n.score!="number"||typeof n.targetScore!="number"||typeof n.phase!="string"||!n.roundInfo||!n.player||!n.deck||!Array.isArray(n.board)||!Array.isArray(n.pieceSlots))return!1;const t=n.player;if(typeof t.gold!="number"||!Array.isArray(t.ownedRelics))return!1;const r=n.deck;return!(!Array.isArray(r.cards)||!Array.isArray(r.allMinos)||typeof r.remainingHands!="number"||!Array.isArray(r.purchasedPieces))}function Te(e){try{const n=W0(e),t=JSON.stringify(n);localStorage.setItem(va,t)}catch(n){console.warn("Failed to save game state:",n)}}function j0(){try{const e=localStorage.getItem(va);if(!e)return null;const n=JSON.parse(e);return V0(n)?n:(console.warn("Invalid saved state, clearing..."),Xl(),null)}catch(e){return console.warn("Failed to load game state:",e),Xl(),null}}function Xl(){try{localStorage.removeItem(va)}catch(e){console.warn("Failed to clear game state:",e)}}function x0(e,n){var t,r,l,o,i;return{board:e.board.map(s=>s.map(u=>({...u,chargeValue:u.chargeValue??0}))),pieceSlots:e.pieceSlots.map(H0),dragState:n,score:e.score,clearingAnimation:null,relicActivationAnimation:null,scoreAnimation:null,deck:U0(e.deck),phase:e.phase,round:e.round,roundInfo:e.roundInfo,player:{gold:e.player.gold,earnedGold:e.player.earnedGold??0,ownedRelics:[...e.player.ownedRelics].map(s=>s==="small_luck"?"size_bonus_3":s),relicDisplayOrder:(e.player.relicDisplayOrder?[...e.player.relicDisplayOrder]:[...e.player.ownedRelics]).map(s=>s==="small_luck"?"size_bonus_3":s),amuletStock:e.player.amuletStock??[]},targetScore:e.targetScore,shopState:G0(e.shopState),relicMultiplierState:{nobiTakenokoMultiplier:((t=e.relicMultiplierState)==null?void 0:t.nobiTakenokoMultiplier)??Ir.nobiTakenokoMultiplier,nobiKaniMultiplier:((r=e.relicMultiplierState)==null?void 0:r.nobiKaniMultiplier)??Ir.nobiKaniMultiplier,renshaMultiplier:((l=e.relicMultiplierState)==null?void 0:l.renshaMultiplier)??Ir.renshaMultiplier,bandaidCounter:((o=e.relicMultiplierState)==null?void 0:o.bandaidCounter)??Ir.bandaidCounter,copyRelicState:(i=e.relicMultiplierState)!=null&&i.copyRelicState?{targetRelicId:e.relicMultiplierState.copyRelicState.targetRelicId??null,bandaidCounter:e.relicMultiplierState.copyRelicState.bandaidCounter,renshaMultiplier:e.relicMultiplierState.copyRelicState.renshaMultiplier,nobiTakenokoMultiplier:e.relicMultiplierState.copyRelicState.nobiTakenokoMultiplier,nobiKaniMultiplier:e.relicMultiplierState.copyRelicState.nobiKaniMultiplier}:null},scriptRelicLines:e.scriptRelicLines??null,volcanoEligible:e.volcanoEligible??!0,deckViewOpen:!1,pendingPhase:null,amuletModal:null}}const Ee={isDragging:!1,pieceId:null,slotIndex:null,dragSource:null,currentPos:null,startPos:null,boardPos:null};function Xr(e,n,t){const r=t??new er,{pieces:l,newDeck:o}=C0(e,n,r);return{slots:l.map(s=>({piece:s,position:{x:0,y:0}})),newDeck:o}}function X0(){var a;const e=new er,n=1,t=Hp(n,e),r=Up(t),l=xr(t),o=k0(e,r),{slots:i,newDeck:s}=Xr(o,l,e);let u=Rp();if(((a=t.bossCondition)==null?void 0:a.id)==="obstacle")for(let c=0;c<Np;c++)u=Tp(u,e);return{board:u,pieceSlots:i,dragState:Ee,score:0,clearingAnimation:null,relicActivationAnimation:null,scoreAnimation:null,deck:s,phase:"round_progress",pendingPhase:null,round:n,roundInfo:t,player:P0(Wt.initialGold),targetScore:bp(n),shopState:null,relicMultiplierState:Ir,scriptRelicLines:null,deckViewOpen:!1,volcanoEligible:!0,amuletModal:null}}function Gp(){const e=j0();if(e)try{return x0(e,Ee)}catch(n){console.warn("Failed to restore game state, starting new game:",n),Xl()}return X0()}function mu(e){return e.every(n=>n.piece===null)}function Kl(e,n,t){return e>=n?"round_clear":t===0?"game_over":"playing"}function Br(e,n,t,r=null){for(let l=0;l<n.length;l++)for(let o=0;o<n[l].length;o++){if(!n[l][o])continue;const i=t.x+o,s=t.y+l;if(i<0||i>=te||s<0||s>=te)return!1;if(e[s][i].filled){if(r==="feather"){if(e[s][i].pattern==="feather")return!1;continue}return!1}}return!0}function Gc(e,n,t,r){return{x:Math.floor((e.x-n)/r),y:Math.floor((e.y-t)/r)}}function cs(e,n,t=null){for(let r=0;r<te;r++)for(let l=0;l<te;l++)if(Br(e,n,{x:l,y:r},t))return!0;return!1}const Vp={gold:{id:"gold",type:"gold",name:"",description:"+1G",symbol:"G",preventsClearing:!1,price:3},score:{id:"score",type:"score",name:"",description:"+5",symbol:"+5",preventsClearing:!1,price:2},multi:{id:"multi",type:"multi",name:"",description:"2",symbol:"2",preventsClearing:!1,price:4},stone:{id:"stone",type:"stone",name:"",description:"",symbol:"",preventsClearing:!0,price:0},arrow_v:{id:"arrow_v",type:"arrow_v",name:"()",description:"+10",symbol:"",preventsClearing:!1,price:4},arrow_h:{id:"arrow_h",type:"arrow_h",name:"()",description:"+10",symbol:"",preventsClearing:!1,price:4}},fr=e=>Vp[e],di=["gold","score","multi","arrow_v","arrow_h"],jp={enhanced:{id:"enhanced",type:"enhanced",name:"",description:"+2",symbol:"",isNegative:!1,price:4},lucky:{id:"lucky",type:"lucky",name:"",description:"10%x2",symbol:"",isNegative:!1,price:5},combo:{id:"combo",type:"combo",name:"",description:"",symbol:"C",isNegative:!1,price:4},aura:{id:"aura",type:"aura",name:"",description:"+1",symbol:"",isNegative:!1,price:4},moss:{id:"moss",type:"moss",name:"",description:"+1",symbol:"M",isNegative:!1,price:3},feather:{id:"feather",type:"feather",name:"",description:"",symbol:"F",isNegative:!1,price:3},nohand:{id:"nohand",type:"nohand",name:"",description:"",symbol:"N",isNegative:!1,price:5},charge:{id:"charge",type:"charge",name:"",description:"+1",symbol:"",isNegative:!1,price:3},obstacle:{id:"obstacle",type:"obstacle",name:"",description:"",symbol:"",isNegative:!0,price:0}},Vt=e=>jp[e],pi=["enhanced","lucky","combo","aura","moss","feather","nohand","charge"];function K0(e,n){return n.filter(t=>{const r=e[t.row][t.col];if(r.pattern){const l=Vt(r.pattern);if(l!=null&&l.isNegative)return!1}if(r.seal){const l=fr(r.seal);if(l!=null&&l.preventsClearing)return!1}return!0})}function Q0(e,n,t=null){let r=0,l=0,o=0,i=0;for(const s of n){const a=e[s.row][s.col].seal;a==="gold"?r++:a==="score"?l++:a==="multi"?o++:a==="arrow_v"?t!=null&&t.columns.includes(s.col)&&i++:a==="arrow_h"&&t!=null&&t.rows.includes(s.row)&&i++}return{goldCount:r,scoreBonus:l*5,multiBonus:o,arrowBonus:i*10}}function ue(e,n){return e.includes(n)}function Z0(e){const{ownedRelics:n,totalLines:t,rowLines:r,colLines:l,placedBlockSize:o,isBoardEmptyAfterClear:i,relicMultiplierState:s,completedRows:u,completedCols:a,scriptRelicLines:c}=e;let d=0;if(ue(n,"script")&&c&&t>0){const S=y=>y.type==="row"?u.includes(y.index):a.includes(y.index);S(c.target1)&&d++,S(c.target2)&&d++}const f=[{type:"size_bonus_1",size:1},{type:"size_bonus_2",size:2},{type:"size_bonus_3",size:3},{type:"size_bonus_4",size:4},{type:"size_bonus_5",size:5},{type:"size_bonus_6",size:6}];let p=null;if(t>0){for(const{type:S,size:y}of f)if(ue(n,S)&&o===y){p=S;break}}return{chainMasterActive:ue(n,"chain_master")&&t>=2,sizeBonusActiveRelicId:p,fullClearActive:ue(n,"full_clear_bonus")&&i,singleLineActive:ue(n,"single_line")&&t===1,takenokoActive:ue(n,"takenoko")&&r===0&&l>=1,takenokoCols:l,kaniActive:ue(n,"kani")&&l===0&&r>=1,kaniRows:r,renshaActive:ue(n,"rensha")&&t>0,renshaMultiplier:s.renshaMultiplier,nobiTakenokoActive:ue(n,"nobi_takenoko")&&r===0&&l>=1,nobiTakenokoMultiplier:s.nobiTakenokoMultiplier,nobiKaniActive:ue(n,"nobi_kani")&&l===0&&r>=1,nobiKaniMultiplier:s.nobiKaniMultiplier,scriptActive:d>0,scriptMatchCount:d,timingActive:ue(n,"timing")&&e.remainingHands%3===0&&t>0,timingMultiplier:He.TIMING_MULTIPLIER}}function J0(e){const n=Z0(e),t=n.chainMasterActive?He.CHAIN_MASTER_MULTIPLIER:1,r=n.sizeBonusActiveRelicId!==null?1:0,l=n.fullClearActive?He.FULL_CLEAR_MULTIPLIER:1,o=n.singleLineActive?He.SINGLE_LINE_MULTIPLIER:1,i=n.takenokoActive?Math.max(1,n.takenokoCols):1,s=n.kaniActive?Math.max(1,n.kaniRows):1,u=n.renshaActive?n.renshaMultiplier:1,a=n.nobiTakenokoActive?n.nobiTakenokoMultiplier:1,c=n.nobiKaniActive?n.nobiKaniMultiplier:1,d=n.timingActive?n.timingMultiplier:1,f=n.scriptMatchCount===2?He.SCRIPT_LINE_BONUS_DOUBLE:n.scriptMatchCount===1?He.SCRIPT_LINE_BONUS_SINGLE:0,p=ty(e,{sizeBonusTotal:r,scriptLineBonus:f,activations:n});return{activations:n,chainMasterMultiplier:t,sizeBonusTotal:r,fullClearMultiplier:l,totalRelicBonus:r+p.copyBonus,singleLineMultiplier:o,takenokoMultiplier:i,kaniMultiplier:s,renshaMultiplier:u,nobiTakenokoMultiplier:a,nobiKaniMultiplier:c,scriptLineBonus:f,timingMultiplier:d,copyTargetRelicId:p.copyTargetRelicId,copyMultiplier:p.copyMultiplier,copyBonus:p.copyBonus,copyLineBonus:p.copyLineBonus}}function q0(e,n,t,r){switch(e){case"chain_master":return r.activations.chainMasterActive?He.CHAIN_MASTER_MULTIPLIER:1;case"single_line":return r.activations.singleLineActive?He.SINGLE_LINE_MULTIPLIER:1;case"takenoko":return r.activations.takenokoActive?Math.max(1,r.activations.takenokoCols):1;case"kani":return r.activations.kaniActive?Math.max(1,r.activations.kaniRows):1;case"rensha":return t.totalLines>0?n.renshaMultiplier:1;case"nobi_takenoko":return t.rowLines===0&&t.colLines>=1?n.nobiTakenokoMultiplier:1;case"nobi_kani":return t.colLines===0&&t.rowLines>=1?n.nobiKaniMultiplier:1;case"timing":return t.remainingHands%3===0&&t.totalLines>0?He.TIMING_MULTIPLIER:1;case"full_clear_bonus":return r.activations.fullClearActive?He.FULL_CLEAR_MULTIPLIER:1;default:return 1}}function ey(e,n){switch(e){case"size_bonus_1":case"size_bonus_2":case"size_bonus_3":case"size_bonus_4":case"size_bonus_5":case"size_bonus_6":return n.sizeBonusTotal;default:return 0}}function ny(e,n){switch(e){case"script":return n.scriptLineBonus;default:return 0}}function ty(e,n){const t=e.copyRelicState;if(!t||!t.targetRelicId)return{copyTargetRelicId:null,copyMultiplier:1,copyBonus:0,copyLineBonus:0};const r=t.targetRelicId,l=q0(r,t,e,n),o=ey(r,n),i=ny(r,n);return{copyTargetRelicId:t.targetRelicId,copyMultiplier:l,copyBonus:o,copyLineBonus:i}}function xp(e){const n=[];if(e.chainMasterMultiplier>1&&n.push({relicId:"chain_master",bonusValue:"1.5"}),e.sizeBonusTotal>0&&e.sizeBonusRelicId&&n.push({relicId:e.sizeBonusRelicId,bonusValue:e.sizeBonusTotal}),e.fullClearMultiplier>1&&n.push({relicId:"full_clear_bonus",bonusValue:`${e.fullClearMultiplier}`}),e.singleLineMultiplier&&e.singleLineMultiplier>1&&n.push({relicId:"single_line",bonusValue:`${He.SINGLE_LINE_MULTIPLIER}`}),e.takenokoMultiplier&&e.takenokoMultiplier>1&&n.push({relicId:"takenoko",bonusValue:`${e.takenokoMultiplier}`}),e.kaniMultiplier&&e.kaniMultiplier>1&&n.push({relicId:"kani",bonusValue:`${e.kaniMultiplier}`}),e.renshaMultiplier&&e.renshaMultiplier>1&&n.push({relicId:"rensha",bonusValue:`${e.renshaMultiplier}`}),e.nobiTakenokoMultiplier&&e.nobiTakenokoMultiplier>1&&n.push({relicId:"nobi_takenoko",bonusValue:`${e.nobiTakenokoMultiplier}`}),e.nobiKaniMultiplier&&e.nobiKaniMultiplier>1&&n.push({relicId:"nobi_kani",bonusValue:`${e.nobiKaniMultiplier}`}),e.scriptLineBonus&&e.scriptLineBonus>0&&n.push({relicId:"script",bonusValue:`+${e.scriptLineBonus}`}),e.timingMultiplier&&e.timingMultiplier>1&&n.push({relicId:"timing",bonusValue:`${e.timingMultiplier}`}),e.copyTargetRelicId)if(e.copyMultiplier&&e.copyMultiplier>1){const t=e.copyMultiplier;n.push({relicId:"copy",bonusValue:`${Number.isInteger(t)?t:t.toFixed(1)}`})}else e.copyLineBonus&&e.copyLineBonus>0?n.push({relicId:"copy",bonusValue:`+${e.copyLineBonus}`}):e.copyBonus&&e.copyBonus>0&&n.push({relicId:"copy",bonusValue:e.copyBonus});return n}function ry(e,n){return[{row:e-1,col:n},{row:e+1,col:n},{row:e,col:n-1},{row:e,col:n+1}]}function ly(e,n){return e>=0&&e<te&&n>=0&&n<te}function oy(e,n){let t=0;return e===0&&t++,e===te-1&&t++,n===0&&t++,n===te-1&&t++,t}function iy(e,n){let t=0;for(const r of n){const l=e[r.row][r.col];if(l.pattern==="enhanced"){const o=l.seal==="multi"?2:1;t+=2*o}}return t}function sy(e,n){let t=0;for(const r of n){const l=e[r.row][r.col];if(!l.filled)continue;const o=ry(r.row,r.col);for(const i of o){if(!ly(i.row,i.col))continue;const s=e[i.row][i.col];if(s.filled&&s.pattern==="aura"&&s.blockSetId!==l.blockSetId){const u=l.seal==="multi"?2:1;t+=1*u;break}}}return t}function uy(e,n){let t=0;for(const r of n){const l=e[r.row][r.col];if(l.pattern==="moss"){const o=l.seal==="multi"?2:1;t+=oy(r.row,r.col)*o}}return t}function ay(e,n){let t=0;for(const r of n){const l=e[r.row][r.col];if(l.pattern==="charge"){const o=l.seal==="multi"?2:1;t+=l.chargeValue*o}}return t}function cy(e,n,t=Math.random){let r=0;for(const l of n){const o=e[l.row][l.col];o.pattern==="lucky"&&(r+=o.seal==="multi"?2:1)}if(r===0)return 1;for(let l=0;l<r;l++)if(t()<.1)return 2;return 1}function fy(e,n){let t=0;for(const r of n){const l=e[r.row][r.col];if(l.pattern==="combo"){const o=l.seal==="multi"?2:1;t+=o}}return t===0?0:Math.pow(2,t)-1}function dy(e,n){return{enhancedBonus:iy(e,n),auraBonus:sy(e,n),mossBonus:uy(e,n),chargeBonus:ay(e,n)}}const py={activations:{sizeBonusActiveRelicId:null},chainMasterMultiplier:1,fullClearMultiplier:1,singleLineMultiplier:1,takenokoMultiplier:1,kaniMultiplier:1,renshaMultiplier:1,nobiTakenokoMultiplier:1,nobiKaniMultiplier:1,scriptLineBonus:0,timingMultiplier:1,copyTargetRelicId:null,copyMultiplier:1,copyBonus:0,copyLineBonus:0};function hy(e){return["chain_master","single_line","takenoko","kani","nobi_takenoko","nobi_kani","rensha","timing","full_clear_bonus"].includes(e)}function Xp(e,n,t,r=null,l=Math.random,o=[],i=null){const s=n.length,u=n.filter(O=>e[O.row][O.col].pattern==="charge").length,a=dy(e,n),{enhancedBonus:c,auraBonus:d,mossBonus:f,chargeBonus:p}=a,S=Q0(e,n,i),{multiBonus:y,scoreBonus:k,goldCount:m,arrowBonus:h}=S,g=s-u+c+d+p+y+h,v=r?J0(r):py,C=v.scriptLineBonus,F=v.copyLineBonus,_=t>0?t+C+F:t,R=g*_,z=fy(e,n),P=cy(e,n,l),{chainMasterMultiplier:b,fullClearMultiplier:V,singleLineMultiplier:K,takenokoMultiplier:x,kaniMultiplier:Q,renshaMultiplier:D,nobiTakenokoMultiplier:Z,nobiKaniMultiplier:I,timingMultiplier:$}=v,{copyTargetRelicId:N,copyMultiplier:j,copyBonus:le}=v,oe=v.activations.sizeBonusActiveRelicId!==null?s:0,Re=N!==null&&N.startsWith("size_bonus_")?oe:le,Be={chain_master:b,single_line:K,takenoko:x,kani:Q,nobi_takenoko:Z,nobi_kani:I,rensha:D,timing:$,full_clear_bonus:V},Ve=o.length>0?o:["chain_master","single_line","takenoko","kani","nobi_takenoko","nobi_kani","rensha","timing","full_clear_bonus"];let fe=g+k;for(const O of Ve)O.startsWith("size_bonus_")&&O===v.activations.sizeBonusActiveRelicId&&(fe+=oe),O===N&&Re>0&&!hy(O)&&O!=="script"&&(fe+=Re);fe+=z;let X=t*P+f;for(const O of Ve){O==="script"&&t>0&&C>0&&(X+=C),O==="script"&&N==="script"&&t>0&&F>0&&(X+=F);const _e=Be[O];_e!==void 0&&_e!==1&&(X*=_e),O===N&&j>1&&(X*=j)}const Y=Math.floor(fe*X);return{baseBlocks:s,enhancedBonus:c,auraBonus:d,mossBonus:f,multiBonus:y,arrowBonus:h,chargeBonus:p,totalBlocks:g,linesCleared:t,baseScore:R,comboBonus:z,luckyMultiplier:P,sealScoreBonus:k,goldCount:m,chainMasterMultiplier:b,sizeBonusTotal:oe,sizeBonusRelicId:v.activations.sizeBonusActiveRelicId,fullClearMultiplier:V,relicBonusTotal:oe+Re,singleLineMultiplier:K,takenokoMultiplier:x,kaniMultiplier:Q,renshaMultiplier:D,nobiTakenokoMultiplier:Z,nobiKaniMultiplier:I,scriptLineBonus:C,timingMultiplier:$,copyTargetRelicId:N,copyMultiplier:j,copyBonus:Re,copyLineBonus:F,blockPoints:fe,linePoints:X,finalScore:Y}}function my(e){const n=[],t=[];for(let r=0;r<te;r++)e[r].every(o=>o.filled)&&n.push(r);for(let r=0;r<te;r++)e.every(o=>o[r].filled)&&t.push(r);return{rows:n,columns:t}}function gy(e){const n=new Set,t=[];for(const r of e.rows)for(let l=0;l<te;l++){const o=`${l},${r}`;n.has(o)||(n.add(o),t.push({x:l,y:r,row:r,col:l}))}for(const r of e.columns)for(let l=0;l<te;l++){const o=`${r},${l}`;n.has(o)||(n.add(o),t.push({x:r,y:l,row:l,col:r}))}return t}function Kp(e,n){const t=gy(n);return K0(e,t)}function yy(e,n,t=null,r=Math.random,l=[]){const o=n.rows.length+n.columns.length;if(o===0)return{baseBlocks:0,enhancedBonus:0,auraBonus:0,mossBonus:0,multiBonus:0,arrowBonus:0,chargeBonus:0,totalBlocks:0,linesCleared:0,baseScore:0,comboBonus:0,luckyMultiplier:1,sealScoreBonus:0,goldCount:0,chainMasterMultiplier:1,sizeBonusTotal:0,sizeBonusRelicId:null,fullClearMultiplier:1,relicBonusTotal:0,singleLineMultiplier:1,takenokoMultiplier:1,kaniMultiplier:1,renshaMultiplier:1,nobiTakenokoMultiplier:1,nobiKaniMultiplier:1,scriptLineBonus:0,timingMultiplier:1,copyTargetRelicId:null,copyMultiplier:1,copyBonus:0,copyLineBonus:0,blockPoints:0,linePoints:0,finalScore:0};const i=Kp(e,n);return Xp(e,i,o,t,r,l,{rows:n.rows,columns:n.columns})}function Qp(e,n){const t=e.map(r=>r.map(l=>({...l})));for(const{row:r,col:l}of n)t[r][l]={filled:!1,blockSetId:null,pattern:null,seal:null,chargeValue:0};return t}const gu="copy";function Fn(e){const n=e.indexOf(gu);if(n<=0)return null;const t=e[n-1];return t===gu?null:t}function Sy(e){return e.includes(gu)?Fn(e)===null:!1}function vy(e,n){const t=Fn(e),r=Fn(n);return t!==r}const Zp=(e,n)=>({isAnimating:e.length>0,activatedRelics:e,startTime:Date.now(),duration:n}),ur={stepDuration:1e3,fastForwardDuration:200,countUpDuration:500,fadeInDuration:200,postAnimationDelay:1500};function wy(e,n){switch(e){case"chain_master":return n.chainMasterMultiplier;case"single_line":return n.singleLineMultiplier;case"takenoko":return n.takenokoMultiplier;case"kani":return n.kaniMultiplier;case"nobi_takenoko":return n.nobiTakenokoMultiplier;case"nobi_kani":return n.nobiKaniMultiplier;case"rensha":return n.renshaMultiplier;case"timing":return n.timingMultiplier;case"full_clear_bonus":return n.fullClearMultiplier;default:return 1}}function Vc(e){return["chain_master","single_line","takenoko","kani","nobi_takenoko","nobi_kani","rensha","timing","full_clear_bonus"].includes(e)}function Ft(e){return Number.isInteger(e)?String(e):e.toFixed(1)}function on(e,n){return`(${Ft(e)})  ${Ft(n)}`}function ky(e,n){const t=[];let r=e.baseBlocks,l=e.linesCleared;t.push({type:"base",label:"",formula:on(r,l),relicId:null}),e.enhancedBonus>0&&(r+=e.enhancedBonus,t.push({type:"pattern",label:"",formula:on(r,l),relicId:null})),e.auraBonus>0&&(r+=e.auraBonus,t.push({type:"pattern",label:"",formula:on(r,l),relicId:null})),e.chargeBonus>0&&(r+=e.chargeBonus,t.push({type:"pattern",label:"",formula:on(r,l),relicId:null})),e.multiBonus>0&&(r+=e.multiBonus,t.push({type:"seal",label:"",formula:on(r,l),relicId:null})),e.arrowBonus>0&&(r+=e.arrowBonus,t.push({type:"seal",label:"",formula:on(r,l),relicId:null})),e.sealScoreBonus>0&&(r+=e.sealScoreBonus,t.push({type:"seal",label:"",formula:on(r,l),relicId:null}));for(const i of n){if(i===e.sizeBonusRelicId&&e.sizeBonusTotal>0){r+=e.sizeBonusTotal;const s=un(i),u=(s==null?void 0:s.name)??i;t.push({type:"relic",label:`${u} +${e.sizeBonusTotal}`,formula:on(r,l),relicId:i})}if(i===e.copyTargetRelicId&&e.copyBonus>0&&!Vc(i)&&i!=="script"){r+=e.copyBonus;const s=un(i),u=(s==null?void 0:s.name)??i;t.push({type:"relic",label:` (${u}) +${e.copyBonus}`,formula:on(r,l),relicId:"copy"})}}e.comboBonus>0&&(r+=e.comboBonus,t.push({type:"pattern",label:"",formula:on(r,l),relicId:null})),e.luckyMultiplier>1&&(l*=e.luckyMultiplier,t.push({type:"pattern",label:" 2!",formula:on(r,l),relicId:null})),e.mossBonus>0&&(l+=e.mossBonus,t.push({type:"pattern",label:"",formula:on(r,l),relicId:null}));let o=l;for(const i of n){if(i==="script"&&(e.scriptLineBonus??0)>0){o+=e.scriptLineBonus;const s=un(i),u=(s==null?void 0:s.name)??i;t.push({type:"relic",label:`${u} +${e.scriptLineBonus}`,formula:on(r,o),relicId:i})}if(i==="script"&&e.copyTargetRelicId==="script"&&(e.copyLineBonus??0)>0){o+=e.copyLineBonus;const s=un(i),u=(s==null?void 0:s.name)??i;t.push({type:"relic",label:` (${u}) +${e.copyLineBonus}`,formula:on(r,o),relicId:"copy"})}if(Vc(i)){const s=wy(i,e);if(s!==1){const u=o;o*=s;const a=un(i),c=(a==null?void 0:a.name)??i;t.push({type:"relic",label:`${c} ${Ft(s)}`,formula:`${Ft(u)}  ${Ft(o)}`,relicId:i})}}if(i===e.copyTargetRelicId&&e.copyMultiplier>1){const s=o;o*=e.copyMultiplier;const u=un(i),a=(u==null?void 0:u.name)??i;t.push({type:"relic",label:` (${a}) ${Ft(e.copyMultiplier)}`,formula:`${Ft(s)}  ${Ft(o)}`,relicId:"copy"})}}return t.push({type:"result",label:"",formula:`+${e.finalScore}`,relicId:null}),t}const Cy=.25;function Ay(e){const n=jp[e];return(n==null?void 0:n.price)??0}function Fy(e){const n=Vp[e];return(n==null?void 0:n.price)??0}function jc(e){const n=e.shape.reduce((s,u)=>s+u.filter(Boolean).length,0),t=Array.from(e.blocks.values()),r=t.find(s=>s.pattern),l=t.find(s=>s.seal),o=r!=null&&r.pattern?Ay(r.pattern):0,i=l!=null&&l.seal?Fy(l.seal):0;return n+o+i}function Ry(e){return Math.floor(e*(1-Cy))}function wa(e){return Math.floor(e/2)}const Kr=2,Ql={sculpt:{id:"sculpt",type:"sculpt",name:"",description:"/",icon:"",minPrice:8,maxPrice:12},pattern_add:{id:"pattern_add",type:"pattern_add",name:"",description:"",icon:"",minPrice:6,maxPrice:10},seal_add:{id:"seal_add",type:"seal_add",name:"",description:"",icon:"",minPrice:5,maxPrice:9},vanish:{id:"vanish",type:"vanish",name:"",description:"1",icon:"",minPrice:4,maxPrice:7}},_y=["monomino","domino","tromino","tetromino"],Ty=["tetromino","pentomino","hexomino"],Ey={small_medium:.3,medium_large:.5},My={small_medium:.2,medium_large:.3};function Py(e,n){const t=Math.floor(n.next()*e.length),r=e[t],l=p0[r],o=Math.floor(n.next()*l.length);return l[o]}function xc(e){const n=Math.floor(e.next()*pi.length);return pi[n]}function Xc(e){const n=Math.floor(e.next()*di.length);return di[n]}function Kc(e,n,t,r){const l=Py(e,t),o=(r==null?void 0:r.pattern)??Ey[n],i=(r==null?void 0:r.seal)??My[n],s=o>0&&t.next()<o,u=i>0&&t.next()<i;if(s&&u){const a=xc(t),c=Xc(t);return y0(l,a,c,t)}if(s){const a=xc(t);return ya(l,a)}if(u){const a=Xc(t);return g0(l,a,t)}return fi(l)}function Iy(e,n){const t=Kc(_y,"small_medium",e,n),r=Kc(Ty,"medium_large",e,n),l=jc(t),o=jc(r);return[{type:"block",piece:t,price:l,originalPrice:l,purchased:!1,onSale:!1},{type:"block",piece:r,price:o,originalPrice:o,purchased:!1,onSale:!1}]}function By(e,n,t=3){const l=Object.keys(mt).filter(s=>!n.includes(s));if(l.length===0)return[];const o=[...l].sort(()=>e.next()-.5);return o.slice(0,Math.min(t,o.length)).map(s=>{const u=mt[s];return{type:"relic",relicId:u.id,price:u.price,originalPrice:u.price,purchased:!1,onSale:!1}})}function Ly(e){const n=Object.keys(Ql),t=Math.floor(e.next()*n.length),r=n[t],l=Ql[r],o=l.maxPrice-l.minPrice,i=l.minPrice+Math.floor(e.next()*(o+1));return{type:"amulet",amuletId:l.id,amuletType:l.type,name:l.name,description:l.description,icon:l.icon,price:i,originalPrice:i,purchased:!1,onSale:!1}}function Dy(e,n){if(e.length===0)return e;const t=Math.floor(n.next()*e.length);return e.map((r,l)=>{if(l!==t)return r;const o=Ry(r.originalPrice);return{...r,price:o,onSale:!0}})}function Qc(e,n=[],t){const r=Iy(e,t),l=By(e,n);let o=[...l];if(l.length>0&&e.next()<.3){const u=Ly(e);o=[...l.slice(0,-1),u]}const i=[...r,...o];return{items:Dy(i,e),rerollCount:0,sellMode:!1,pendingPurchaseIndex:null}}function ka(e){return G.rerollInitialCost+e*G.rerollCostIncrement}function at(e,n){return e>=n}function Zc(e,n){return{...e,items:e.items.map((t,r)=>r===n?{...t,purchased:!0}:t)}}function Oy(e,n){return{...e,cards:Sa([...e.allMinos],n)}}function zy(e){return[...e].sort((n,t)=>n.row!==t.row?n.row-t.row:n.col-t.col)}function Ny(e,n){const t=new Set(n.columns),r=[],l=[];for(const o of e)t.has(o.col)?r.push(o):l.push(o);return r.sort((o,i)=>o.col!==i.col?o.col-i.col:o.row-i.row),l.sort((o,i)=>o.row!==i.row?o.row-i.row:o.col-i.col),[...r,...l]}function Jp(e,n,t){if(e.length===0)return{sortedCells:[],totalDuration:0};const r=t?Ny(e,t):zy(e),{perCellDuration:l,maxTotalDuration:o,minStaggerDelay:i,maxStaggerDelay:s}=Bi,u=r.length,a=u<=1?0:Math.min(s,Math.max(i,(o-l)/(u-1))),c=r.map((p,S)=>{const y=n[p.row][p.col];return{...p,delay:S*a,pattern:y.pattern,seal:y.seal,chargeValue:y.chargeValue}}),f=(c.length>0?c[c.length-1].delay??0:0)+l;return{sortedCells:c,totalDuration:f}}function by(e,n){const t=Wn(e);if(!t)return null;const r=Math.floor(n.next()*pi.length),l=pi[r];return ya(t,l)}function $y(e,n){const t=Math.floor(n.next()*di.length),r=di[t],l=[];if(e.shape.forEach((u,a)=>{u.forEach((c,d)=>{c&&l.push({row:a,col:d})})}),l.length===0)return e;const o=Math.floor(n.next()*l.length),i=l[o],s=vn.setSeal(e.blocks,i.row,i.col,r);return{...e,blocks:s}}function Wy(e,n){return{...e,cards:e.cards.filter(t=>t!==n),allMinos:e.allMinos.filter(t=>t!==n),purchasedPieces:(()=>{const t=new Map(e.purchasedPieces);return t.delete(n),t})()}}function Hy(e,n){const t=new Map,r=e.blocks;return n.forEach((l,o)=>{l.forEach((i,s)=>{if(i){const u=`${o},${s}`,a=r.get(u);if(a)t.set(u,a);else{const c=Array.from(r.values())[0];t.set(u,{pattern:(c==null?void 0:c.pattern)??null,seal:null})}}})}),{...e,shape:n,blocks:t}}function qp(e){const n=[];if(e.forEach((o,i)=>{o.forEach((s,u)=>{s&&n.push({row:i,col:u})})}),n.length===0)return!1;const t=new Set,r=[n[0]];t.add(`${n[0].row},${n[0].col}`);const l=[{row:-1,col:0},{row:1,col:0},{row:0,col:-1},{row:0,col:1}];for(;r.length>0;){const o=r.shift();for(const i of l){const s=o.row+i.row,u=o.col+i.col,a=`${s},${u}`;!t.has(a)&&s>=0&&s<e.length&&u>=0&&u<e[0].length&&e[s][u]&&(t.add(a),r.push({row:s,col:u}))}}return t.size===n.length}function Uy(e){const n=te*2,t=Math.floor(e()*n);let r=Math.floor(e()*(n-1));return r>=t&&r++,{target1:Jc(t),target2:Jc(r)}}function Jc(e){return e<te?{type:"row",index:e}:{type:"col",index:e-te}}function qc(e,n,t){let r=e;return ue(n,"rensha")&&(r=I0(r,t)),r}function ef(e,n,t){if(!e||!e.targetRelicId)return e;const r=e.targetRelicId;let l=e;if(r==="bandaid"&&n){const o=l.bandaidCounter+1;o>=3?l={...l,bandaidCounter:0}:l={...l,bandaidCounter:o}}return r==="rensha"&&(t===0?l={...l,renshaMultiplier:1}:l={...l,renshaMultiplier:l.renshaMultiplier+He.RENSHA_INCREMENT}),l}function eh(e,n,t){var o;const r=ky(e,n);if(r.length===0)return null;const l=Date.now();return{isAnimating:!0,steps:r,currentStepIndex:0,stepStartTime:l,stepDuration:ur.stepDuration,isFastForward:!1,highlightedRelicId:((o=r[0])==null?void 0:o.relicId)??null,finalScore:e.finalScore,scoreGain:e.finalScore,startingScore:t,isCountingUp:!1,countStartTime:0}}function Yy(e){let n=0;for(const t of e.shape)for(const r of t)r&&n++;return n}function Gy(e){const n=[];return e.enhancedBonus>0&&n.push({source:"pattern:enhanced",amount:e.enhancedBonus}),e.auraBonus>0&&n.push({source:"pattern:aura",amount:e.auraBonus}),e.mossBonus>0&&n.push({source:"pattern:moss",amount:e.mossBonus}),e.chargeBonus>0&&n.push({source:"pattern:charge",amount:e.chargeBonus}),e.comboBonus>0&&n.push({source:"pattern:combo",amount:e.comboBonus}),e.luckyMultiplier>1&&n.push({source:"pattern:lucky",amount:0,multiplier:e.luckyMultiplier}),e.arrowBonus>0&&n.push({source:"seal:arrow",amount:e.arrowBonus}),e.sealScoreBonus>0&&n.push({source:"seal:score",amount:e.sealScoreBonus}),e.chainMasterMultiplier>1&&n.push({source:"relic:chain_master",amount:0,multiplier:e.chainMasterMultiplier}),e.sizeBonusTotal>0&&e.sizeBonusRelicId&&n.push({source:`relic:${e.sizeBonusRelicId}`,amount:e.sizeBonusTotal}),e.fullClearMultiplier>1&&n.push({source:"relic:full_clear_bonus",amount:0,multiplier:e.fullClearMultiplier}),e.timingMultiplier>1&&n.push({source:"relic:timing",amount:0,multiplier:e.timingMultiplier}),n}function nh(e){for(const n of e)for(const t of n)if(t.filled)return!1;return!0}function Vy(e){const n=[];for(let t=0;t<te;t++)for(let r=0;r<te;r++)e[t][r].filled&&n.push({x:r,y:t,row:t,col:r});return n}function th(e,n,t=!1,r=!1,l=null){const o=t?n:A0(n);let i=[...e];if(r&&o.remainingHands>0){const a=i.findIndex(c=>c.piece===null);if(a>=0){const c=Wn("mono-1");if(c){const d=ya(c,"nohand");i[a]={...i[a],piece:d}}}}if(!mu(i)||o.remainingHands===0)return{finalSlots:i,finalDeck:o};const s=xr(l),u=Xr(o,s);return{finalSlots:u.slots,finalDeck:u.newDeck}}function rh(e,n,t,r,l,o=null){let i=n,s=t;for(;;){const u=i.filter(S=>S.piece!==null);if(u.length===0||i.some(S=>S.piece&&cs(e,S.piece.shape,st(S.piece)))||s.stockSlot&&cs(e,s.stockSlot.shape,st(s.stockSlot))||s.stockSlot2&&cs(e,s.stockSlot2.shape,st(s.stockSlot2)))break;const c=u.length,d=Math.max(0,s.remainingHands-c);if(s={...s,remainingHands:d},d<=0)return{finalSlots:i,finalDeck:s,phase:Kl(r,l,0)};const f=xr(o),p=Xr(s,f);i=p.slots,s=p.newDeck}return{finalSlots:i,finalDeck:s,phase:Kl(r,l,s.remainingHands)}}function jy(e,n,t,r){if(n.phase!=="game_over"||!ue(e.player.ownedRelics,"volcano")||!e.volcanoEligible)return null;const l=Vy(t);if(l.length===0)return null;const{sortedCells:o,totalDuration:i}=Jp(l,t),s={ownedRelics:e.player.ownedRelics,totalLines:te*2,rowLines:te,colLines:te,placedBlockSize:0,isBoardEmptyAfterClear:!0,relicMultiplierState:r,completedRows:Array.from({length:te},(m,h)=>h),completedCols:Array.from({length:te},(m,h)=>h),scriptRelicLines:null,copyRelicState:r.copyRelicState,remainingHands:n.finalDeck.remainingHands},u=Xp(t,o,te,s,Math.random,e.player.relicDisplayOrder),a=e.score+u.finalScore,c=u.goldCount,d=Pr(e.player,c),f=Kl(a,e.targetScore,0),p={isAnimating:!0,cells:o,startTime:Date.now(),duration:i,perCellDuration:Bi.perCellDuration},S=xp(u),y=Zp([{relicId:"volcano",bonusValue:`+${u.finalScore}`},...S],ga.duration),k=eh(u,e.player.relicDisplayOrder,e.score);return{success:!0,newState:{...e,board:t,pieceSlots:n.finalSlots,dragState:Ee,deck:n.finalDeck,phase:f,relicMultiplierState:r,clearingAnimation:p,relicActivationAnimation:y,scoreAnimation:k,score:a,player:d,volcanoEligible:!1}}}function fs(e,n,t,r,l){const o=_p(e.board,n,t);Yg(n,$g(t),o);const i=st(n)==="nohand",s=!i,{newState:u,shouldTrigger:a}=ue(e.player.ownedRelics,"bandaid")?D0(e.relicMultiplierState,s):{newState:e.relicMultiplierState,shouldTrigger:!1},{finalSlots:c,finalDeck:d}=th(r,l,i,a,e.roundInfo),f=my(o),p=f.rows.length+f.columns.length;if(p>0){const g=Kp(o,f),{sortedCells:v,totalDuration:C}=Jp(g,o,f);Gg(f.rows,f.columns,v.map(oe=>({position:{row:oe.row,col:oe.col},cell:o[oe.row][oe.col]})));const F=Qp(o,v);let _=u;ue(e.player.ownedRelics,"nobi_takenoko")&&(_=B0(_,f.rows.length,f.columns.length)),ue(e.player.ownedRelics,"nobi_kani")&&(_=L0(_,f.rows.length,f.columns.length));let R=_.copyRelicState;if(R&&R.targetRelicId){const oe=R.targetRelicId;oe==="nobi_takenoko"&&(f.rows.length>0?R={...R,nobiTakenokoMultiplier:1}:f.columns.length>0&&(R={...R,nobiTakenokoMultiplier:R.nobiTakenokoMultiplier+.5})),oe==="nobi_kani"&&(f.columns.length>0?R={...R,nobiKaniMultiplier:1}:f.rows.length>0&&(R={...R,nobiKaniMultiplier:R.nobiKaniMultiplier+.5})),_={..._,copyRelicState:R}}const z={ownedRelics:e.player.ownedRelics,totalLines:p,rowLines:f.rows.length,colLines:f.columns.length,placedBlockSize:Yy(n),isBoardEmptyAfterClear:nh(F),relicMultiplierState:_,completedRows:f.rows,completedCols:f.columns,scriptRelicLines:e.scriptRelicLines,copyRelicState:R,remainingHands:d.remainingHands},P=yy(o,f,z,Math.random,e.player.relicDisplayOrder),b=P.finalScore,V=e.score+b,K=P.goldCount,x=Pr(e.player,K),Q=Kl(V,e.targetScore,d.remainingHands),D=eh(P,e.player.relicDisplayOrder,e.score);jg(P.baseScore,Gy(P),b),su(K,"seal:gold");const Z=xp(P);for(const oe of Z)Xg(oe.relicId,oe.relicId,typeof oe.bonusValue=="number"?oe.bonusValue:0);const I=Z.length>0?Zp(Z,ga.duration):null,$=qc(_,e.player.ownedRelics,p),N=ef($.copyRelicState,s,p),j=cu(o,n.blockSetId),le=D!==null&&Q!=="playing";return{success:!0,newState:{...e,board:j,pieceSlots:c,dragState:Ee,clearingAnimation:{isAnimating:!0,cells:v,startTime:Date.now(),duration:C,perCellDuration:Bi.perCellDuration},relicActivationAnimation:I,scoreAnimation:D,score:V,player:x,deck:d,phase:le?"playing":Q,pendingPhase:le?Q:null,relicMultiplierState:{...$,copyRelicState:N},volcanoEligible:!1}}}const S=qc(u,e.player.ownedRelics,0),y=ef(S.copyRelicState,s,0),k=rh(o,c,d,e.score,e.targetScore,e.roundInfo),m=jy(e,k,o,S);if(m)return m;const h=cu(o,n.blockSetId);return{success:!0,newState:{...e,board:h,pieceSlots:k.finalSlots,dragState:Ee,deck:k.finalDeck,phase:k.phase,relicMultiplierState:{...S,copyRelicState:y}}}}function xy(e,n){const t=n.id.replace(/-\d+-[a-z0-9]+$/,""),r=Array.from(n.blocks.values()).some(o=>o.pattern||o.seal);let l=e.purchasedPieces;if(r){const o=new Map(e.purchasedPieces);o.set(t,n),l=o}return{...e,cards:[...e.cards,t],allMinos:[...e.allMinos,t],purchasedPieces:l}}function Xy(e){var f;const n=new er,t=e.round+1,r=Hp(t,n),l=Up(r),o=xr(r),i={cards:Oy(e.deck,n).cards,allMinos:e.deck.allMinos,remainingHands:l,purchasedPieces:e.deck.purchasedPieces,stockSlot:null,stockSlot2:null},{slots:s,newDeck:u}=Xr(i,o,n);let a=Rp();if(((f=r.bossCondition)==null?void 0:f.id)==="obstacle")for(let p=0;p<Np;p++)a=Tp(a,n);const c=bp(t),d=ue(e.player.ownedRelics,"script")?Uy(()=>n.next()):null;return xg(t,c),{board:a,pieceSlots:s,dragState:Ee,score:0,clearingAnimation:null,relicActivationAnimation:null,scoreAnimation:null,deck:u,phase:"round_progress",pendingPhase:null,round:t,roundInfo:r,player:e.player,targetScore:c,shopState:null,relicMultiplierState:{...Ir,copyRelicState:e.relicMultiplierState.copyRelicState?tt(e.relicMultiplierState.copyRelicState.targetRelicId):null},scriptRelicLines:d,deckViewOpen:!1,volcanoEligible:!0,amuletModal:null}}function Ky(e,n){var t,r,l;switch(n.type){case"UI/START_DRAG":{const o=e.pieceSlots[n.slotIndex];return o!=null&&o.piece?{...e,dragState:{isDragging:!0,pieceId:o.piece.id,slotIndex:n.slotIndex,dragSource:"hand",currentPos:n.startPos,startPos:n.startPos,boardPos:null}}:e}case"UI/START_DRAG_FROM_STOCK":{const o=e.deck.stockSlot;return o?{...e,dragState:{isDragging:!0,pieceId:o.id,slotIndex:null,dragSource:"stock",currentPos:n.startPos,startPos:n.startPos,boardPos:null}}:e}case"UI/START_DRAG_FROM_STOCK2":{const o=e.deck.stockSlot2;return o?{...e,dragState:{isDragging:!0,pieceId:o.id,slotIndex:null,dragSource:"stock2",currentPos:n.startPos,startPos:n.startPos,boardPos:null}}:e}case"UI/UPDATE_DRAG":return e.dragState.isDragging?{...e,dragState:{...e.dragState,currentPos:n.currentPos,boardPos:n.boardPos}}:e;case"UI/END_DRAG":{if(!e.dragState.isDragging)return{...e,dragState:Ee};if(e.dragState.dragSource==="stock2"){const u=e.deck.stockSlot2;if(!u)return{...e,dragState:Ee};const a=e.dragState.boardPos;if(e.phase==="playing"&&a&&Br(e.board,u.shape,a,st(u))){const c={...e.deck,stockSlot2:null},d=[...e.pieceSlots];return fs(e,u,a,d,c).newState}return{...e,dragState:Ee}}if(e.dragState.dragSource==="stock"){const u=e.deck.stockSlot;if(!u)return{...e,dragState:Ee};const a=e.dragState.boardPos;if(e.phase==="playing"&&a&&Br(e.board,u.shape,a,st(u))){const c={...e.deck,stockSlot:null},d=[...e.pieceSlots];return fs(e,u,a,d,c).newState}return{...e,dragState:Ee}}if(e.dragState.slotIndex===null)return{...e,dragState:Ee};if(e.phase!=="playing")return{...e,dragState:Ee};const o=e.dragState.slotIndex,i=e.pieceSlots[o],s=e.dragState.boardPos;if(i!=null&&i.piece&&s&&Br(e.board,i.piece.shape,s,st(i.piece))){const u=e.pieceSlots.map((c,d)=>d===o?{...c,piece:null}:c);return fs(e,i.piece,s,u,e.deck).newState}return{...e,dragState:Ee}}case"BOARD/PLACE_PIECE":{const o=e.pieceSlots[n.slotIndex];if(!(o!=null&&o.piece)||e.phase!=="playing"||!Br(e.board,o.piece.shape,n.position,st(o.piece)))return e;const i=_p(e.board,o.piece,n.position),s=e.pieceSlots.map((f,p)=>p===n.slotIndex?{...f,piece:null}:f),{finalSlots:u,finalDeck:a}=th(s,e.deck,!1,!1,e.roundInfo),c=Kl(e.score,e.targetScore,a.remainingHands),d=cu(i,o.piece.blockSetId);return{...e,board:d,pieceSlots:u,deck:a,phase:c}}case"GAME/RESET":return Xl(),Gp();case"ANIMATION/END_CLEAR":{if(!e.clearingAnimation)return e;const o=Qp(e.board,e.clearingAnimation.cells);Vg(e.clearingAnimation.cells.map(u=>({position:{row:u.row,col:u.col},cell:e.board[u.row][u.col]})),nh(o));const i=rh(o,[...e.pieceSlots],e.deck,e.score,e.targetScore,e.roundInfo),s=((t=e.scoreAnimation)==null?void 0:t.isAnimating)===!0&&i.phase!=="playing";return{...e,board:o,clearingAnimation:null,pieceSlots:i.finalSlots,deck:i.finalDeck,phase:s?e.phase:i.phase,pendingPhase:s?i.phase:e.pendingPhase}}case"ANIMATION/END_RELIC_ACTIVATION":return{...e,relicActivationAnimation:null};case"ANIMATION/ADVANCE_SCORE_STEP":{if(!((r=e.scoreAnimation)!=null&&r.isAnimating))return e;const o=e.scoreAnimation.currentStepIndex+1;if(o>=e.scoreAnimation.steps.length)return{...e,scoreAnimation:{...e.scoreAnimation,isCountingUp:!0,countStartTime:Date.now()}};const i=e.scoreAnimation.steps[o];return{...e,scoreAnimation:{...e.scoreAnimation,currentStepIndex:o,stepStartTime:Date.now(),highlightedRelicId:(i==null?void 0:i.relicId)??null}}}case"ANIMATION/END_SCORE":return e.scoreAnimation?{...e,scoreAnimation:null}:e;case"PHASE/APPLY_PENDING":return e.pendingPhase?{...e,phase:e.pendingPhase,pendingPhase:null}:e;case"ANIMATION/SET_FAST_FORWARD":return(l=e.scoreAnimation)!=null&&l.isAnimating?{...e,scoreAnimation:{...e.scoreAnimation,isFastForward:n.isFastForward,stepDuration:n.isFastForward?ur.fastForwardDuration:ur.stepDuration}}:e;case"RELIC/REORDER":{if(n.fromIndex===n.toIndex)return e;const o=e.player.relicDisplayOrder,i=o[n.fromIndex];if(!i)return e;const s=[...o.slice(0,n.fromIndex),...o.slice(n.fromIndex+1)],u=[...s.slice(0,n.toIndex),i,...s.slice(n.toIndex)];let a=e.relicMultiplierState.copyRelicState;if(a&&ue(e.player.ownedRelics,"copy")){const c=Fn(u);vy(o,u)?a=tt(c):a={...a,targetRelicId:c}}return{...e,player:{...e.player,relicDisplayOrder:u},relicMultiplierState:{...e.relicMultiplierState,copyRelicState:a}}}case"ROUND/ADVANCE":{if(e.phase!=="round_clear")return e;if(E0(e.round)){const c=pu(e.deck.remainingHands,e.roundInfo.roundType),d=hu(e.player.gold),f=c+d;return Hc(e.round,e.score,f),su(f,"round_clear"),Xl(),{...e,phase:"game_clear",player:Pr(e.player,f),shopState:null}}const o=new er,i=pu(e.deck.remainingHands,e.roundInfo.roundType),s=hu(e.player.gold),u=i+s;Hc(e.round,e.score,u),su(u,"round_clear");const a={...e,phase:"shopping",player:Pr(e.player,u),shopState:Qc(o,e.player.ownedRelics,n.probabilityOverride)};return Te(a),a}case"SHOP/BUY_ITEM":{if(e.phase!=="shopping"||!e.shopState)return e;const{itemIndex:o}=n;if(o<0||o>=e.shopState.items.length)return e;const i=e.shopState.items[o];if(i.purchased||!at(e.player.gold,i.price))return e;const s=Zc(e.shopState,o);let u=as(e.player,i.price),a=e.deck;if(da(i)&&(a=xy(e.deck,i.piece)),ai(i)){if(u.amuletStock.length>=Kr)return e;const f={id:i.amuletId,type:i.amuletType,name:i.name,description:i.description,icon:i.icon,price:i.price};u={...u,amuletStock:[...u.amuletStock,f]}}let c=e.relicMultiplierState;if(jr(i)){if(e.player.ownedRelics.length>=uu){const f={...e,shopState:{...e.shopState,sellMode:!0,pendingPurchaseIndex:o}};return Te(f),f}if(u=us(u,i.relicId),i.relicId==="copy"){const f=Fn(u.relicDisplayOrder);c={...c,copyRelicState:tt(f)}}}const d={...e,player:u,deck:a,shopState:s,relicMultiplierState:c};return Te(d),d}case"SHOP/REROLL":{if(e.phase!=="shopping"||!e.shopState)return e;const o=ka(e.shopState.rerollCount);if(!at(e.player.gold,o))return e;const i=as(e.player,o),s=new er,u=Qc(s,i.ownedRelics),a={...e,player:i,shopState:{...u,rerollCount:e.shopState.rerollCount+1}};return Te(a),a}case"SHOP/START_SELL_MODE":{if(e.phase!=="shopping"||!e.shopState)return e;const o={...e,shopState:{...e.shopState,sellMode:!0}};return Te(o),o}case"SHOP/CANCEL_SELL_MODE":{if(e.phase!=="shopping"||!e.shopState)return e;const o={...e,shopState:{...e.shopState,sellMode:!1,pendingPurchaseIndex:null}};return Te(o),o}case"SHOP/SELL_RELIC":{if(e.phase!=="shopping"||!e.shopState)return e;const{relicIndex:o}=n,i=e.player.relicDisplayOrder[o];if(!i)return e;const s=i,u=mt[s];if(!u)return e;const a=wa(u.price);let c=Wg(e.player,i);c=Pr(c,a);let d=e.deck;s==="hand_stock"&&(d={...e.deck,stockSlot:null,stockSlot2:null});let f=e.relicMultiplierState;if(i==="copy")f={...f,copyRelicState:null};else if(ue(c.ownedRelics,"copy")){const S=Fn(c.relicDisplayOrder);f={...f,copyRelicState:tt(S)}}if(e.shopState.pendingPurchaseIndex!==null){const S=e.shopState.pendingPurchaseIndex,y=e.shopState.items[S];if(y&&!y.purchased&&jr(y)&&at(c.gold,y.price)&&c.ownedRelics.length<uu){if(c=as(c,y.price),c=us(c,y.relicId),y.relicId==="copy"){const h=Fn(c.relicDisplayOrder);f={...f,copyRelicState:tt(h)}}else if(ue(c.ownedRelics,"copy")){const h=Fn(c.relicDisplayOrder);f={...f,copyRelicState:tt(h)}}const k=Zc(e.shopState,S),m={...e,player:c,deck:d,shopState:{...k,sellMode:!1,pendingPurchaseIndex:null},relicMultiplierState:f};return Te(m),m}}const p={...e,player:c,deck:d,shopState:{...e.shopState,sellMode:!1,pendingPurchaseIndex:null},relicMultiplierState:f};return Te(p),p}case"SHOP/LEAVE":{if(e.phase!=="shopping")return e;const o=Xy(e);return Te(o),o}case"ROUND/START":{if(e.phase!=="round_progress")return e;const o={...e,phase:"playing"};return Te(o),o}case"ROUND/SHOW_PROGRESS":{if(e.phase!=="shopping")return e;const o={...e,phase:"round_progress",shopState:null};return Te(o),o}case"UI/OPEN_DECK_VIEW":return e.phase==="round_clear"||e.phase==="game_over"||e.phase==="game_clear"||e.phase==="shopping"?e:{...e,deckViewOpen:!0};case"UI/CLOSE_DECK_VIEW":return{...e,deckViewOpen:!1};case"STOCK/MOVE_TO_STOCK":{if(e.phase!=="playing"||n.slotIndex<0||n.slotIndex>=e.pieceSlots.length)return e;const o=e.pieceSlots[n.slotIndex];if(!(o!=null&&o.piece))return e;const i=o.piece,s=e.deck.stockSlot,u=e.pieceSlots.map((c,d)=>d===n.slotIndex?{...c,piece:s}:c),a={...e.deck,stockSlot:i};if(mu(u)&&a.remainingHands>0){const c=xr(e.roundInfo),d=Xr(a,c);return{...e,pieceSlots:d.slots,deck:d.newDeck,dragState:Ee}}return{...e,pieceSlots:u,deck:a,dragState:Ee}}case"STOCK/MOVE_FROM_STOCK":{if(e.phase!=="playing"||n.targetSlotIndex<0||n.targetSlotIndex>=e.pieceSlots.length)return e;const o=e.deck.stockSlot;if(!o)return e;const i=e.pieceSlots[n.targetSlotIndex];if(i!=null&&i.piece)return e;const s=e.pieceSlots.map((u,a)=>a===n.targetSlotIndex?{...u,piece:o}:u);return{...e,pieceSlots:s,deck:{...e.deck,stockSlot:null},dragState:Ee}}case"STOCK/SWAP":{if(e.phase!=="playing"||n.slotIndex<0||n.slotIndex>=e.pieceSlots.length)return e;const o=e.pieceSlots[n.slotIndex];if(!(o!=null&&o.piece))return e;const i=e.deck.stockSlot;if(!i)return e;const s=e.pieceSlots.map((u,a)=>a===n.slotIndex?{...u,piece:i}:u);return{...e,pieceSlots:s,deck:{...e.deck,stockSlot:o.piece},dragState:Ee}}case"STOCK/MOVE_TO_STOCK2":{if(e.phase!=="playing"||n.slotIndex<0||n.slotIndex>=e.pieceSlots.length)return e;const o=e.pieceSlots[n.slotIndex];if(!(o!=null&&o.piece))return e;const i=o.piece,s=e.deck.stockSlot2,u=e.pieceSlots.map((c,d)=>d===n.slotIndex?{...c,piece:s}:c),a={...e.deck,stockSlot2:i};if(mu(u)&&a.remainingHands>0){const c=xr(e.roundInfo),d=Xr(a,c);return{...e,pieceSlots:d.slots,deck:d.newDeck,dragState:Ee}}return{...e,pieceSlots:u,deck:a,dragState:Ee}}case"STOCK/MOVE_FROM_STOCK2":{if(e.phase!=="playing"||n.targetSlotIndex<0||n.targetSlotIndex>=e.pieceSlots.length)return e;const o=e.deck.stockSlot2;if(!o)return e;const i=e.pieceSlots[n.targetSlotIndex];if(i!=null&&i.piece)return e;const s=e.pieceSlots.map((u,a)=>a===n.targetSlotIndex?{...u,piece:o}:u);return{...e,pieceSlots:s,deck:{...e.deck,stockSlot2:null},dragState:Ee}}case"STOCK/SWAP2":{if(e.phase!=="playing"||n.slotIndex<0||n.slotIndex>=e.pieceSlots.length)return e;const o=e.pieceSlots[n.slotIndex];if(!(o!=null&&o.piece))return e;const i=e.deck.stockSlot2;if(!i)return e;const s=e.pieceSlots.map((u,a)=>a===n.slotIndex?{...u,piece:i}:u);return{...e,pieceSlots:s,deck:{...e.deck,stockSlot2:o.piece},dragState:Ee}}case"DEBUG/ADD_RELIC":{const o=n.relicType,i=us(e.player,o);let s=e.relicMultiplierState;if(o==="copy"){const a=Fn(i.relicDisplayOrder);s={...s,copyRelicState:tt(a)}}if(o!=="copy"&&ue(i.ownedRelics,"copy")){const a=Fn(i.relicDisplayOrder),c=s.copyRelicState;c&&c.targetRelicId!==a&&(s={...s,copyRelicState:tt(a)})}const u={...e,player:i,relicMultiplierState:s};return Te(u),u}case"DEBUG/REMOVE_RELIC":{const o=n.relicType,i=kp(e.player,o);let s=e.deck;n.relicType==="hand_stock"&&e.deck.stockSlot&&(s={...e.deck,stockSlot:null});let u=e.relicMultiplierState;if(o==="copy"&&(u={...u,copyRelicState:null}),o!=="copy"&&ue(i.ownedRelics,"copy")){const c=Fn(i.relicDisplayOrder);u={...u,copyRelicState:tt(c)}}const a={...e,player:i,deck:s,relicMultiplierState:u};return Te(a),a}case"DEBUG/ADD_GOLD":{const o=Math.max(0,e.player.gold+n.amount),i={...e.player,gold:o},s={...e,player:i};return Te(s),s}case"DEBUG/ADD_SCORE":{const o=Math.max(0,e.score+n.amount),i={...e,score:o};return Te(i),i}case"AMULET/USE":{if(e.phase!=="playing"&&e.phase!=="shopping"||e.amuletModal)return e;const{amuletIndex:o}=n,i=e.player.amuletStock[o];if(!i)return e;const s={amuletType:i.type,amuletIndex:o,step:"select_piece",selectedMinoId:null,editingShape:null};return{...e,amuletModal:s}}case"AMULET/SELECT_PIECE":{if(!e.amuletModal||e.amuletModal.step!=="select_piece")return e;const{minoId:o}=n,i=e.amuletModal;if(i.amuletType==="sculpt"){const s=Wn(o);if(!s)return e;const u=e.deck.purchasedPieces.get(o),a=u?u.shape:s.shape;return{...e,amuletModal:{...i,step:"sculpt_edit",selectedMinoId:o,editingShape:a.map(c=>[...c])}}}if(i.amuletType==="vanish"){const s=Wy(e.deck,o),u=e.player.amuletStock.filter((c,d)=>d!==i.amuletIndex),a={...e,deck:s,player:{...e.player,amuletStock:u},amuletModal:null};return Te(a),a}if(i.amuletType==="pattern_add"){const s=new er,u=by(o,s);if(!u)return e;const a=new Map(e.deck.purchasedPieces);a.set(o,u);const c=e.player.amuletStock.filter((f,p)=>p!==i.amuletIndex),d={...e,deck:{...e.deck,purchasedPieces:a},player:{...e.player,amuletStock:c},amuletModal:null};return Te(d),d}if(i.amuletType==="seal_add"){const s=new er,u=Wn(o);if(!u)return e;const c=e.deck.purchasedPieces.get(o)??fi(u),d=$y(c,s),f=new Map(e.deck.purchasedPieces);f.set(o,d);const p=e.player.amuletStock.filter((y,k)=>k!==i.amuletIndex),S={...e,deck:{...e.deck,purchasedPieces:f},player:{...e.player,amuletStock:p},amuletModal:null};return Te(S),S}return e}case"AMULET/CONFIRM":{if(!e.amuletModal||e.amuletModal.step!=="sculpt_edit")return e;const o=e.amuletModal;if(!o.editingShape||!o.selectedMinoId||!qp(o.editingShape)||o.editingShape.reduce((S,y)=>S+y.filter(Boolean).length,0)===0)return e;const s=Wn(o.selectedMinoId);if(!s)return e;const a=e.deck.purchasedPieces.get(o.selectedMinoId)??fi(s),c=Hy(a,o.editingShape),d=new Map(e.deck.purchasedPieces);d.set(o.selectedMinoId,c);const f=e.player.amuletStock.filter((S,y)=>y!==o.amuletIndex),p={...e,deck:{...e.deck,purchasedPieces:d},player:{...e.player,amuletStock:f},amuletModal:null};return Te(p),p}case"AMULET/CANCEL":return{...e,amuletModal:null};case"AMULET/SELL":{if(e.phase!=="shopping")return e;const{amuletIndex:o}=n,i=e.player.amuletStock[o];if(!i)return e;const s=Math.floor(i.price/2),u=e.player.amuletStock.filter((d,f)=>f!==o),a=Pr({...e.player,amuletStock:u},s),c={...e,player:a};return Te(c),c}case"AMULET/SCULPT_TOGGLE_BLOCK":{if(!e.amuletModal||e.amuletModal.step!=="sculpt_edit"||!e.amuletModal.editingShape)return e;const{row:o,col:i}=n,s=e.amuletModal.editingShape;if(o<0||o>=s.length||i<0||i>=s[0].length)return e;const u=s.map((a,c)=>a.map((d,f)=>c===o&&f===i?!d:d));return{...e,amuletModal:{...e.amuletModal,editingShape:u}}}case"DEBUG/ADD_AMULET":{if(e.player.amuletStock.length>=Kr)return e;const o=Ql[n.amuletType];if(!o)return e;const i={id:o.id,type:o.type,name:o.name,description:o.description,icon:o.icon,price:o.minPrice},s={...e.player,amuletStock:[...e.player.amuletStock,i]},u={...e,player:s};return Te(u),u}case"DEBUG/REMOVE_AMULET":{const{amuletIndex:o}=n;if(o<0||o>=e.player.amuletStock.length)return e;const i=e.player.amuletStock.filter((a,c)=>c!==o),s={...e.player,amuletStock:i},u={...e,player:s};return Te(u),u}default:return e}}const Qy={patternProbability:30,sealProbability:20};function Zy(){const[e,n]=L.useReducer(Ky,null,Gp),[t,r]=L.useState(Qy),l=L.useCallback((O,_e)=>{n({type:"UI/START_DRAG",slotIndex:O,startPos:_e})},[]),o=L.useCallback(O=>{n({type:"UI/START_DRAG_FROM_STOCK",startPos:O})},[]),i=L.useCallback((O,_e)=>{n({type:"UI/UPDATE_DRAG",currentPos:O,boardPos:_e})},[]),s=L.useCallback(()=>{n({type:"UI/END_DRAG"})},[]),u=L.useCallback(()=>{n({type:"GAME/RESET"})},[]),a=L.useCallback(()=>{n({type:"ANIMATION/END_CLEAR"})},[]),c=L.useCallback(()=>{n({type:"ANIMATION/END_RELIC_ACTIVATION"})},[]),d=L.useCallback(()=>{n({type:"ANIMATION/ADVANCE_SCORE_STEP"})},[]),f=L.useCallback(()=>{n({type:"ANIMATION/END_SCORE"})},[]),p=L.useCallback(O=>{n({type:"ANIMATION/SET_FAST_FORWARD",isFastForward:O})},[]),S=L.useCallback(()=>{n({type:"PHASE/APPLY_PENDING"})},[]),y=L.useCallback((O,_e)=>{n({type:"RELIC/REORDER",fromIndex:O,toIndex:_e})},[]),k=L.useCallback(()=>{n({type:"ROUND/ADVANCE",probabilityOverride:{pattern:t.patternProbability/100,seal:t.sealProbability/100}})},[t]),m=L.useCallback(O=>{n({type:"SHOP/BUY_ITEM",itemIndex:O})},[]),h=L.useCallback(()=>{n({type:"SHOP/LEAVE"})},[]),g=L.useCallback(()=>{n({type:"SHOP/REROLL"})},[]),v=L.useCallback(()=>{n({type:"SHOP/START_SELL_MODE"})},[]),C=L.useCallback(()=>{n({type:"SHOP/CANCEL_SELL_MODE"})},[]),F=L.useCallback(O=>{n({type:"SHOP/SELL_RELIC",relicIndex:O})},[]),_=L.useCallback(()=>{n({type:"ROUND/START"})},[]),R=L.useCallback(()=>{n({type:"UI/OPEN_DECK_VIEW"})},[]),z=L.useCallback(()=>{n({type:"UI/CLOSE_DECK_VIEW"})},[]),P=L.useCallback(O=>{n({type:"STOCK/MOVE_TO_STOCK",slotIndex:O})},[]),b=L.useCallback(O=>{n({type:"STOCK/MOVE_FROM_STOCK",targetSlotIndex:O})},[]),V=L.useCallback(O=>{n({type:"STOCK/SWAP",slotIndex:O})},[]),K=L.useCallback(O=>{n({type:"UI/START_DRAG_FROM_STOCK2",startPos:O})},[]),x=L.useCallback(O=>{n({type:"STOCK/MOVE_TO_STOCK2",slotIndex:O})},[]),Q=L.useCallback(O=>{n({type:"STOCK/MOVE_FROM_STOCK2",targetSlotIndex:O})},[]),D=L.useCallback(O=>{n({type:"STOCK/SWAP2",slotIndex:O})},[]),Z=L.useCallback(O=>{r(_e=>({..._e,...O}))},[]),I=L.useCallback(()=>{n({type:"GAME/RESET"})},[]),$=L.useCallback(O=>{n({type:"DEBUG/ADD_RELIC",relicType:O})},[]),N=L.useCallback(O=>{n({type:"DEBUG/REMOVE_RELIC",relicType:O})},[]),j=L.useCallback(O=>{n({type:"DEBUG/ADD_GOLD",amount:O})},[]),le=L.useCallback(O=>{n({type:"DEBUG/ADD_SCORE",amount:O})},[]),oe=L.useCallback(O=>{n({type:"AMULET/USE",amuletIndex:O})},[]),Ge=L.useCallback(O=>{n({type:"AMULET/SELECT_PIECE",minoId:O})},[]),Re=L.useCallback(()=>{n({type:"AMULET/CONFIRM"})},[]),Be=L.useCallback(()=>{n({type:"AMULET/CANCEL"})},[]),Ve=L.useCallback(O=>{n({type:"AMULET/SELL",amuletIndex:O})},[]),fe=L.useCallback((O,_e)=>{n({type:"AMULET/SCULPT_TOGGLE_BLOCK",row:O,col:_e})},[]),X=L.useCallback(O=>{n({type:"DEBUG/ADD_AMULET",amuletType:O})},[]),Y=L.useCallback(O=>{n({type:"DEBUG/REMOVE_AMULET",amuletIndex:O})},[]);return{state:e,debugSettings:t,actions:{startDrag:l,startDragFromStock:o,startDragFromStock2:K,updateDrag:i,endDrag:s,resetGame:u,endClearAnimation:a,endRelicActivationAnimation:c,advanceScoreStep:d,endScoreAnimation:f,setFastForward:p,reorderRelic:y,advanceRound:k,buyItem:m,leaveShop:h,rerollShop:g,startSellMode:v,cancelSellMode:C,sellRelic:F,updateDebugSettings:Z,deleteSave:I,startRound:_,openDeckView:R,closeDeckView:z,moveToStock:P,moveFromStock:b,swapWithStock:V,moveToStock2:x,moveFromStock2:Q,swapWithStock2:D,debugAddRelic:$,debugRemoveRelic:N,debugAddGold:j,debugAddScore:le,applyPendingPhase:S,useAmulet:oe,amuletSelectPiece:Ge,amuletConfirm:Re,amuletCancel:Be,amuletSell:Ve,amuletSculptToggleBlock:fe,debugAddAmulet:X,debugRemoveAmulet:Y}}}function Jy(e,n=[]){const[t,r]=L.useState(null),l=L.useMemo(()=>e.map(u=>u.piece?u.piece.shape.map(a=>a.map(c=>c?"1":"0").join("")).join("|"):"empty").join("_"),[e]),o=L.useMemo(()=>e,[l]),i=ue(n,"hand_stock"),s=L.useCallback(()=>{const u=ke.canvasWidth,a=ke.canvasHeight,c=ke.cellSize,d=ke.boardOffsetX,f=ke.boardOffsetY,p=ke.slotAreaY,S=qy(ke.rightPanelStartX,u,p,c,o),y=i?{x:ci.x,y:ci.y}:null;r({canvasWidth:u,canvasHeight:a,boardOffsetX:d,boardOffsetY:f,cellSize:c,slotAreaY:p,slotPositions:S,stockSlotPosition:y})},[o,i]);return L.useEffect(()=>{s();const u=()=>{s()};return window.addEventListener("resize",u),window.addEventListener("orientationchange",u),()=>{window.removeEventListener("resize",u),window.removeEventListener("orientationchange",u)}},[s]),t}function qy(e,n,t,r,l){const o=r*ke.slotCellSizeRatio,i=[],s=l.map(f=>f.piece?zp(f.piece.shape).width*o:o),u=s.reduce((f,p)=>f+p,0)+ke.slotGap*Math.max(0,l.length-1),a=6*r;let d=ke.boardOffsetX+a/2-u/2;for(let f=0;f<l.length;f++)i.push({x:d,y:t}),d+=s[f]+ke.slotGap;return i}function eS(e){return e&&ht[e]?ht[e]:{base:Ae.piece,highlight:Ae.pieceHighlight,shadow:Ae.pieceShadow}}function nS(e,n,t,r,l,o){const{fontFamily:i,color:s,shadowColor:u,shadowBlur:a}=qt,c=qt.fontSize;e.save(),e.font=`bold ${c}px ${i}`,e.textAlign="center",e.textBaseline="middle",e.shadowColor=u,e.shadowBlur=a,e.fillStyle=s,e.fillText(l,n+r/2,t+r/2),e.restore()}function tS(e,n,t,r,l,o){const i=fr(l);if(!i)return;const{fontFamily:s,backgroundColor:u,borderRadius:a,padding:c}=au,d=au.fontSize,f=ma[l]??"#FFFFFF";e.save(),e.font=`bold ${d}px ${s}`;const S=e.measureText(i.symbol).width,y=d,k=S+c*4,m=y+c*2,h=n+r-k-2,g=t+r-m-2;e.fillStyle=u,e.beginPath(),e.roundRect(h,g,k,m,a),e.fill(),e.fillStyle=f,e.textAlign="center",e.textBaseline="middle",e.fillText(i.symbol,h+k/2,g+m/2),e.restore()}function lh(e,n,t,r,l=null,o=null,i=0){const{padding:s,highlightWidth:u,shadowWidth:a}=qr,c=eS(l);if(e.fillStyle=c.base,e.fillRect(n+s,t+s,r-s*2,r-s*2),e.fillStyle=c.highlight,e.fillRect(n+s,t+s,r-s*2,u),e.fillRect(n+s,t+s,u,r-s*2),e.fillStyle=c.shadow,e.fillRect(n+s,t+r-s-a,r-s*2,a),e.fillRect(n+r-s-a,t+s,a,r-s*2),l){const d=Vt(l);if(d&&(nS(e,n,t,r,d.symbol),l==="charge")){const{fontFamily:f,color:p}=qt,S=Math.max(8,Math.floor(r*.28));e.save(),e.font=`bold ${S}px ${f}`,e.textAlign="center",e.textBaseline="top",e.fillStyle=p,e.fillText(`+${i}`,n+r/2,t+r/2+S*.3),e.restore()}}o&&tS(e,n,t,r,o)}function oh(e,n,t,r,l=null,o=null,i=0){const{padding:s}=qr;lh(e,n,t,r,l,o,i),e.strokeStyle=Ae.cellBorder,e.lineWidth=1,e.strokeRect(n+s,t+s,r-s*2,r-s*2)}function rS(e,n,t){return t?t.some(r=>r.x===e&&r.y===n):!1}function lS(e,n,t,r=null){const{boardOffsetX:l,boardOffsetY:o,cellSize:i}=t,s=te*i;e.fillStyle=Ae.boardBackground,e.fillRect(l-Ro.boardPadding,o-Ro.boardPadding,s+Ro.boardPadding*2,s+Ro.boardPadding*2);for(let u=0;u<te;u++)for(let a=0;a<te;a++){const c=l+a*i,d=o+u*i,f=n[u][a],p=rS(a,u,r);f.filled&&!p?lh(e,c,d,i,f.pattern,f.seal,f.chargeValue):iS(e,c,d,i),e.strokeStyle=Ae.cellBorder,e.lineWidth=1,e.strokeRect(c,d,i,i)}}function oS(e,n,t){const{boardOffsetX:r,boardOffsetY:l,cellSize:o}=t,i=8,s="#FFD700",u=4,a=c=>{if(e.fillStyle=s,e.beginPath(),c.type==="row"){const d=l+c.index*o+o/2,f=r-u,p=f-i;e.moveTo(f,d),e.lineTo(p,d-i/2),e.lineTo(p,d+i/2)}else{const d=r+c.index*o+o/2,f=l-u,p=f-i;e.moveTo(d,f),e.lineTo(d-i/2,p),e.lineTo(d+i/2,p)}e.closePath(),e.fill()};a(n.target1),a(n.target2)}function iS(e,n,t,r){e.fillStyle=Ae.cellBackground,e.fillRect(n,t,r,r)}function sS(e,n,t,r){n.forEach((l,o)=>{if(!l.piece||r.isDragging&&r.slotIndex===o)return;const i=t.slotPositions[o];i&&Li(e,l.piece,i.x,i.y,t.cellSize*ke.slotCellSizeRatio,1)})}function uS(e,n,t,r){if(!t.isDragging||t.slotIndex===null||!t.currentPos)return;const l=n[t.slotIndex];if(!(l!=null&&l.piece))return;const o=l.piece,i=o.shape,s=i[0].length*r.cellSize,u=i.length*r.cellSize,a=t.currentPos.x-s/2,c=t.currentPos.y-u/2;Li(e,o,a,c,r.cellSize,Zg.dragOpacity)}function Li(e,n,t,r,l,o){const i=e.globalAlpha,{shape:s,blocks:u}=n;try{e.globalAlpha=o;for(let a=0;a<s.length;a++)for(let c=0;c<s[a].length;c++){if(!s[a][c])continue;const d=t+c*l,f=r+a*l,p=vn.get(u,a,c),S=(p==null?void 0:p.pattern)??null,y=(p==null?void 0:p.seal)??null;oh(e,d,f,l,S,y)}}finally{e.globalAlpha=i}}function aS(e,n,t,r,l){if(!r.isDragging||r.slotIndex===null||!r.boardPos)return;const o=t[r.slotIndex];if(!(o!=null&&o.piece))return;const i=o.piece.shape,s=r.boardPos,{boardOffsetX:u,boardOffsetY:a,cellSize:c}=l,f=Br(n,i,s,st(o.piece))?Ae.previewValid:Ae.previewInvalid;e.fillStyle=f;for(let p=0;p<i.length;p++)for(let S=0;S<i[p].length;S++){if(!i[p][S])continue;const y=u+(s.x+S)*c,k=a+(s.y+p)*c;e.fillRect(y,k,c,c)}}function cS(e){return e.pattern&&ht[e.pattern]?ht[e.pattern]:{base:Ae.piece,highlight:Ae.pieceHighlight,shadow:Ae.pieceShadow}}function fS(e){if(e.pattern){const n=Vt(e.pattern);if(n){let t=n.symbol;e.pattern==="charge"&&e.chargeValue!==void 0&&(t=`${n.symbol}+${e.chargeValue}`);const r=ht[e.pattern];return{text:t,color:r?r.highlight:"#FFFFFF"}}}if(e.seal){const n=fr(e.seal);if(n)return{text:n.symbol,color:ma[e.seal]??"#FFFFFF"}}return null}function dS(e,n,t){const l=Date.now()-n.startTime,o=Math.min(l/n.duration,1),{maxRotation:i,maxRise:s,initialScale:u,finalScale:a,effectLabelRise:c}=Bi,{boardOffsetX:d,boardOffsetY:f,cellSize:p}=t,{padding:S,highlightWidth:y,shadowWidth:k}=qr,m=n.perCellDuration;for(const h of n.cells){const g=h.delay??0,v=l-g;if(v<0)continue;const C=Math.min(v/m,1),F=1-Math.pow(1-C,3),_=i*F,R=s*F,z=u-(u-a)*F,P=d+h.col*p,b=f+h.row*p,V=P+p/2,K=b+p/2-R,x=cS(h);e.save(),e.translate(V,K),e.rotate(_),e.scale(z,z);const Q=p-S*2,D=Q/2;e.fillStyle=x.base,e.fillRect(-D,-D,Q,Q),e.fillStyle=x.highlight,e.fillRect(-D,-D,Q,y),e.fillRect(-D,-D,y,Q),e.fillStyle=x.shadow,e.fillRect(-D,D-k,Q,k),e.fillRect(D-k,-D,k,Q),e.restore();const Z=fS(h);if(Z&&C>0&&C<1){const I=C<.7?1:1-(C-.7)/.3,$=c*F;e.save(),e.globalAlpha=I,e.font="bold 14px Arial, sans-serif",e.textAlign="center",e.textBaseline="middle",e.shadowColor="#000000",e.shadowBlur=4,e.fillStyle=Z.color,e.fillText(Z.text,P+p/2,b+p/2-$),e.restore()}}return o>=1}function pS(e,n){const{pendingPhase:t,scoreAnimation:r,targetScore:l}=e;if(t==="game_over"&&r===null)return n.roundScoreFailColor;if(t==="round_clear"){if(r!=null&&r.isCountingUp){const i=Date.now()-r.countStartTime,s=Math.min(1,i/ur.countUpDuration),u=1-Math.pow(1-s,3);return Math.floor(r.startingScore+r.scoreGain*u)>=l?n.roundScoreClearColor:n.roundScoreColor}return r===null?n.roundScoreClearColor:n.roundScoreColor}return n.roundScoreColor}function hS(e,n,t){const r=Jg,l=ke.statusPadding,o=ke.statusGroupGap,i=ke.statusItemGap;e.save(),e.shadowColor=r.shadowColor,e.shadowBlur=r.shadowBlur;let s=l;e.font=`${r.fontWeight} ${r.targetFontSize}px ${r.fontFamily}`,e.fillStyle=r.targetColor,e.textAlign="left",e.textBaseline="top",e.fillText(`:${n.targetScore}`,l,s),s+=r.targetFontSize+i;const u=Wp(n.roundInfo.roundType);e.font=`${r.fontWeight} ${r.roundScoreLabelFontSize}px ${r.fontFamily}`,e.fillStyle="#FFD700",e.fillText(`Reward ${u}G`,l,s),s+=r.roundScoreLabelFontSize+o,e.font=`${r.fontWeight} ${r.roundScoreLabelFontSize}px ${r.fontFamily}`,e.fillStyle=r.roundScoreLabelColor,e.fillText("",l,s),s+=r.roundScoreLabelFontSize+i,e.font=`${r.fontWeight} ${r.roundScoreFontSize}px ${r.fontFamily}`,e.fillStyle=pS(n,r),e.fillText(`${n.roundScore}`,l,s),s+=r.roundScoreFontSize;const a=s;s+=o+40,e.font=`${r.fontWeight} ${r.goldFontSize}px ${r.fontFamily}`,e.fillStyle=r.goldColor,e.fillText(` ${n.gold}G`,l,s),s+=r.goldFontSize+o+30;const c=s;if(e.font=`${r.fontWeight} ${r.handLabelFontSize}px ${r.fontFamily}`,e.fillStyle=r.roundColor,e.fillText("",l+20,c),e.font=`${r.fontWeight} ${r.roundFontSize+8}px ${r.fontFamily}`,e.fillText(`${n.roundInfo.round}/${Wt.maxRound}`,l+15,c+25),e.font=`${r.fontWeight} ${r.handLabelFontSize}px ${r.fontFamily}`,e.fillStyle=r.handLabelColor,e.fillText("",l+170,c),e.font=`${r.fontWeight} ${r.handFontSize+12}px ${r.fontFamily}`,e.fillStyle=r.handColor,e.fillText(`${n.remainingHands}`,l+175,c+25),n.bandaidCountdown!==null&&(e.font=`${r.fontWeight} ${r.handFontSize}px ${r.fontFamily}`,e.fillStyle="#87CEEB",e.fillText(`${n.bandaidCountdown}`,l+240,c+25)),n.timingBonusActive){e.font=`${r.fontWeight} ${r.handFontSize}px ${r.fontFamily}`,e.fillStyle="#FFD700";const v=n.bandaidCountdown!==null?l+310:l+240;e.fillText("3",v,c+25)}let d=l+240;n.bandaidCountdown!==null&&(d+=70),n.timingBonusActive&&(d+=70),n.copyBandaidCountdown!==null&&(e.font=`${r.fontWeight} ${r.handFontSize}px ${r.fontFamily}`,e.fillStyle="#9370DB",e.fillText(`${n.copyBandaidCountdown}`,d,c+25));const f=[],p=c+60,S=36,y=8;e.font=`bold 12px ${r.fontFamily}`,e.fillStyle="#DDA0DD",e.textAlign="left",e.textBaseline="top",e.fillText(` (${n.amuletStock.length}/${Kr})`,l,p);const k=p+18;for(let v=0;v<Kr;v++){const C=l+v*(S+y),F=n.amuletStock[v];e.fillStyle=F?"rgba(75, 0, 130, 0.5)":"rgba(60, 60, 80, 0.4)",e.beginPath(),e.roundRect(C,k,S,S,4),e.fill(),e.strokeStyle=F?"#9370DB":"#555555",e.lineWidth=1,e.stroke(),F&&(e.font=`${S-10}px Arial, sans-serif`,e.textAlign="center",e.textBaseline="middle",e.fillText(F.icon,C+S/2,k+S/2),f.push({amuletIndex:v,x:C,y:k,width:S,height:S}))}const m=l0,h=l,g=k+S+12;return e.fillStyle=m.backgroundColor,e.beginPath(),e.roundRect(h,g,m.width,m.height,m.borderRadius),e.fill(),e.font=`bold ${m.fontSize}px Arial, sans-serif`,e.fillStyle=m.textColor,e.textAlign="center",e.textBaseline="middle",e.fillText("",h+m.width/2,g+m.height/2),e.restore(),{deckButtonArea:{x:h,y:g,width:m.width,height:m.height},formulaY:a,amuletSlotAreas:f}}function mS(e,n,t,r,l,o){const{fontSize:i,subFontSize:s,color:u,goldColor:a,backgroundColor:c,titleOffsetY:d,goldTextOffsetY:f}=Cp;e.save(),e.fillStyle=c,e.fillRect(0,0,o.canvasWidth,o.canvasHeight);const p=o.canvasWidth/2,S=o.canvasHeight/2;e.font=`bold ${i}px Arial, sans-serif`,e.textAlign="center",e.textBaseline="middle",e.fillStyle=u,e.fillText(`Round ${n} Clear!`,p,S+d);const y=r>0?` + Interest ${r}G`:"";e.font=`bold ${s}px Arial, sans-serif`,e.fillStyle=a,e.fillText(`Gold ${l}G + Reward ${t}G${y}`,p,S+f),e.restore()}function gS(e,n,t,r,l){const{titleFontSize:o,subtextFontSize:i,color:s,backgroundColor:u,buttonWidth:a,buttonHeight:c,buttonColor:d,buttonTextColor:f,buttonFontSize:p,titleOffsetY:S,line1OffsetY:y,line2OffsetY:k,line3OffsetY:m,buttonOffsetY:h}=qg;e.save(),e.fillStyle=u,e.fillRect(0,0,l.canvasWidth,l.canvasHeight);const g=l.canvasWidth/2,v=l.canvasHeight/2;e.font=`bold ${o}px Arial, sans-serif`,e.textAlign="center",e.textBaseline="middle",e.fillStyle=s,e.fillText("Game Over",g,v+S),e.font=`${i}px Arial, sans-serif`,e.fillText(`: ${n}/${Wt.maxRound}`,g,v+y),e.fillText(`: ${t}`,g,v+k),e.fillStyle="#FFD700",e.fillText(`: ${r}G`,g,v+m);const C=g-a/2,F=v+h;return e.fillStyle=d,e.beginPath(),e.roundRect(C,F,a,c,8),e.fill(),e.font=`bold ${p}px Arial, sans-serif`,e.fillStyle=f,e.fillText("",g,F+c/2),e.restore(),{x:C,y:F,width:a,height:c}}function yS(e,n,t){const{titleFontSize:r,subtextFontSize:l,color:o,backgroundColor:i,buttonWidth:s,buttonHeight:u,buttonColor:a,buttonTextColor:c,buttonFontSize:d,titleOffsetY:f,line1OffsetY:p,line2OffsetY:S,buttonOffsetY:y}=e0;e.save(),e.fillStyle=i,e.fillRect(0,0,t.canvasWidth,t.canvasHeight);const k=t.canvasWidth/2,m=t.canvasHeight/2;e.font=`bold ${r}px Arial, sans-serif`,e.textAlign="center",e.textBaseline="middle",e.fillStyle=o,e.fillText("Game Clear!",k,m+f),e.font=`${l}px Arial, sans-serif`,e.fillStyle="#FFFFFF",e.fillText(`${Wt.maxRound} `,k,m+p),e.fillStyle=o,e.fillText(`: ${n}G`,k,m+S);const h=k-s/2,g=m+y;return e.fillStyle=a,e.beginPath(),e.roundRect(h,g,s,u,8),e.fill(),e.font=`bold ${d}px Arial, sans-serif`,e.fillStyle=c,e.fillText("",k,g+u/2),e.restore(),{x:h,y:g,width:s,height:u}}function nf(e,n,t,r,l,o){e.save(),e.font=`bold ${o}px Arial, sans-serif`,e.fillStyle=l,e.textAlign="center",e.textBaseline="middle";const i=e.measureText(n);return e.fillText(n,t,r),e.strokeStyle=G.strikethroughColor,e.lineWidth=2,e.beginPath(),e.moveTo(t-i.width/2-2,r),e.lineTo(t+i.width/2+2,r),e.stroke(),e.restore(),i.width}function SS(e){const n=Array.from(e.values()),t=[],r=n.find(o=>o.pattern);if(r!=null&&r.pattern){const o=Vt(r.pattern);o&&t.push(o.name)}const l=n.find(o=>o.seal);if(l!=null&&l.seal){const o=fr(l.seal);o&&t.push(o.name)}return t}function Ca(e,n,t,r,l,o,i,s,u=G.priceFontSize,a={original:-10,sale:8}){if(o)e.font=`bold ${u}px Arial, sans-serif`,e.textAlign="center",e.textBaseline="middle",e.fillStyle=G.priceDisabledColor,e.fillText("",n,t);else if(i){const c=t+a.original,d=t+a.sale;nf(e,`${l}G`,n,c,G.originalPriceColor,u-2),e.font=`bold ${u}px Arial, sans-serif`,e.textAlign="center",e.textBaseline="middle",e.fillStyle=s?G.saleColor:G.priceDisabledColor,e.fillText(`${r}G`,n,d)}else s?(e.font=`bold ${u}px Arial, sans-serif`,e.textAlign="center",e.textBaseline="middle",e.fillStyle=G.priceColor,e.fillText(`${r}G`,n,t)):nf(e,`${r}G`,n,t,G.priceDisabledColor,u)}function Aa(e,n,t){const{saleBadgeColor:r,saleBadgeTextColor:l,saleBadgeFontSize:o,saleBadgeWidth:i,saleBadgeHeight:s,saleBadgeOffsetX:u,saleBadgeOffsetY:a}=G,c=n+u,d=t+a;e.save(),e.fillStyle=r,e.beginPath(),e.roundRect(c,d,i,s,3),e.fill(),e.font=`bold ${o}px Arial, sans-serif`,e.fillStyle=l,e.textAlign="center",e.textBaseline="middle",e.fillText("SALE",c+i/2,d+s/2),e.restore()}function vS(e,n,t,r,l){const{shape:o,blocks:i}=n,s=o.length,u=o[0].length,a=u*l,c=s*l,d=t-a/2,f=r-c/2,{padding:p,highlightWidth:S,shadowWidth:y}=qr;for(let k=0;k<s;k++)for(let m=0;m<u;m++){if(!o[k][m])continue;const h=d+m*l,g=f+k*l,v=l,C=vn.get(i,k,m),F=(C==null?void 0:C.pattern)??null,_=(C==null?void 0:C.seal)??null,R=F&&ht[F]?ht[F]:{base:Ae.piece,highlight:Ae.pieceHighlight,shadow:Ae.pieceShadow};if(e.fillStyle=R.base,e.fillRect(h+p,g+p,v-p*2,v-p*2),e.fillStyle=R.highlight,e.fillRect(h+p,g+p,v-p*2,S),e.fillRect(h+p,g+p,S,v-p*2),e.fillStyle=R.shadow,e.fillRect(h+p,g+v-p-y,v-p*2,y),e.fillRect(h+v-p-y,g+p,y,v-p*2),F){const z=Vt(F);if(z){const P=Math.max(8,Math.floor(v*.4));e.save(),e.font=`bold ${P}px ${qt.fontFamily}`,e.textAlign="center",e.textBaseline="middle",e.shadowColor=qt.shadowColor,e.shadowBlur=qt.shadowBlur,e.fillStyle=qt.color,e.fillText(z.symbol,h+v/2,g+v/2),e.restore()}}if(_){const z=fr(_);if(z){const P=Math.max(6,Math.floor(v*.3)),b=ma[_]??"#FFFFFF",{backgroundColor:V,borderRadius:K}=au;e.save(),e.font=`bold ${P}px Arial, sans-serif`;const Q=e.measureText(z.symbol).width,D=P,Z=1,I=Q+Z*4,$=D+Z*2,N=h+v-I-2,j=g+v-$-2;e.fillStyle=V,e.beginPath(),e.roundRect(N,j,I,$,K),e.fill(),e.fillStyle=b,e.textAlign="center",e.textBaseline="middle",e.fillText(z.symbol,N+I/2,j+$/2),e.restore()}}}}function wS(e,n,t,r,l,o,i,s){const{piece:u,price:a,originalPrice:c,purchased:d,onSale:f}=n,p=at(t,a);e.fillStyle=d?G.itemPurchasedColor:G.itemBackgroundColor,e.fillRect(r,l,o,i),e.strokeStyle=G.itemBorderColor,e.lineWidth=G.itemBorderWidth,e.strokeRect(r,l,o,i),f&&!d&&Aa(e,r,l),e.save(),!d&&!p&&(e.globalAlpha=G.unavailableOpacity);const S=r+o/2,y=l+i/2-G.shapeVerticalOffset;vS(e,u,S,y,s),e.restore();const k=SS(u.blocks);k.length>0&&(e.font="bold 11px Arial, sans-serif",e.textAlign="center",e.fillStyle="#FFD700",e.fillText(k.join(" / "),r+o/2,l+20));const m=l+i-G.priceVerticalOffset;Ca(e,r+o/2,m,a,c,d,f,p)}function kS(e,n,t,r,l,o,i){const s=un(n.relicId);if(!s)return;const{price:u,originalPrice:a,purchased:c,onSale:d}=n,f=at(t,u);e.fillStyle=c?G.itemPurchasedColor:G.itemBackgroundColor,e.fillRect(r,l,o,i),e.strokeStyle=G.itemBorderColor,e.lineWidth=G.itemBorderWidth,e.strokeRect(r,l,o,i),d&&!c&&Aa(e,r,l),e.save(),!c&&!f&&(e.globalAlpha=G.unavailableOpacity),e.font=`${G.relicIconSize}px Arial, sans-serif`,e.textAlign="center",e.textBaseline="middle",e.fillText(s.icon,r+o/2,l+30),e.restore(),e.font="bold 12px Arial, sans-serif",e.fillStyle="#FFD700",e.fillText(s.name,r+o/2,l+55),e.font="10px Arial, sans-serif",e.fillStyle=n0[s.rarity]??"#FFFFFF",e.fillText(s.rarity,r+o/2,l+70);const p=l+i-15;Ca(e,r+o/2,p,u,a,c,d,f,G.priceFontSize,{original:-8,sale:6})}function CS(e,n,t,r,l,o,i,s){const{price:u,originalPrice:a,purchased:c,onSale:d}=n,f=at(t,u),p=r>=Kr;e.fillStyle=c?G.itemPurchasedColor:G.itemBackgroundColor,e.fillRect(l,o,i,s),e.strokeStyle=c?G.itemBorderColor:"#9370DB",e.lineWidth=G.itemBorderWidth,e.strokeRect(l,o,i,s),d&&!c&&Aa(e,l,o),c||(e.save(),e.fillStyle="#7B2FBE",e.beginPath(),e.roundRect(l+i-42,o+3,38,16,3),e.fill(),e.font="bold 10px Arial, sans-serif",e.fillStyle="#FFFFFF",e.textAlign="center",e.textBaseline="middle",e.fillText("",l+i-23,o+11),e.restore()),e.save(),!c&&(!f||p)&&(e.globalAlpha=G.unavailableOpacity),e.font=`${G.relicIconSize}px Arial, sans-serif`,e.textAlign="center",e.textBaseline="middle",e.fillText(n.icon,l+i/2,o+30),e.restore(),e.font="bold 12px Arial, sans-serif",e.textAlign="center",e.fillStyle="#DDA0DD",e.fillText(n.name,l+i/2,o+55),p&&!c&&(e.font="bold 10px Arial, sans-serif",e.fillStyle="#FF6666",e.fillText("",l+i/2,o+70));const S=o+s-15;Ca(e,l+i/2,S,u,a,c,d,f&&!p,G.priceFontSize,{original:-8,sale:6})}function AS(e,n,t,r,l,o){const{sellModeRelicBoxWidth:i,sellModeRelicBoxHeight:s,sellModeRelicBoxGap:u,sellModeIconSize:a,sellModeNameFontSize:c,sellModePriceFontSize:d,sellModePriceColor:f,sellModeInfoFontSize:p,sellModeInfoColor:S,cancelButtonWidth:y,cancelButtonHeight:k,cancelButtonColor:m,cancelButtonTextColor:h,cancelButtonFontSize:g,itemBorderColor:v,itemBorderWidth:C,itemBackgroundColor:F}=G,_=r.canvasWidth/2,R=r.canvasHeight/2;if(e.font=`bold ${p}px Arial, sans-serif`,e.textAlign="center",e.textBaseline="middle",e.fillStyle=S,l!==null){const Q=o.items[l];if(Q&&jr(Q)){const D=un(Q.relicId),Z=(D==null?void 0:D.name)??"";e.fillText(`${Z} `,_,R-200)}}else e.fillText("",_,R-200);const z=i*n.length+u*(n.length-1),P=_-z/2,b=R-s/2-30,V=[];n.forEach((Q,D)=>{const Z=un(Q);if(!Z)return;const $=mt[Q],N=$?wa($.price):0,j=P+D*(i+u);e.fillStyle=F,e.fillRect(j,b,i,s),e.strokeStyle=v,e.lineWidth=C,e.strokeRect(j,b,i,s),e.font=`${a}px Arial, sans-serif`,e.textAlign="center",e.textBaseline="middle",e.fillText(Z.icon,j+i/2,b+35),e.font=`bold ${c}px Arial, sans-serif`,e.fillStyle="#FFFFFF",e.fillText(Z.name,j+i/2,b+70),e.font=`bold ${d}px Arial, sans-serif`,e.fillStyle=f,e.fillText(`: ${N}G`,j+i/2,b+95),V.push({relicIndex:D,x:j,y:b,width:i,height:s})});const K=_-y/2,x=b+s+40;return e.fillStyle=m,e.beginPath(),e.roundRect(K,x,y,k,8),e.fill(),e.font=`bold ${g}px Arial, sans-serif`,e.fillStyle=h,e.textAlign="center",e.textBaseline="middle",e.fillText("",K+y/2,x+k/2),{ownedRelicAreas:V,cancelButtonArea:{x:K,y:x,width:y,height:k}}}function FS(e,n,t){if(n.length===0)return;const{ownedRelicIconSize:r,ownedRelicGap:l,ownedRelicOffsetY:o,ownedRelicCountFontSize:i,ownedRelicCountColor:s}=G,u=t.canvasWidth/2,c=t.canvasHeight/2+o;e.font=`bold ${i}px Arial, sans-serif`,e.textAlign="center",e.textBaseline="middle",e.fillStyle=s,e.fillText(` (${n.length}/5)`,u,c);const d=n.length*r+(n.length-1)*l,f=u-d/2;n.forEach((p,S)=>{const y=un(p);if(!y)return;const k=f+S*(r+l)+r/2,m=c+22;e.font=`${r}px Arial, sans-serif`,e.textAlign="center",e.textBaseline="middle",e.fillText(y.icon,k,m)})}function RS(e,n,t,r,l,o=[],i=0){const{backgroundColor:s,titleFontSize:u,titleColor:a,itemBoxPadding:c,itemBoxGap:d,leaveButtonWidth:f,leaveButtonHeight:p,leaveButtonColor:S,leaveButtonTextColor:y,leaveButtonFontSize:k,leaveButtonGap:m,titleOffsetY:h,itemsOffsetY:g,goldDisplayOffsetY:v,cellSizeRatio:C}=G;e.save(),e.fillStyle=s,e.fillRect(0,0,r.canvasWidth,r.canvasHeight);const F=r.canvasWidth/2,_=r.canvasHeight/2;if(e.font=`bold ${u}px Arial, sans-serif`,e.textAlign="center",e.textBaseline="middle",e.fillStyle="#FFD700",e.fillText(`: ${t}G`,F,_+v),n.sellMode){const ie=AS(e,o,t,r,n.pendingPurchaseIndex,n);return e.restore(),{itemAreas:[],rerollButtonArea:{x:-1,y:-1,width:0,height:0},leaveButtonArea:{x:-1,y:-1,width:0,height:0},sellButtonArea:null,ownedRelicAreas:ie.ownedRelicAreas,cancelSellButtonArea:ie.cancelButtonArea}}FS(e,o,r),e.fillStyle=a,e.font=`bold ${u}px Arial, sans-serif`,e.textAlign="center",e.textBaseline="middle",e.fillText("",F,_+h);const R=n.items.filter(da),z=n.items.filter(jr),P=n.items.filter(ai),b=[...z,...P],V=r.cellSize*C,K=7*V+c*2,x=7*V+c*2+30,Q=K*R.length+d*(R.length-1),D=F-Q/2,Z=_+g-x/2,I=[];if(R.forEach((ie,De)=>{const Kn=D+De*(K+d),St=n.items.indexOf(ie);wS(e,ie,t,Kn,Z,K,x,V),I.push({itemIndex:St,x:Kn,y:Z,width:K,height:x})}),b.length>0){const{relicBoxWidth:ie,relicBoxHeight:De,relicRowOffsetY:Kn}=G,St=ie*b.length+d*(b.length-1),Qn=F-St/2,Ln=Z+x+Kn;b.forEach((Zn,Pe)=>{const Qe=Qn+Pe*(ie+d),Oe=n.items.indexOf(Zn);jr(Zn)?kS(e,Zn,t,Qe,Ln,ie,De):ai(Zn)&&CS(e,Zn,t,i,Qe,Ln,ie,De),I.push({itemIndex:Oe,x:Qe,y:Ln,width:ie,height:De})})}const{rerollButtonWidth:$,rerollButtonHeight:N,rerollButtonColor:j,rerollButtonDisabledColor:le,rerollButtonTextColor:oe,rerollButtonFontSize:Ge,rerollButtonGap:Re}=G,{relicBoxHeight:Be,relicRowOffsetY:Ve}=G,X=(b.length>0?Z+x+Ve+Be:Z+x)+m,Y=o.length>0,{sellButtonWidth:O,sellButtonHeight:_e,sellButtonColor:Cn,sellButtonTextColor:pn,sellButtonFontSize:Xn}=G,pe=$+Re+f+(Y?Re+O:0),ee=F-pe/2,hn=ka(l),yt=at(t,hn),rn=ee;e.fillStyle=yt?j:le,e.beginPath(),e.roundRect(rn,X,$,N,8),e.fill(),e.font=`bold ${Ge}px Arial, sans-serif`,e.fillStyle=oe,e.textAlign="center",e.textBaseline="middle",e.fillText(` ${hn}G`,rn+$/2,X+N/2);const Bn=ee+$+Re;e.fillStyle=S,e.beginPath(),e.roundRect(Bn,X,f,p,8),e.fill(),e.font=`bold ${k}px Arial, sans-serif`,e.fillStyle=y,e.textAlign="center",e.textBaseline="middle",e.fillText("",Bn+f/2,X+p/2);let se=null;if(Y){const ie=Bn+f+Re;e.fillStyle=Cn,e.beginPath(),e.roundRect(ie,X,O,_e,8),e.fill(),e.font=`bold ${Xn}px Arial, sans-serif`,e.fillStyle=pn,e.textAlign="center",e.textBaseline="middle",e.fillText("",ie+O/2,X+_e/2),se={x:ie,y:X,width:O,height:_e}}return e.restore(),{itemAreas:I,rerollButtonArea:{x:rn,y:X,width:$,height:N},leaveButtonArea:{x:Bn,y:X,width:f,height:p},sellButtonArea:se,ownedRelicAreas:[],cancelSellButtonArea:null}}function _S(e,n,t,r,l){var s;const o=n.length,i=((s=n[0])==null?void 0:s.length)??0;for(let u=0;u<o;u++)for(let a=0;a<i;a++)if(n[u][a]){const c=t+a*l,d=r+u*l;e.fillStyle=Ae.piece,e.fillRect(c,d,l-1,l-1),e.fillStyle=Ae.pieceHighlight,e.fillRect(c,d,l-1,1),e.fillRect(c,d,1,l-1),e.fillStyle=Ae.pieceShadow,e.fillRect(c,d+l-2,l-1,1),e.fillRect(c+l-2,d,1,l-1)}return{width:i*l,height:o*l}}function ds(e,n){var l;const t=e.length;return{width:(((l=e[0])==null?void 0:l.length)??0)*n,height:t*n}}function hi(e,n,t,r,l,o,i,s,u){e.fillStyle=i,e.fillRect(n,t,r,l),e.strokeStyle="#FFFFFF",e.lineWidth=1,e.strokeRect(n,t,r,l),e.fillStyle=s,e.font=`bold ${u}px Arial, sans-serif`,e.textAlign="center",e.textBaseline="middle",e.fillText(o,n+r/2,t+l/2)}function tf(e,n,t,r,l,o,i){const s=En.probabilitySection;e.fillStyle=s.labelColor,e.font=`${s.labelFontSize}px ${En.fontFamily}`,e.textAlign="left",e.textBaseline="middle",e.fillText(n,r+i,l+s.rowHeight/2);const a=r+o-i-s.buttonWidth,c=a-s.valueWidth,d=c-s.buttonGap-s.buttonWidth,f=l+(s.rowHeight-s.buttonHeight)/2;return hi(e,d,f,s.buttonWidth,s.buttonHeight,"-",s.buttonColor,s.buttonTextColor,s.buttonFontSize),e.fillStyle=s.valueColor,e.font=`bold ${s.valueFontSize}px ${En.fontFamily}`,e.textAlign="center",e.textBaseline="middle",e.fillText(`${t}%`,c+s.valueWidth/2,l+s.rowHeight/2),hi(e,a,f,s.buttonWidth,s.buttonHeight,"+",s.buttonColor,s.buttonTextColor,s.buttonFontSize),{minusButton:{x:d,y:f,width:s.buttonWidth,height:s.buttonHeight},plusButton:{x:a,y:f,width:s.buttonWidth,height:s.buttonHeight}}}function rf(e,n,t,r,l,o,i){const s=En.valueSection;e.fillStyle=s.labelColor,e.font=`${s.labelFontSize}px ${En.fontFamily}`,e.textAlign="left",e.textBaseline="middle",e.fillText(n,r+i,l+s.rowHeight/2);const u=r+i+s.labelWidth+s.valueWidth/2;e.fillStyle=s.valueColor,e.font=`bold ${s.valueFontSize}px ${En.fontFamily}`,e.textAlign="center",e.textBaseline="middle",e.fillText(`${t}`,u,l+s.rowHeight/2);const a=r+i+s.labelWidth+s.valueWidth+s.buttonGap,c=l+(s.rowHeight-s.buttonHeight)/2,d=[{text:"-50",delta:-50},{text:"-10",delta:-10},{text:"+10",delta:10},{text:"+50",delta:50}],f=[];let p=a;for(const S of d){const y=S.delta<0?"#CC6666":"#4CAF50";hi(e,p,c,s.buttonWidth,s.buttonHeight,S.text,y,s.buttonTextColor,s.buttonFontSize),f.push({x:p,y:c,width:s.buttonWidth,height:s.buttonHeight}),p+=s.buttonWidth+s.buttonGap}return{minus50:f[0],minus10:f[1],plus10:f[2],plus50:f[3]}}function TS(e,n,t,r,l,o){const i=En.relicSection,s=Object.keys(mt);e.fillStyle=i.labelColor,e.font=`${i.labelFontSize}px ${En.fontFamily}`,e.textAlign="left",e.textBaseline="top",e.fillText("Relics (click to toggle)",t+o,r);const u=r+i.labelFontSize+4,a=[];for(let f=0;f<s.length;f++){const p=s[f],S=mt[p],y=Math.floor(f/i.iconsPerRow),k=f%i.iconsPerRow,m=t+o+k*(i.iconSize+i.iconGap),h=u+y*(i.iconSize+i.iconGap),g=n.includes(p);g&&(e.fillStyle=i.ownedBgColor,e.fillRect(m-1,h-1,i.iconSize+2,i.iconSize+2)),e.globalAlpha=g?i.ownedOpacity:i.unownedOpacity,e.font=`${i.iconSize-4}px Arial`,e.textAlign="center",e.textBaseline="middle",e.fillStyle="#FFFFFF",e.fillText(S.icon,m+i.iconSize/2,h+i.iconSize/2),e.globalAlpha=1,e.strokeStyle=g?"#FFD700":"#666666",e.lineWidth=1,e.strokeRect(m,h,i.iconSize,i.iconSize),a.push({x:m,y:h,width:i.iconSize,height:i.iconSize,relicType:p,isOwned:g})}const c=Math.ceil(s.length/i.iconsPerRow),d=i.labelFontSize+4+c*(i.iconSize+i.iconGap);return{relicButtons:a,sectionHeight:d}}function ES(e,n,t,r,l,o){const{backgroundColor:i,titleFontSize:s,titleColor:u,infoFontSize:a,infoColor:c,highlightBgColor:d,fontFamily:f,padding:p,itemPadding:S,cellSize:y,maxItems:k,numberColumnWidth:m,minWindowWidth:h,offsetX:g,offsetY:v}=En,C=n.cards,F=Math.min(C.length,k),_=[];let R=0;for(let se=0;se<F;se++){const ie=Wn(C[se]);if(ie){_.push({id:C[se],shape:ie.shape});const De=ds(ie.shape,y);R=Math.max(R,De.width)}}const z=s+4,P=a+4,b=z+P+p;let V=0;for(const{shape:se}of _){const ie=ds(se,y);V+=ie.height+S}const K=C.length>k?a+4:0,x=En.probabilitySection,Q=x.sectionMarginTop+x.rowHeight*2+p,D=En.relicSection,Z=Object.keys(mt),I=Math.ceil(Z.length/D.iconsPerRow),$=D.sectionMarginTop+D.labelFontSize+4+I*(D.iconSize+D.iconGap)+p,N=En.valueSection,j=N.sectionMarginTop+N.rowHeight*2+p,le=Object.keys(Ql),oe=Math.ceil(le.length/D.iconsPerRow),Ge=D.sectionMarginTop+D.labelFontSize+4+oe*(D.iconSize+D.iconGap)+p,Re=30+p,Be=N.labelWidth+N.valueWidth+(N.buttonWidth+N.buttonGap)*4+p*2,Ve=D.iconsPerRow*(D.iconSize+D.iconGap)+p*2,fe=Math.max(R+p*2+m+5,h,130,Be,Ve),X=b+V+K+Q+$+j+Ge+Re+p;e.save(),e.fillStyle=i,e.fillRect(g,v,fe,X),e.strokeStyle=u,e.lineWidth=1,e.strokeRect(g,v,fe,X),e.font=`bold ${s}px ${f}`,e.fillStyle=u,e.textAlign="left",e.textBaseline="top";let Y=v+p;e.fillText("DECK",g+p,Y),Y+=z,e.font=`${a}px ${f}`,e.fillStyle=c,e.fillText(`${C.length} / ${n.remainingHands}`,g+p,Y),Y+=P+p/2;for(let se=0;se<_.length;se++){const{shape:ie}=_[se],De=ds(ie,y);se===0&&(e.fillStyle=d,e.fillRect(g+p-2,Y-2,fe-p*2+4,De.height+S)),e.font=`${a}px ${f}`,e.fillStyle=se===0?u:c,e.textAlign="right",e.textBaseline="top",e.fillText(`${se+1}.`,g+p+m-5,Y+(De.height-a)/2),_S(e,ie,g+p+m,Y,y),Y+=De.height+S}C.length>k&&(e.font=`${a}px ${f}`,e.fillStyle=c,e.textAlign="left",e.textBaseline="top",e.fillText(`+${C.length-k}`,g+p,Y),Y+=a+4),Y+=x.sectionMarginTop,e.strokeStyle=u,e.lineWidth=1,e.beginPath(),e.moveTo(g+p,Y-x.sectionMarginTop/2),e.lineTo(g+fe-p,Y-x.sectionMarginTop/2),e.stroke();const O=tf(e,"Pattern",t.patternProbability,g,Y,fe,p);Y+=x.rowHeight;const _e=tf(e,"Seal",t.sealProbability,g,Y,fe,p);Y+=x.rowHeight,Y+=p/2,e.strokeStyle=u,e.lineWidth=1,e.beginPath(),e.moveTo(g+p,Y),e.lineTo(g+fe-p,Y),e.stroke(),Y+=p/2,Y+=D.sectionMarginTop;const Cn=TS(e,o,g,Y,fe,p);Y+=Cn.sectionHeight,e.strokeStyle=u,e.lineWidth=1,e.beginPath(),e.moveTo(g+p,Y),e.lineTo(g+fe-p,Y),e.stroke(),Y+=p/2,Y+=N.sectionMarginTop;const pn=rf(e,"Gold",r,g,Y,fe,p);Y+=N.rowHeight;const Xn=rf(e,"Score",l,g,Y,fe,p);Y+=N.rowHeight,Y+=p/2,e.strokeStyle=u,e.lineWidth=1,e.beginPath(),e.moveTo(g+p,Y),e.lineTo(g+fe-p,Y),e.stroke(),Y+=p/2,Y+=D.sectionMarginTop,e.strokeStyle=u,e.lineWidth=1,e.beginPath(),e.moveTo(g+p,Y-D.sectionMarginTop/2),e.lineTo(g+fe-p,Y-D.sectionMarginTop/2),e.stroke(),e.fillStyle="#DDA0DD",e.font=`${D.labelFontSize}px ${f}`,e.textAlign="left",e.textBaseline="top",e.fillText("Amulets (click to add)",g+p,Y);const pe=Y+D.labelFontSize+4,ee=[];for(let se=0;se<le.length;se++){const ie=le[se],De=Ql[ie],Kn=se%D.iconsPerRow,St=Math.floor(se/D.iconsPerRow),Qn=g+p+Kn*(D.iconSize+D.iconGap),Ln=pe+St*(D.iconSize+D.iconGap);e.font=`${D.iconSize-4}px Arial`,e.textAlign="center",e.textBaseline="middle",e.fillStyle="#FFFFFF",e.fillText(De.icon,Qn+D.iconSize/2,Ln+D.iconSize/2),e.strokeStyle="#9370DB",e.lineWidth=1,e.strokeRect(Qn,Ln,D.iconSize,D.iconSize),ee.push({x:Qn,y:Ln,width:D.iconSize,height:D.iconSize,amuletType:ie})}Y=pe+oe*(D.iconSize+D.iconGap),e.strokeStyle=u,e.lineWidth=1,e.beginPath(),e.moveTo(g+p,Y),e.lineTo(g+fe-p,Y),e.stroke(),Y+=p/2;const hn=fe-p*2,yt=22,rn=g+p,Bn=Y;return hi(e,rn,Bn,hn,yt,"Delete Save","#CC3333","#FFFFFF",11),e.restore(),{patternPlusButton:O.plusButton,patternMinusButton:O.minusButton,sealPlusButton:_e.plusButton,sealMinusButton:_e.minusButton,deleteSaveButton:{x:rn,y:Bn,width:hn,height:yt},windowBounds:{x:g,y:v,width:fe,height:X},relicButtons:Cn.relicButtons,goldMinus50Button:pn.minus50,goldMinus10Button:pn.minus10,goldPlus10Button:pn.plus10,goldPlus50Button:pn.plus50,scoreMinus50Button:Xn.minus50,scoreMinus10Button:Xn.minus10,scorePlus10Button:Xn.plus10,scorePlus50Button:Xn.plus50,amuletButtons:ee}}function Fa(e,n,t,r,l,o,i){const s=i??[{pattern:/(?:\d+(?:\.\d+)?|\S+)/,color:o,bold:!0}],u=[];let a=n;for(;a.length>0;){let y=null;for(const k of s){const m=a.match(k.pattern);m&&m.index!==void 0&&(y===null||m.index<y.index)&&(y={index:m.index,length:m[0].length,rule:k})}if(y===null){u.push({text:a,color:l,bold:!1});break}y.index>0&&u.push({text:a.slice(0,y.index),color:l,bold:!1}),u.push({text:a.slice(y.index,y.index+y.length),color:y.rule.color,bold:y.rule.bold}),a=a.slice(y.index+y.length)}const c=e.font,d=c.match(/(?:bold\s+)?(\d+)px\s+(.+)/),f=d?d[1]:"11",p=d?d[2]:"Arial, sans-serif";let S=t;for(const y of u)e.fillStyle=y.color,e.font=y.bold?`bold ${f}px ${p}`:`${f}px ${p}`,e.fillText(y.text,S,r),S+=e.measureText(y.text).width;e.font=c}const MS=[{pattern:/\+\d+/,color:Kg,bold:!0},{pattern:/\+[\d.]+/,color:Qg,bold:!0},{pattern:/(?:\d+(?:\.\d+)?|\S+)/,color:Ii,bold:!0}];function lf(e,n,t){const r=[],l=n.split("");let o="";for(const i of l){const s=o+i;e.measureText(s).width>t&&o.length>0?(r.push(o),o=i):o=s}return o.length>0&&r.push(o),r}function PS(e,n,t,r,l,o){e.beginPath(),e.moveTo(n+o,t),e.lineTo(n+r-o,t),e.quadraticCurveTo(n+r,t,n+r,t+o),e.lineTo(n+r,t+l-o),e.quadraticCurveTo(n+r,t+l,n+r-o,t+l),e.lineTo(n+o,t+l),e.quadraticCurveTo(n,t+l,n,t+l-o),e.lineTo(n,t+o),e.quadraticCurveTo(n,t,n+o,t),e.closePath()}function IS(e,n,t,r){if(!n.visible||n.effects.length===0)return;const{backgroundColor:l,borderColor:o,borderWidth:i,borderRadius:s,padding:u,maxWidth:a,nameFontSize:c,descFontSize:d,fontFamily:f,nameColor:p,descColor:S,lineHeight:y,offsetX:k,offsetY:m,effectGap:h}=r0;e.save();const g=[],v=a-u*2;for(const b of n.effects){e.font=`bold ${c}px ${f}`;const V=lf(e,b.name,v),K=V.length*c*y;e.font=`${d}px ${f}`;const x=lf(e,b.description,v),Q=x.length*d*y;g.push({nameLines:V,descLines:x,nameHeight:K,descHeight:Q})}let C=0;for(let b=0;b<g.length;b++){const V=g[b];C+=V.nameHeight+V.descHeight,b<g.length-1&&(C+=h)}const F=a,_=C+u*2;let R=n.x+k,z=n.y+m;R+F>t&&(R=n.x-k-F),z+_>r&&(z=n.y-m-_),R<0&&(R=0),z<0&&(z=0),PS(e,R,z,F,_,s),e.fillStyle=l,e.fill(),e.strokeStyle=o,e.lineWidth=i,e.stroke();let P=z+u;for(let b=0;b<g.length;b++){const V=g[b];e.font=`bold ${c}px ${f}`,e.fillStyle=p,e.textAlign="left",e.textBaseline="top";for(const K of V.nameLines)e.fillText(K,R+u,P),P+=c*y;e.font=`${d}px ${f}`;for(const K of V.descLines)Fa(e,K,R+u,P,S,Ii,MS),P+=d*y;b<g.length-1&&(P+=h)}e.restore()}function of(e,n){const{slotSize:t,slotGap:r}=ha;return n+e*(t+r)}function ps(e,n,t,r,l,o,i){e.shadowColor=l,e.shadowBlur=o,e.fillStyle=i,e.beginPath(),e.roundRect(n,t,r,r,6),e.fill(),e.shadowBlur=0}function BS(e,n,t,r,l,o,i,s){const{slotSize:u,slotBorderWidth:a,slotBorderColor:c,slotEmptyBorderColor:d,slotBackgroundColor:f,slotEmptyBackgroundColor:p,iconSize:S}=ha,y=ke.relicAreaX,k=ke.relicAreaY,m=[];e.save();for(let h=0;h<uu;h++){const g=of(h,k),v=h<n.length;e.fillStyle=v?f:p,e.beginPath(),e.roundRect(y,g,u,u,4),e.fill(),e.strokeStyle=v?c:d,e.lineWidth=a,e.beginPath(),e.roundRect(y,g,u,u,4),e.stroke()}return n.length>0&&(e.font=`${S+8}px Arial, sans-serif`,e.textAlign="center",e.textBaseline="middle",n.forEach((h,g)=>{const v=un(h);if(!v)return;const C=y+u/2,F=of(g,k);let _=F+u/2;const R=(l==null?void 0:l.isDragging)&&l.dragIndex===g;R&&(_=l.currentY,e.globalAlpha=.5),l!=null&&l.isDragging&&l.dropTargetIndex===g&&l.dragIndex!==g&&(e.fillStyle="rgba(255, 215, 0, 0.3)",e.beginPath(),e.roundRect(y,F,u,u,4),e.fill());const z=(o==null?void 0:o.has(h))??!1,P=i===h,b=r===h;if(z&&!b&&!R&&(e.globalAlpha=.3),b){ps(e,y,F,u,"#FFD700",12,"rgba(255, 215, 0, 0.25)");const V=1+.15*Math.sin(Date.now()/200);e.save(),e.translate(C,_),e.scale(V,V),e.translate(-C,-_),e.fillStyle="#FFFFFF",e.fillText(v.icon,C,_),e.restore()}else P&&!R?(ps(e,y,F,u,"#00BFFF",8,"rgba(0, 191, 255, 0.2)"),e.fillStyle="#FFFFFF",e.fillText(v.icon,C,_)):s!=null&&s.has(h)&&!R?(ps(e,y,F,u,"#9370DB",8,"rgba(147, 112, 219, 0.2)"),e.fillStyle="#FFFFFF",e.fillText(v.icon,C,_)):(e.fillStyle="#FFFFFF",e.fillText(v.icon,C,_));(R||z)&&(e.globalAlpha=1),m.push({relicId:h,index:g,x:y,y:F,width:u,height:u})})),e.restore(),{relicAreas:m}}function LS(e,n,t){const r=Date.now()-n.startTime,l=Math.min(r/n.duration,1),o=l<.2?l/.2:l>.8?(1-l)/.2:1,{canvasWidth:i,canvasHeight:s}=t,u=i/2,a=s/2,c=ga,d=n.activatedRelics.length*(c.popupHeight+c.popupGap);let f=a-d/2;for(const p of n.activatedRelics){const S=un(p.relicId);if(!S)continue;const y=u-c.popupWidth/2,k=f;e.save(),e.globalAlpha=o,e.shadowColor=c.glowColor,e.shadowBlur=c.glowRadius,e.fillStyle=c.backgroundColor,e.beginPath(),e.roundRect(y,k,c.popupWidth,c.popupHeight,c.borderRadius),e.fill(),e.strokeStyle=c.borderColor,e.lineWidth=c.borderWidth,e.stroke(),e.shadowBlur=0,e.font=`${c.iconSize}px Arial`,e.textAlign="center",e.textBaseline="middle",e.fillStyle="#FFFFFF",e.fillText(S.icon,y+c.iconOffsetX,k+c.popupHeight/2),e.font=`bold ${c.nameFontSize}px ${c.fontFamily}`,e.textAlign="left",e.fillStyle=c.nameColor,e.fillText(S.name,y+c.nameOffsetX,k+c.nameOffsetY),e.font=`bold ${c.bonusFontSize}px ${c.fontFamily}`;const m=typeof p.bonusValue=="number"?`+${p.bonusValue}`:p.bonusValue;Fa(e,m,y+c.nameOffsetX,k+c.bonusOffsetY,c.bonusColor,Ii),e.restore(),f+=c.popupHeight+c.popupGap}return l>=1}function DS(e,n,t){e.save();const r=30,l=Date.now(),o=n.steps[n.currentStepIndex];if(!o)return e.restore(),{fastForwardButton:null};const i=l-n.stepStartTime,s=Math.min(1,i/ur.fadeInDuration);if(n.isCountingUp){const f=l-n.countStartTime,p=Math.min(1,f/ur.countUpDuration),S=1-Math.pow(1-p,3),y=Math.floor(n.startingScore+n.scoreGain*S);return e.font="bold 24px Arial, sans-serif",e.fillStyle="#FFD700",e.textAlign="left",e.textBaseline="top",e.shadowColor="#000000",e.shadowBlur=4,e.fillText(`+${n.scoreGain}  ${y}`,r,t),e.restore(),{fastForwardButton:null}}if(e.globalAlpha=s,o.type==="result")e.font="bold 28px Arial, sans-serif",e.fillStyle="#FFD700",e.textAlign="left",e.textBaseline="top",e.shadowColor="#000000",e.shadowBlur=6,e.fillText(o.formula,r,t);else{e.font="bold 13px Arial, sans-serif",e.textAlign="left",e.textBaseline="top",e.shadowColor="#000000",e.shadowBlur=2,Fa(e,o.label,r,t,"#AAAAAA",Ii);const f=e.measureText(o.formula).width,p=300,S=f>p?Math.floor(16*p/f):16;e.font=`${S}px Arial, sans-serif`,e.fillStyle="#FFFFFF",e.fillText(o.formula,r,t+18)}e.globalAlpha=1;const u=r+250,a=t,c=40,d=28;return e.fillStyle=n.isFastForward?"rgba(255, 215, 0, 0.6)":"rgba(255, 255, 255, 0.2)",e.beginPath(),e.roundRect(u,a,c,d,4),e.fill(),e.font="16px Arial, sans-serif",e.fillStyle="#FFFFFF",e.textAlign="center",e.textBaseline="middle",e.fillText("",u+c/2,a+d/2),e.restore(),{fastForwardButton:{x:u,y:a,width:c,height:d}}}function OS(e,n,t){const r=(n.setNumber-1)*3+1;return["normal","elite","boss"].map((o,i)=>{var c;const s=r+i;let u;s<e?u="cleared":s===e?u="current":u="locked";const a=s===e;return{roundNumber:s,roundType:o,state:u,bossConditionName:o==="boss"&&a?((c=n.bossCondition)==null?void 0:c.name)??null:null,targetScore:a?t:null,reward:a?Wp(o):null}})}function zS(e,n,t,r){const l=Ap,{cardWidth:o,cardHeight:i,cardBorderRadius:s,cardBorderWidth:u}=l,a=l.cardColors[n.state],c=l.typeColors[n.roundType];e.fillStyle=a.background,e.beginPath(),e.roundRect(t,r,o,i,s),e.fill(),e.strokeStyle=a.border,e.lineWidth=u,e.stroke();const d=t+o/2;if(n.state==="cleared")e.font=`bold ${l.clearedMarkFontSize}px Arial, sans-serif`,e.fillStyle=l.clearedMarkColor,e.textAlign="center",e.textBaseline="middle",e.fillText("",d,r+i/2);else if(n.state==="locked")e.font=`${l.lockedMarkFontSize}px Arial, sans-serif`,e.fillStyle=l.lockedMarkColor,e.textAlign="center",e.textBaseline="middle",e.fillText("",d,r+i/2);else{const f={normal:"",elite:"",boss:""};e.font=`bold ${l.typeFontSize}px Arial, sans-serif`,e.fillStyle=c,e.textAlign="center",e.textBaseline="middle",e.fillText(f[n.roundType],d,r+l.typeOffsetY),e.font=`${l.roundFontSize}px Arial, sans-serif`,e.fillStyle="#FFFFFF",e.fillText(`Round ${n.roundNumber}`,d,r+l.roundOffsetY),n.bossConditionName&&(e.font=`${l.conditionFontSize}px Arial, sans-serif`,e.fillStyle=l.conditionColor,e.fillText(`[${n.bossConditionName}]`,d,r+l.conditionOffsetY));const p=n.bossConditionName!==null;if(n.targetScore!==null){const S=p?l.targetBossOffsetY:l.targetOffsetY;e.font=`bold ${l.targetFontSize}px Arial, sans-serif`,e.fillStyle="#FFFFFF",e.fillText(`: ${n.targetScore}`,d,r+S)}if(n.reward!==null){const S=p?l.rewardBossOffsetY:l.rewardOffsetY;e.font=`bold ${l.rewardFontSize}px Arial, sans-serif`,e.fillStyle=l.rewardColor,e.fillText(`Reward ${n.reward}G`,d,r+S)}}}function NS(e,n,t,r,l){const o=Ap;e.save(),e.fillStyle=o.backgroundColor,e.fillRect(0,0,l.canvasWidth,l.canvasHeight);const i=l.canvasWidth/2,s=l.canvasHeight/2;e.font=`bold ${o.setFontSize}px Arial, sans-serif`,e.fillStyle=o.setColor,e.textAlign="center",e.textBaseline="middle",e.fillText(` ${t.setNumber} / ${Math.ceil(Wt.maxRound/3)}`,i,s+o.setOffsetY);const u=OS(n,t,r),a=o.cardWidth*3+o.cardGap*2,c=i-a/2;u.forEach((p,S)=>{const y=c+S*(o.cardWidth+o.cardGap),k=s-o.cardHeight/2-30;zS(e,p,y,k)});const d=i-o.buttonWidth/2,f=s+o.buttonOffsetY;return e.fillStyle=o.buttonColor,e.beginPath(),e.roundRect(d,f,o.buttonWidth,o.buttonHeight,8),e.fill(),e.font=`bold ${o.buttonFontSize}px Arial, sans-serif`,e.fillStyle=o.buttonTextColor,e.textAlign="center",e.textBaseline="middle",e.fillText("",i,f+o.buttonHeight/2),e.restore(),{startButtonArea:{x:d,y:f,width:o.buttonWidth,height:o.buttonHeight}}}function sf(e,n,t,r,l,o){const{padding:i}=qr;e.save(),o&&(e.globalAlpha=Fp.usedOpacity);for(let s=0;s<n.length;s++)for(let u=0;u<n[s].length;u++){if(!n[s][u])continue;const a=t+u*l,c=r+s*l;e.fillStyle=Ae.piece,e.fillRect(a+i/2,c+i/2,l-i,l-i)}return e.restore(),{width:n[0].length*l,height:n.length*l}}function bS(e,n,t,r){const l=Fp;e.save(),e.fillStyle=l.backgroundColor,e.fillRect(0,0,r.canvasWidth,r.canvasHeight);const o=r.canvasWidth/2,i=o-l.areaWidth/2;e.font=`bold ${l.titleFontSize}px Arial, sans-serif`,e.fillStyle=l.titleColor,e.textAlign="center",e.textBaseline="middle",e.fillText("",o,l.titleOffsetY),e.font=`${l.sectionFontSize}px Arial, sans-serif`,e.fillStyle=l.sectionColor,e.textAlign="left",e.textBaseline="top",e.fillText(`${n.cards.length}`,i,l.deckSectionY);let s=i,u=l.deckSectionY+25;const a=l.cardCellSize,c=l.maxCardWidth;n.cards.forEach(S=>{const y=Wn(S);y&&(s+c>i+l.areaWidth&&(s=i,u+=c+l.cardGap),sf(e,y.shape,s,u,a,!1),s+=c+l.cardGap)});const d=t.filter(S=>S.piece!==null).map(S=>S.piece.id.replace(/-\d+-[a-z0-9]+$/,""));e.font=`${l.sectionFontSize}px Arial, sans-serif`,e.fillStyle=l.sectionColor,e.textAlign="left",e.textBaseline="top",e.fillText(`${d.length}`,i,l.usedSectionY),s=i,u=l.usedSectionY+25,d.forEach(S=>{const y=Wn(S);if(!y)return;s+c>i+l.areaWidth&&(s=i,u+=c+l.cardGap);const{width:k,height:m}=sf(e,y.shape,s,u,a,!0);e.fillStyle=l.usedOverlayColor,e.fillRect(s,u,k,m),s+=c+l.cardGap});const f=o-l.closeButtonWidth/2,p=r.canvasHeight+l.closeButtonOffsetY-l.closeButtonHeight;return e.fillStyle=l.closeButtonColor,e.beginPath(),e.roundRect(f,p,l.closeButtonWidth,l.closeButtonHeight,6),e.fill(),e.font=`bold ${l.closeButtonFontSize}px Arial, sans-serif`,e.fillStyle=l.closeButtonTextColor,e.textAlign="center",e.textBaseline="middle",e.fillText("",o,p+l.closeButtonHeight/2),e.restore(),{closeButtonArea:{x:f,y:p,width:l.closeButtonWidth,height:l.closeButtonHeight}}}function $S(e,n,t,r){const l=t.stockSlotPosition;if(!l)return null;const{width:o,height:i,borderWidth:s,borderColor:u,backgroundColor:a,labelFontSize:c,labelColor:d}=ci,f=l.x,p=l.y;if(e.save(),e.font=`${c}px Arial, sans-serif`,e.fillStyle=d,e.textAlign="center",e.textBaseline="bottom",e.fillText("",f+o/2,p-5),e.fillStyle=a,e.fillRect(f,p,o,i),e.strokeStyle=u,e.lineWidth=s,e.strokeRect(f,p,o,i),n&&!(r.isDragging&&r.dragSource==="stock")){const S=t.cellSize*ke.slotCellSizeRatio,y=n.shape[0].length*S,k=n.shape.length*S,m=f+(o-y)/2,h=p+(i-k)/2;Li(e,n,m,h,S,1)}return e.restore(),{bounds:{x:f,y:p,width:o,height:i}}}function WS(e,n,t,r){const l=t.stockSlotPosition;if(!l)return null;const{width:o,height:i,borderWidth:s,backgroundColor:u,labelFontSize:a,labelColor:c}=ci,d=l.x,f=l.y+i+10;if(e.save(),e.font=`${a}px Arial, sans-serif`,e.fillStyle=c,e.textAlign="center",e.textBaseline="bottom",e.fillText("2",d+o/2,f-5),e.fillStyle=u,e.fillRect(d,f,o,i),e.strokeStyle="#9370DB",e.lineWidth=s,e.strokeRect(d,f,o,i),n&&!(r.isDragging&&r.dragSource==="stock2")){const p=t.cellSize*ke.slotCellSizeRatio,S=n.shape[0].length*p,y=n.shape.length*p,k=d+(o-S)/2,m=f+(i-y)/2;Li(e,n,k,m,p,1)}return e.restore(),{bounds:{x:d,y:f,width:o,height:i}}}const Kt={visible:!1,x:0,y:0,effects:[]};function ih(e){const n=[];if(e.pattern){const t=Vt(e.pattern);t&&n.push({name:t.name,description:t.description})}if(e.seal){const t=fr(e.seal);t&&n.push({name:t.name,description:t.description})}return n}function HS(e,n,t){if(n<0||n>=te||t<0||t>=te)return[];const r=e[t][n];if(!r.filled)return[];const l=[];if(r.pattern){const o=Vt(r.pattern);if(o){const i=r.pattern==="charge"?`${o.description}: +${r.chargeValue}`:o.description;l.push({name:o.name,description:i})}}if(r.seal){const o=fr(r.seal);o&&l.push({name:o.name,description:o.description})}return l}function US(e,n,t){const{boardOffsetX:r,boardOffsetY:l,cellSize:o}=t,i=te*o,s=te*o;if(e.x<r||e.x>=r+i||e.y<l||e.y>=l+s)return[];const u=Math.floor((e.x-r)/o),a=Math.floor((e.y-l)/o);return HS(n,u,a)}function YS(e,n,t){const r=t.cellSize*ke.slotCellSizeRatio;for(let l=0;l<n.length;l++){const o=n[l];if(!o.piece)continue;const i=t.slotPositions[l];if(!i)continue;const s=o.piece.shape;for(let u=0;u<s.length;u++)for(let a=0;a<s[u].length;a++){if(!s[u][a])continue;const c=i.x+a*r,d=i.y+u*r;if(e.x>=c&&e.x<c+r&&e.y>=d&&e.y<d+r){const f=vn.get(o.piece.blocks,u,a);if(!f)continue;const p=ih(f);if(p.length>0)return p}}}return[]}const yu=7,sh=30;function GS(e,n,t){const{canvasWidth:r,canvasHeight:l,cellSize:o}=t,i=r/2,s=l/2,u=o*G.cellSizeRatio,a=yu*u+G.itemBoxPadding*2,c=yu*u+G.itemBoxPadding*2+sh,d=n.items.filter(da),f=a*d.length+G.itemBoxGap*(d.length-1),p=i-f/2,S=s+G.itemsOffsetY-c/2;for(let y=0;y<d.length;y++){const k=d[y];if(!k.piece)continue;const m=p+y*(a+G.itemBoxGap),h=k.piece.shape,g=h.length,v=h[0].length,C=v*u,F=g*u,_=m+a/2,R=S+c/2-G.shapeVerticalOffset,z=_-C/2,P=R-F/2;for(let b=0;b<g;b++)for(let V=0;V<v;V++){if(!h[b][V])continue;const K=z+V*u,x=P+b*u;if(e.x>=K&&e.x<K+u&&e.y>=x&&e.y<x+u){const Q=vn.get(k.piece.blocks,b,V);if(!Q)continue;const D=ih(Q);if(D.length>0)return D}}}return[]}function VS(e,n){if(n.length===0)return[];const{slotSize:t,slotGap:r}=ha,l=ke.relicAreaX,o=ke.relicAreaY;for(let i=0;i<n.length;i++){const s=n[i],u=un(s);if(!u)continue;const a=o+i*(t+r);if(e.x>=l&&e.x<l+t&&e.y>=a&&e.y<a+t){const d=mt[s],f=d?wa(d.price):0,p=`${u.description}
: ${f}G`;return[{name:u.name,description:p}]}}return[]}function jS(e,n,t){const{canvasWidth:r,canvasHeight:l,cellSize:o}=t,i=r/2,s=l/2,u=o*G.cellSizeRatio,a=yu*u+G.itemBoxPadding*2+sh,c=n.items.filter(jr);if(c.length===0)return[];const d=s+G.itemsOffsetY-a/2,{relicBoxWidth:f,relicBoxHeight:p,relicRowOffsetY:S}=G,y=f*c.length+G.itemBoxGap*(c.length-1),k=i-y/2,m=d+a+S;for(let h=0;h<c.length;h++){const g=c[h],v=k+h*(f+G.itemBoxGap);if(e.x>=v&&e.x<v+f&&e.y>=m&&e.y<m+p){const C=un(g.relicId);if(C)return[{name:C.name,description:C.description}]}}return[]}function uf(e,n,t){const r=VS(e,n.player.relicDisplayOrder);if(r.length>0)return{visible:!0,x:e.x,y:e.y,effects:r};if(n.phase==="shopping"&&n.shopState){const l=jS(e,n.shopState,t);if(l.length>0)return{visible:!0,x:e.x,y:e.y,effects:l};const o=GS(e,n.shopState,t);return o.length>0?{visible:!0,x:e.x,y:e.y,effects:o}:Kt}if(n.phase==="playing"){const l=US(e,n.board,t);if(l.length>0)return{visible:!0,x:e.x,y:e.y,effects:l};const o=YS(e,n.pieceSlots,t);if(o.length>0)return{visible:!0,x:e.x,y:e.y,effects:o}}return Kt}function xS(e,n,t,r,l,o){const i=Wn(n);if(!i)return{width:0,height:0};const s=t.purchasedPieces.get(n),u=s?s.shape:i.shape,{padding:a,highlightWidth:c,shadowWidth:d}=qr;for(let f=0;f<u.length;f++)for(let p=0;p<u[f].length;p++){if(!u[f][p])continue;const S=r+p*o,y=l+f*o;let k=null;if(s){const h=s.blocks.get(`${f},${p}`);k=(h==null?void 0:h.pattern)??null}const m=k&&ht[k]?ht[k]:{base:Ae.piece,highlight:Ae.pieceHighlight,shadow:Ae.pieceShadow};if(e.fillStyle=m.base,e.fillRect(S+a,y+a,o-a*2,o-a*2),e.fillStyle=m.highlight,e.fillRect(S+a,y+a,o-a*2,c),e.fillRect(S+a,y+a,c,o-a*2),e.fillStyle=m.shadow,e.fillRect(S+a,y+o-a-d,o-a*2,d),e.fillRect(S+o-a-d,y+a,d,o-a*2),k){const h=Vt(k);if(h){const g=Math.max(6,Math.floor(o*.35));e.save(),e.font=`bold ${g}px Arial`,e.fillStyle="#FFFFFF",e.textAlign="center",e.textBaseline="middle",e.fillText(h.symbol,S+o/2,y+o/2),e.restore()}}}return{width:u[0].length*o,height:u.length*o}}function XS(e,n,t,r){const l=r.canvasWidth/2,o=r.canvasHeight/2;e.fillStyle="rgba(0, 0, 0, 0.8)",e.fillRect(0,0,r.canvasWidth,r.canvasHeight);const i={sculpt:" - ",pattern_add:" - ",seal_add:" - ",vanish:" - "};e.font="bold 18px Arial, sans-serif",e.fillStyle="#FFFFFF",e.textAlign="center",e.textBaseline="middle",e.fillText(i[n.amuletType]??"",l,40);const s=[...new Set(t.allMinos)],u=14,a=90,c=100,d=Math.min(5,s.length),f=Math.ceil(s.length/d),p=d*a,S=f*c,y=l-p/2,k=o-S/2,m=[];s.forEach((F,_)=>{const R=_%d,z=Math.floor(_/d),P=y+R*a,b=k+z*c;e.fillStyle="rgba(60, 60, 80, 0.9)",e.beginPath(),e.roundRect(P+2,b+2,a-4,c-4,6),e.fill(),e.strokeStyle="#888888",e.lineWidth=1,e.stroke();const V=Wn(F);if(V){const K=t.purchasedPieces.get(F),x=K?K.shape:V.shape,Q=x[0].length*u,D=x.length*u,Z=P+(a-Q)/2,I=b+(c-D)/2-5;xS(e,F,t,Z,I,u)}e.font="9px Arial, sans-serif",e.fillStyle="#AAAAAA",e.textAlign="center",e.textBaseline="bottom",e.fillText(F.replace(/-\d+-[a-z0-9]+$/,""),P+a/2,b+c-5),m.push({minoId:F,x:P+2,y:b+2,width:a-4,height:c-4})});const h=120,g=36,v=l-h/2,C=k+S+20;return e.fillStyle="#CC5555",e.beginPath(),e.roundRect(v,C,h,g,8),e.fill(),e.font="bold 14px Arial, sans-serif",e.fillStyle="#FFFFFF",e.textAlign="center",e.textBaseline="middle",e.fillText("",v+h/2,C+g/2),{pieceAreas:m,cancelButton:{x:v,y:C,width:h,height:g}}}function KS(e,n,t){const r=t.canvasWidth/2,l=t.canvasHeight/2;e.fillStyle="rgba(0, 0, 0, 0.85)",e.fillRect(0,0,t.canvasWidth,t.canvasHeight);const o=n.editingShape;if(!o)return{sculptCellAreas:[],confirmButton:{x:-1,y:-1,width:0,height:0},cancelButton:{x:-1,y:-1,width:0,height:0}};e.font="bold 18px Arial, sans-serif",e.fillStyle="#FFFFFF",e.textAlign="center",e.textBaseline="middle",e.fillText("",r,l-180);const i=40,s=o.length,u=o[0].length,a=u*i,c=s*i,d=r-a/2,f=l-c/2,p=[],S=qp(o),y=o.reduce((_,R)=>_+R.filter(Boolean).length,0);for(let _=0;_<s;_++)for(let R=0;R<u;R++){const z=d+R*i,P=f+_*i;o[_][R]?(e.fillStyle="#A0522D",e.fillRect(z+2,P+2,i-4,i-4),e.fillStyle="#CD853F",e.fillRect(z+2,P+2,i-4,3),e.fillRect(z+2,P+2,3,i-4),e.fillStyle="#5D3A1A",e.fillRect(z+2,P+i-5,i-4,3),e.fillRect(z+i-5,P+2,3,i-4)):(e.fillStyle="rgba(100, 100, 100, 0.3)",e.fillRect(z+2,P+2,i-4,i-4)),e.strokeStyle="#666666",e.lineWidth=1,e.strokeRect(z,P,i,i),p.push({row:_,col:R,x:z,y:P,width:i,height:i})}!S&&y>0&&(e.font="bold 14px Arial, sans-serif",e.fillStyle="#FF6666",e.textAlign="center",e.fillText("",r,f+c+25));const k=f+c+50,m=100,h=36,g=20,v=r-m-g/2,C=S&&y>0;e.fillStyle=C?"#4CAF50":"#555555",e.beginPath(),e.roundRect(v,k,m,h,8),e.fill(),e.font="bold 14px Arial, sans-serif",e.fillStyle="#FFFFFF",e.textAlign="center",e.textBaseline="middle",e.fillText("",v+m/2,k+h/2);const F=r+g/2;return e.fillStyle="#CC5555",e.beginPath(),e.roundRect(F,k,m,h,8),e.fill(),e.fillStyle="#FFFFFF",e.fillText("",F+m/2,k+h/2),{sculptCellAreas:p,confirmButton:{x:v,y:k,width:m,height:h},cancelButton:{x:F,y:k,width:m,height:h}}}function QS(e,n,t,r){if(e.save(),n.step==="select_piece"){const l=XS(e,n,t,r);return e.restore(),{pieceAreas:l.pieceAreas,sculptCellAreas:[],confirmButton:null,cancelButton:l.cancelButton}}if(n.step==="sculpt_edit"){const l=KS(e,n,r);return e.restore(),{pieceAreas:[],sculptCellAreas:l.sculptCellAreas,confirmButton:l.confirmButton,cancelButton:l.cancelButton}}return e.restore(),{pieceAreas:[],sculptCellAreas:[],confirmButton:null,cancelButton:{x:-1,y:-1,width:0,height:0}}}function ZS({state:e,layout:n,debugSettings:t,onDragStart:r,onDragStartFromStock:l,onDragStartFromStock2:o,onDragMove:i,onDragEnd:s,onClearAnimationEnd:u,onRelicActivationAnimationEnd:a,onAdvanceScoreStep:c,onEndScoreAnimation:d,onSetFastForward:f,onAdvanceRound:p,onReset:S,onBuyItem:y,onLeaveShop:k,onRerollShop:m,onStartSellMode:h,onCancelSellMode:g,onSellRelic:v,onUpdateDebugSettings:C,onDeleteSave:F,onStartRound:_,onOpenDeckView:R,onCloseDeckView:z,onMoveToStock:P,onMoveFromStock:b,onSwapWithStock:V,onMoveToStock2:K,onMoveFromStock2:x,onSwapWithStock2:Q,onReorderRelic:D,onApplyPendingPhase:Z,onUseAmulet:I,onAmuletSelectPiece:$,onAmuletConfirm:N,onAmuletCancel:j,onAmuletSell:le,onAmuletSculptToggleBlock:oe,onDebugToggleRelic:Ge,onDebugAddGold:Re,onDebugAddScore:Be,onDebugAddAmulet:Ve,onDebugRemoveAmulet:fe}){var Ra,_a,Ta,Ea,Ma,Pa,Ia;const[X,Y]=L.useState(null),[O,_e]=L.useState(!1),[Cn,pn]=L.useState(Kt),Xn=L.useRef(window.devicePixelRatio||1),pe=L.useRef(!1),ee=L.useRef(null),hn=L.useRef(null),yt=L.useRef(null),rn=L.useRef(null),Bn=L.useRef(null),se=L.useRef(null),ie=L.useRef(null),De=L.useRef(null),Kn=L.useRef(null),St=L.useRef(null),Qn=L.useRef(null),Ln=L.useRef(null),Zn=L.useRef(null),Pe=L.useRef(!1),Qe=L.useRef(!1),Oe=L.useRef({isDragging:!1,dragIndex:null,currentY:0,dropTargetIndex:null}),uh=L.useCallback(W=>{Y(W)},[]),ln=L.useCallback(()=>{var nl,tl,rl,ll,jt,ol;if(!X)return;const W=X.getContext("2d");if(!W)return;const ge=Xn.current;W.setTransform(ge,0,0,ge,0,0),W.fillStyle=Ae.boardBackground,W.fillRect(0,0,n.canvasWidth,n.canvasHeight);const Se=e.relicMultiplierState.copyRelicState,Ze=(Se==null?void 0:Se.targetRelicId)==="bandaid"?3-Se.bandaidCounter:null,An=ue(e.player.ownedRelics,"timing")&&e.deck.remainingHands%3===0;De.current=hS(W,{targetScore:e.targetScore,roundScore:e.score,gold:e.player.gold,roundInfo:e.roundInfo,remainingHands:e.deck.remainingHands,bandaidCountdown:ue(e.player.ownedRelics,"bandaid")?O0(e.relicMultiplierState):null,timingBonusActive:An,pendingPhase:e.pendingPhase,scoreAnimation:e.scoreAnimation,copyBandaidCountdown:Ze,amuletStock:e.player.amuletStock});const vt=((nl=e.scoreAnimation)==null?void 0:nl.highlightedRelicId)??null,Jn=new Set;ue(e.player.ownedRelics,"volcano")&&!e.volcanoEligible&&Jn.add("volcano"),Sy(e.player.relicDisplayOrder)&&Jn.add("copy");const el=An?"timing":null,dr=new Set;if(ue(e.player.ownedRelics,"copy")){const Je=Fn(e.player.relicDisplayOrder);Je&&(dr.add("copy"),dr.add(Je))}Ln.current=BS(W,e.player.relicDisplayOrder,n,vt,Oe.current,Jn,el,dr);const q=(()=>{var qn;if(!((qn=e.clearingAnimation)!=null&&qn.isAnimating))return null;const Je=Date.now()-e.clearingAnimation.startTime;return e.clearingAnimation.cells.filter(hr=>{const mr=hr.delay??0;return Je>=mr})})();lS(W,e.board,n,q),e.scriptRelicLines&&oS(W,e.scriptRelicLines,n),aS(W,e.board,e.pieceSlots,e.dragState,n),sS(W,e.pieceSlots,n,e.dragState),Kn.current=$S(W,e.deck.stockSlot,n,e.dragState);const lo=(tl=e.relicMultiplierState.copyRelicState)==null?void 0:tl.targetRelicId,pr=ue(e.player.ownedRelics,"hand_stock")&&ue(e.player.ownedRelics,"copy")&&lo==="hand_stock";St.current=pr?WS(W,e.deck.stockSlot2,n,e.dragState):null,uS(W,e.pieceSlots,e.dragState,n);const Un=e.dragState.isDragging&&e.dragState.currentPos?e.dragState.dragSource==="stock"?e.deck.stockSlot:e.dragState.dragSource==="stock2"?e.deck.stockSlot2:null:null;if(Un&&e.dragState.currentPos){const Je=Un.shape[0].length*n.cellSize,qn=Un.shape.length*n.cellSize,hr=e.dragState.currentPos.x-Je/2,mr=e.dragState.currentPos.y-qn/2;W.globalAlpha=.8;for(let et=0;et<Un.shape.length;et++)for(let wt=0;wt<Un.shape[et].length;wt++){if(!Un.shape[et][wt])continue;const oo=hr+wt*n.cellSize,gr=mr+et*n.cellSize,nt=vn.get(Un.blocks,et,wt),io=(nt==null?void 0:nt.pattern)??null,T=(nt==null?void 0:nt.seal)??null;oh(W,oo,gr,n.cellSize,io,T)}W.globalAlpha=1}if((rl=e.clearingAnimation)!=null&&rl.isAnimating&&dS(W,e.clearingAnimation,n)&&u(),(ll=e.relicActivationAnimation)!=null&&ll.isAnimating&&LS(W,e.relicActivationAnimation,n)&&a(),(jt=e.scoreAnimation)!=null&&jt.isAnimating&&De.current?Qn.current=DS(W,e.scoreAnimation,De.current.formulaY):Qn.current=null,e.phase==="round_progress")se.current=NS(W,e.round,e.roundInfo,e.targetScore,n),hn.current=null,rn.current=null;else if(e.phase==="round_clear"){const Je=pu(e.deck.remainingHands,e.roundInfo.roundType),qn=hu(e.player.gold);mS(W,e.round,Je,qn,e.player.gold,n),hn.current=null,rn.current=null,se.current=null}else e.phase==="shopping"&&e.shopState?(rn.current=RS(W,e.shopState,e.player.gold,n,e.shopState.rerollCount,e.player.relicDisplayOrder,e.player.amuletStock.length),hn.current=null,se.current=null):e.phase==="game_over"?(hn.current=gS(W,e.round,e.score,e.player.earnedGold,n),rn.current=null,se.current=null):e.phase==="game_clear"?(hn.current=yS(W,e.player.earnedGold,n),rn.current=null,se.current=null):(hn.current=null,rn.current=null,se.current=null);e.deckViewOpen?ie.current=bS(W,e.deck,e.pieceSlots,n):ie.current=null,e.amuletModal?Zn.current=QS(W,e.amuletModal,e.deck,n):Zn.current=null,O?Bn.current=ES(W,e.deck,t,e.player.gold,e.score,e.player.ownedRelics):Bn.current=null,Cn.visible&&!e.dragState.isDragging&&!((ol=e.clearingAnimation)!=null&&ol.isAnimating)&&e.phase!=="round_clear"&&e.phase!=="game_over"&&e.phase!=="game_clear"&&IS(W,Cn,n.canvasWidth,n.canvasHeight)},[X,e,n,u,a,O,t,Cn]);return L.useEffect(()=>{if(e.scoreAnimation!==null||!e.pendingPhase)return;const W=setTimeout(()=>{Z()},ur.postAnimationDelay);return()=>clearTimeout(W)},[e.scoreAnimation,e.pendingPhase,Z]),L.useEffect(()=>{if(!X)return;const W=window.devicePixelRatio||1;Xn.current=W,X.width=n.canvasWidth*W,X.height=n.canvasHeight*W,X.style.width=`${n.canvasWidth}px`,X.style.height=`${n.canvasHeight}px`},[X,n]),L.useEffect(()=>{ln()},[ln]),L.useEffect(()=>{if(!e.dragState.isDragging)return;let W;const ge=()=>{ln(),W=requestAnimationFrame(ge)};return W=requestAnimationFrame(ge),()=>{cancelAnimationFrame(W)}},[e.dragState.isDragging,ln]),L.useEffect(()=>{var Se;if(!((Se=e.clearingAnimation)!=null&&Se.isAnimating))return;let W;const ge=()=>{ln(),W=requestAnimationFrame(ge)};return W=requestAnimationFrame(ge),()=>{cancelAnimationFrame(W)}},[(Ra=e.clearingAnimation)==null?void 0:Ra.isAnimating,ln]),L.useEffect(()=>{var Se;if(!((Se=e.relicActivationAnimation)!=null&&Se.isAnimating))return;let W;const ge=()=>{ln(),W=requestAnimationFrame(ge)};return W=requestAnimationFrame(ge),()=>{cancelAnimationFrame(W)}},[(_a=e.relicActivationAnimation)==null?void 0:_a.isAnimating,ln]),L.useEffect(()=>{var Se;if(!((Se=e.scoreAnimation)!=null&&Se.isAnimating))return;let W;const ge=()=>{const Ze=e.scoreAnimation;if(!Ze||!Ze.isAnimating)return;const An=Date.now(),vt=Ze.isFastForward?200:Ze.stepDuration;if(Ze.isCountingUp){if(An-Ze.countStartTime>=500){d();return}}else An-Ze.stepStartTime>=vt&&c();ln(),W=requestAnimationFrame(ge)};return W=requestAnimationFrame(ge),()=>{cancelAnimationFrame(W)}},[(Ta=e.scoreAnimation)==null?void 0:Ta.isAnimating,(Ea=e.scoreAnimation)==null?void 0:Ea.currentStepIndex,(Ma=e.scoreAnimation)==null?void 0:Ma.isCountingUp,(Pa=e.scoreAnimation)==null?void 0:Pa.isFastForward,ln,c,d]),L.useEffect(()=>{if(e.phase!=="round_clear"){yt.current=null;return}yt.current===null&&(yt.current=Date.now());const W=setTimeout(()=>{p()},Cp.duration);return()=>{clearTimeout(W)}},[e.phase,p]),L.useEffect(()=>{const W=Se=>{var Ze;Se.shiftKey&&Se.key==="!"&&_e(An=>!An),Se.code==="Space"&&((Ze=e.scoreAnimation)!=null&&Ze.isAnimating)&&(Se.preventDefault(),f(!0))},ge=Se=>{Se.code==="Space"&&f(!1)};return window.addEventListener("keydown",W),window.addEventListener("keyup",ge),()=>{window.removeEventListener("keydown",W),window.removeEventListener("keyup",ge)}},[(Ia=e.scoreAnimation)==null?void 0:Ia.isAnimating,f]),L.useEffect(()=>{if(!X)return;const W=T=>{const w=X.getBoundingClientRect();return{x:T.clientX-w.left,y:T.clientY-w.top}},ge=T=>{for(let w=0;w<e.pieceSlots.length;w++){const B=e.pieceSlots[w];if(!B.piece)continue;const U=n.slotPositions[w];if(!U)continue;const ve=zp(B.piece.shape),ce=n.cellSize*ke.slotCellSizeRatio,il=ve.width*ce,Oi=ve.height*ce;if(T.x>=U.x&&T.x<=U.x+il&&T.y>=U.y&&T.y<=U.y+Oi)return w}return null},Se=(T,w)=>{const B=e.pieceSlots[w];if(!(B!=null&&B.piece))return null;const U=B.piece.shape,ve=U[0].length*n.cellSize,ce=U.length*n.cellSize,il=T.x-ve/2,Oi=T.y-ce/2;return Gc({x:il,y:Oi},n.boardOffsetX,n.boardOffsetY,n.cellSize)},Ze=T=>{const w=e.deck.stockSlot;if(!w)return null;const B=w.shape,U=B[0].length*n.cellSize,ve=B.length*n.cellSize,ce=T.x-U/2,il=T.y-ve/2;return Gc({x:ce,y:il},n.boardOffsetX,n.boardOffsetY,n.cellSize)},An=T=>{const w=Kn.current;return w?q(T,w.bounds):!1},vt=()=>e.deck.stockSlot!==null,Jn=T=>{const w=St.current;return w?q(T,w.bounds):!1},el=()=>e.deck.stockSlot2!==null,dr=T=>{const w=hn.current;return w?T.x>=w.x&&T.x<=w.x+w.width&&T.y>=w.y&&T.y<=w.y+w.height:!1},q=(T,w)=>T.x>=w.x&&T.x<=w.x+w.width&&T.y>=w.y&&T.y<=w.y+w.height,lo=T=>{const w=Zn.current;if(!w||!e.amuletModal)return!1;if(q(T,w.cancelButton))return j(),!0;if(w.confirmButton&&q(T,w.confirmButton))return N(),!0;for(const B of w.pieceAreas)if(q(T,B))return $(B.minoId),!0;for(const B of w.sculptCellAreas)if(q(T,B))return oe(B.row,B.col),!0;return!0},pr=T=>{const w=De.current;if(!w)return!1;for(const B of w.amuletSlotAreas)if(q(T,B))return I(B.amuletIndex),!0;return!1},Un=T=>{const w=rn.current;if(!w||!e.shopState)return!1;if(e.shopState.sellMode){if(w.cancelSellButtonArea&&q(T,w.cancelSellButtonArea))return g(),!0;for(const B of w.ownedRelicAreas)if(q(T,B))return v(B.relicIndex),!0;return!0}if(w.sellButtonArea&&q(T,w.sellButtonArea))return h(),!0;if(q(T,w.rerollButtonArea))return at(e.player.gold,ka(e.shopState.rerollCount))&&m(),!0;if(q(T,w.leaveButtonArea))return k(),!0;for(const B of w.itemAreas)if(q(T,B)){const U=e.shopState.items[B.itemIndex];if(!U.purchased&&at(e.player.gold,U.price)){if(ai(U)&&e.player.amuletStock.length>=Kr)return!0;y(B.itemIndex)}return!0}return!1},Di=T=>{const w=Bn.current;if(!w||!O)return!1;const{MIN:B,MAX:U,STEP:ve}=t0;if(q(T,w.patternMinusButton))return C({patternProbability:Math.max(B,t.patternProbability-ve)}),!0;if(q(T,w.patternPlusButton))return C({patternProbability:Math.min(U,t.patternProbability+ve)}),!0;if(q(T,w.sealMinusButton))return C({sealProbability:Math.max(B,t.sealProbability-ve)}),!0;if(q(T,w.sealPlusButton))return C({sealProbability:Math.min(U,t.sealProbability+ve)}),!0;for(const ce of w.relicButtons)if(q(T,ce))return Ge(ce.relicType),!0;if(q(T,w.goldMinus50Button))return Re(-50),!0;if(q(T,w.goldMinus10Button))return Re(-10),!0;if(q(T,w.goldPlus10Button))return Re(10),!0;if(q(T,w.goldPlus50Button))return Re(50),!0;if(q(T,w.scoreMinus50Button))return Be(-50),!0;if(q(T,w.scoreMinus10Button))return Be(-10),!0;if(q(T,w.scorePlus10Button))return Be(10),!0;if(q(T,w.scorePlus50Button))return Be(50),!0;for(const ce of w.amuletButtons)if(q(T,ce))return Ve(ce.amuletType),!0;return q(T,w.deleteSaveButton)?(F(),!0):!!q(T,w.windowBounds)},nl=T=>{const w=se.current;return w&&q(T,w.startButtonArea)?(_(),!0):!1},tl=T=>{const w=ie.current;return!w||!e.deckViewOpen?!1:(q(T,w.closeButtonArea)&&z(),!0)},rl=T=>{const w=De.current;return w&&q(T,w.deckButtonArea)?(R(),!0):!1},ll=T=>{var B;if(!((B=e.scoreAnimation)!=null&&B.isAnimating))return!1;const w=Qn.current;return w!=null&&w.fastForwardButton&&q(T,w.fastForwardButton)?(f(!e.scoreAnimation.isFastForward),!0):(c(),!0)},jt=T=>{const w=Ln.current;if(!w)return null;for(const B of w.relicAreas)if(q(T,B))return B.index;return null},ol=T=>{const w=Ln.current;if(!w||w.relicAreas.length===0)return null;for(const B of w.relicAreas)if(T.y>=B.y&&T.y<B.y+B.height)return B.index;return null},Je=()=>{var T,w;return(e.phase==="playing"||e.phase==="round_progress")&&!((T=e.scoreAnimation)!=null&&T.isAnimating)&&!((w=e.clearingAnimation)!=null&&w.isAnimating)},qn=T=>{var U,ve;T.preventDefault();const w=W(T);if(Di(w))return;if(e.amuletModal){lo(w);return}if((U=e.scoreAnimation)!=null&&U.isAnimating){ll(w);return}if(e.deckViewOpen){tl(w);return}if(e.phase==="round_progress"){if(Je()){const ce=jt(w);if(ce!==null){Oe.current={isDragging:!0,dragIndex:ce,currentY:w.y,dropTargetIndex:ce};return}}nl(w);return}if(e.phase==="shopping"){if(pr(w))return;Un(w);return}if(e.phase==="game_over"||e.phase==="game_clear"){dr(w)&&S();return}if((ve=e.clearingAnimation)!=null&&ve.isAnimating||e.phase==="round_clear"||e.phase==="playing"&&pr(w)||e.phase==="playing"&&rl(w))return;if(Je()){const ce=jt(w);if(ce!==null){Oe.current={isDragging:!0,dragIndex:ce,currentY:w.y,dropTargetIndex:ce};return}}if(e.phase==="playing"&&An(w)&&vt()){pe.current=!0,Pe.current=!0,ee.current=null,l(w);return}if(e.phase==="playing"&&Jn(w)&&el()){pe.current=!0,Qe.current=!0,ee.current=null,o(w);return}const B=ge(w);B!==null&&(pe.current=!0,Pe.current=!1,Qe.current=!1,ee.current=B,r(B,w))},hr=T=>{if(Oe.current.isDragging){T.preventDefault();const B=W(T),U=ol(B);Oe.current={...Oe.current,currentY:B.y,dropTargetIndex:U},ln();return}if(!pe.current||!Pe.current&&ee.current===null)return;T.preventDefault();const w=W(T);if(Pe.current){const B=Ze(w);i(w,B)}else if(ee.current!==null){const B=Se(w,ee.current);i(w,B)}},mr=T=>{if(Oe.current.isDragging){T.preventDefault();const{dragIndex:B,dropTargetIndex:U}=Oe.current;B!==null&&U!==null&&B!==U&&D(B,U),Oe.current={isDragging:!1,dragIndex:null,currentY:0,dropTargetIndex:null},ln();return}if(!pe.current)return;T.preventDefault();const w=W(T);if(!Pe.current&&!Qe.current&&ee.current!==null){if(An(w)&&n.stockSlotPosition){vt()?V(ee.current):P(ee.current),pe.current=!1,Pe.current=!1,Qe.current=!1,ee.current=null;return}if(Jn(w)){el()?Q(ee.current):K(ee.current),pe.current=!1,Pe.current=!1,Qe.current=!1,ee.current=null;return}}if(Pe.current){const B=ge(w);if(B!==null){const U=e.pieceSlots[B];if(U&&!U.piece){b(B),pe.current=!1,Pe.current=!1,ee.current=null;return}}}if(Qe.current){const B=ge(w);if(B!==null){const U=e.pieceSlots[B];if(U&&!U.piece){x(B),pe.current=!1,Qe.current=!1,ee.current=null;return}}}pe.current=!1,Pe.current=!1,ee.current=null,s()},et=T=>{const w=uf(T,e,n);return Cn.visible&&w.visible&&w.effects.length>0&&Cn.effects.length>0&&Cn.effects[0].name===w.effects[0].name?(pn(Kt),!0):w.visible&&w.effects.length>0?(pn(w),!0):(Cn.visible&&pn(Kt),!1)},wt=T=>{var U,ve;T.preventDefault();const w=W(T.touches[0]);if(Di(w))return;if(e.amuletModal){lo(w);return}if((U=e.scoreAnimation)!=null&&U.isAnimating){ll(w);return}if(e.deckViewOpen){tl(w);return}if(e.phase==="round_progress"){if(Je()){const ce=jt(w);if(ce!==null){Oe.current={isDragging:!0,dragIndex:ce,currentY:w.y,dropTargetIndex:ce};return}}nl(w);return}if(e.phase!=="shopping"&&e.phase!=="round_clear"&&e.phase!=="game_over"&&e.phase!=="game_clear"&&et(w))return;if(e.phase==="shopping"){if(pr(w)||et(w))return;Un(w);return}if(e.phase==="game_over"||e.phase==="game_clear"){dr(w)&&S();return}if((ve=e.clearingAnimation)!=null&&ve.isAnimating||e.phase==="round_clear"||e.phase==="playing"&&pr(w)||e.phase==="playing"&&rl(w))return;if(Je()){const ce=jt(w);if(ce!==null){Oe.current={isDragging:!0,dragIndex:ce,currentY:w.y,dropTargetIndex:ce};return}}if(e.phase==="playing"&&An(w)&&vt()){pe.current=!0,Pe.current=!0,ee.current=null,l(w);return}if(e.phase==="playing"&&Jn(w)&&el()){pe.current=!0,Qe.current=!0,ee.current=null,o(w);return}const B=ge(w);B!==null&&(pe.current=!0,Pe.current=!1,Qe.current=!1,ee.current=B,r(B,w))},oo=T=>{if(Oe.current.isDragging){T.preventDefault();const B=W(T.touches[0]),U=ol(B);Oe.current={...Oe.current,currentY:B.y,dropTargetIndex:U},ln();return}if(!pe.current||!Pe.current&&ee.current===null)return;T.preventDefault();const w=W(T.touches[0]);if(Pe.current){const B=Ze(w);i(w,B)}else if(ee.current!==null){const B=Se(w,ee.current);i(w,B)}},gr=T=>{if(Oe.current.isDragging){T.preventDefault();const{dragIndex:B,dropTargetIndex:U}=Oe.current;B!==null&&U!==null&&B!==U&&D(B,U),Oe.current={isDragging:!1,dragIndex:null,currentY:0,dropTargetIndex:null},ln();return}if(!pe.current)return;T.preventDefault();const w=T.changedTouches[0];if(w){const B=W(w);if(!Pe.current&&ee.current!==null&&An(B)&&n.stockSlotPosition){vt()?V(ee.current):P(ee.current),pe.current=!1,Pe.current=!1,ee.current=null;return}if(Pe.current){const U=ge(B);if(U!==null){const ve=e.pieceSlots[U];if(ve&&!ve.piece){b(U),pe.current=!1,Pe.current=!1,ee.current=null;return}}}if(Qe.current){const U=ge(B);if(U!==null){const ve=e.pieceSlots[U];if(ve&&!ve.piece){x(U),pe.current=!1,Qe.current=!1,ee.current=null;return}}}}pe.current=!1,Pe.current=!1,ee.current=null,s()},nt=T=>{if(pe.current){pn(U=>U.visible?Kt:U);return}const w=W(T),B=uf(w,e,n);pn(U=>U.visible===B.visible&&U.x===B.x&&U.y===B.y&&U.effects.length===B.effects.length?U:B)},io=()=>{pn(T=>T.visible?Kt:T)};return X.addEventListener("mousedown",qn),X.addEventListener("mousemove",nt),X.addEventListener("mouseleave",io),window.addEventListener("mousemove",hr),window.addEventListener("mouseup",mr),X.addEventListener("touchstart",wt,{passive:!1}),window.addEventListener("touchmove",oo,{passive:!1}),window.addEventListener("touchend",gr,{passive:!1}),window.addEventListener("touchcancel",gr,{passive:!1}),()=>{X.removeEventListener("mousedown",qn),X.removeEventListener("mousemove",nt),X.removeEventListener("mouseleave",io),window.removeEventListener("mousemove",hr),window.removeEventListener("mouseup",mr),X.removeEventListener("touchstart",wt),window.removeEventListener("touchmove",oo),window.removeEventListener("touchend",gr),window.removeEventListener("touchcancel",gr)}},[X,n,e.pieceSlots,e.clearingAnimation,e.scoreAnimation,e.phase,e.shopState,e.player,e.board,e.dragState,e.deckViewOpen,e.amuletModal,r,i,s,S,y,k,m,h,g,v,_,R,z,c,f,D,I,$,N,j,oe,Ve,O,t,C]),Tt.jsx("canvas",{ref:uh,className:"touch-none",style:{display:"block"}})}function JS(){const{state:e,debugSettings:n,actions:t}=Zy(),r=Jy(e.pieceSlots,e.player.ownedRelics),l=L.useCallback(o=>{e.player.ownedRelics.includes(o)?t.debugRemoveRelic(o):t.debugAddRelic(o)},[e.player.ownedRelics,t]);return r?Tt.jsx("div",{className:"flex flex-col items-center justify-start bg-wood-board min-h-screen overflow-hidden",style:{touchAction:"none"},children:Tt.jsx(ZS,{state:e,layout:r,debugSettings:n,onDragStart:t.startDrag,onDragStartFromStock:t.startDragFromStock,onDragStartFromStock2:t.startDragFromStock2,onDragMove:t.updateDrag,onDragEnd:t.endDrag,onClearAnimationEnd:t.endClearAnimation,onRelicActivationAnimationEnd:t.endRelicActivationAnimation,onAdvanceScoreStep:t.advanceScoreStep,onEndScoreAnimation:t.endScoreAnimation,onSetFastForward:t.setFastForward,onAdvanceRound:t.advanceRound,onReset:t.resetGame,onBuyItem:t.buyItem,onLeaveShop:t.leaveShop,onRerollShop:t.rerollShop,onStartSellMode:t.startSellMode,onCancelSellMode:t.cancelSellMode,onSellRelic:t.sellRelic,onUpdateDebugSettings:t.updateDebugSettings,onDeleteSave:t.deleteSave,onStartRound:t.startRound,onOpenDeckView:t.openDeckView,onCloseDeckView:t.closeDeckView,onMoveToStock:t.moveToStock,onMoveFromStock:t.moveFromStock,onSwapWithStock:t.swapWithStock,onMoveToStock2:t.moveToStock2,onMoveFromStock2:t.moveFromStock2,onSwapWithStock2:t.swapWithStock2,onReorderRelic:t.reorderRelic,onApplyPendingPhase:t.applyPendingPhase,onUseAmulet:t.useAmulet,onAmuletSelectPiece:t.amuletSelectPiece,onAmuletConfirm:t.amuletConfirm,onAmuletCancel:t.amuletCancel,onAmuletSell:t.amuletSell,onAmuletSculptToggleBlock:t.amuletSculptToggleBlock,onDebugToggleRelic:l,onDebugAddGold:t.debugAddGold,onDebugAddScore:t.debugAddScore,onDebugAddAmulet:t.debugAddAmulet,onDebugRemoveAmulet:t.debugRemoveAmulet})}):Tt.jsx("div",{className:"flex items-center justify-center h-screen bg-wood-board",children:Tt.jsx("div",{className:"text-white text-xl",children:"Loading..."})})}function qS(){return Tt.jsx(JS,{})}hs.createRoot(document.getElementById("root")).render(Tt.jsx(Th.StrictMode,{children:Tt.jsx(qS,{})}));
