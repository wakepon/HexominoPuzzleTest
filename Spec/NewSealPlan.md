# 新シール案 第1弾（10種）

## ステータス: アイデア段階

既存6種のシールとの差別化、および新パターン案（NewPatterns1.md）との役割分担を意識した10種の新シールを提案する。

---

## パターンとシールの設計上の棲み分け

シールの追加案を検討する前に、パターンとシールの本質的な違いを整理する。

| 観点 | パターン | シール |
|---|---|---|
| 付与対象 | ピース全体（全ブロック共通） | 個別セル（1ピースに1セルのみ） |
| 数量 | 消去時に複数セルが同じパターン | 消去時に含まれるのは通常0〜1個 |
| 効果の方向性 | 「このピースの性質」を定義 | 「この1マスに刻まれた特殊効果」 |
| 適した効果 | 集団的・数量依存（combo, link等） | 希少・高インパクト・位置依存 |

### シールに適した設計空間

1. **位置特異性**: 特定セルの位置が重要（arrow_v/hはまさにこれ）
2. **高インパクト単発効果**: 1セルなので1個あたりの価値が高い（score+5, arrow+10）
3. **メタ効果**: 他のシール/パターンを増幅・変換（multi）
4. **時間軸効果**: セル単位で蓄積する個別カウンター
5. **次の行動への影響**: 消去後に次の消去や配置に効果を持ち越す
6. **経済効果**: スコア外の報酬（gold）

### パターンとの重複を避けた理由で不採用にしたアイデア

| 不採用アイデア | 理由 |
|---|---|
| 十字シール（交差点で+15） | crystal(P04)と効果が被る |
| 開花シール（影マーカー設置） | shadow(P05)と効果が被る |
| 蓄積シール（配置ごとに+1） | chargeパターンの劣化版 |
| 確率スコアシール（X%で+N） | lucky/spark(P16)と被る |

---

## 新シール一覧

---

### S01: 時計シール (timer)

| 項目 | 値 |
|---|---|
| type | `timer` |
| name | 時計シール |
| symbol | ⏱ |
| preventsClearing | false |
| ショップ出現 | 可能 |
| description | 盤面滞在手数×2をブロック点に加算 |

**効果詳細**: timerシール付きセルが消去される際、そのセルが盤面に配置されてから経過した手数（他ピースの配置回数）× 2 をブロック点(A)に加算する。

例: 配置後に5手経過して消去 → ブロック点+10

**chargeパターンとの差別化**: chargeは「パターンとしてピース全体に適用」され全ブロックが蓄積する。timerは「シールとして1セルのみ」だが、1セルあたりの係数が×2でchargeの×1より高い。chargeは基礎ブロック数から除外されるデメリットがあるが、timerにはない。

**シナジー**:
- chargeパターン → charge(全ブロック×1蓄積) + timer(1セル×2蓄積)で二重蓄積
- 忍耐(R14: 3手溜めてから消去) → 忍耐の溜め期間中にtimerも蓄積
- チャージ加速器(R35) → chargeの蓄積速度UP + timerの自然蓄積で「待ち」ビルド

**実装複雑度**: 低。charge蓄積と同様のカウンター管理。Cellに`timerValue`を追加し、ピース配置ごとにインクリメント。

---

### S02: 連鎖シール (chain)

| 項目 | 値 |
|---|---|
| type | `chain` |
| name | 連鎖シール |
| symbol | ⛓ |
| preventsClearing | false |
| ショップ出現 | 可能 |
| description | 消去時、次のライン消去のブロック点に+5を付与 |

**効果詳細**: chainシール付きセルが消去された場合、GameStateに「次回消去ボーナス+5」を記録する。次にライン消去が発生した際、そのボーナスがブロック点(A)に加算され、ボーナスはリセットされる。ライン消去が発生しなかった場合はボーナスは持ち越される（消えない）。複数のchainシールが同時に消去された場合は加算（+5×個数）。

**既存シールとの差別化**: score(即時+5)と同じ値だが、「今ではなく次の消去」に持ち越す点が異なる。連続消去を前提とした戦略的なタイミング設計を促す。

**シナジー**:
- rensha（既存: 連続消去で累積倍率）→ 連続消去のA側ボーナスとしてchainが機能
- echo(P03: 前回スコアの10%加算) → chain(+5持越し) → echo(前回の10%)で連鎖的にスコアが成長
- 連射ビルド全般 → 毎手消去でchainボーナスが毎回活きる

**実装複雑度**: 低。GameStateに`chainBonus: number`を追加し、消去時に適用・リセット。

---

### S03: 磁石シール (magnet)

| 項目 | 値 |
|---|---|
| type | `magnet` |
| name | 磁石シール |
| symbol | 🧲 |
| preventsClearing | false |
| ショップ出現 | 可能 |
| description | 同時消去される他のシール効果を+50%にする |

**効果詳細**: magnetシール付きセルが消去対象に含まれる場合、同じ消去で処理される他のシール効果（score, gold, arrow_v, arrow_h, chain等）の数値を1.5倍にする（切捨て）。magnet自体はスコアに寄与しない。magnetが複数ある場合は重複しない（1.5倍のまま）。

例: magnet + score(+5) → score効果が+7に
例: magnet + arrow_v(+10) → arrow効果が+15に
例: magnet + gold(+1G) → gold獲得が+1Gに（切捨てで変化なし。+2G以上のgold_veinなら+3Gに）

**multiシールとの差別化**: multiは「パターン効果2倍 + ブロック点+1」。magnetは「シール効果1.5倍」。multiがパターンを増幅するのに対し、magnetはシールを増幅する対称的な関係。

**シナジー**:
- arrowシール(+10) → magnetで+15に。大きな固定値ボーナスほど恩恵が大きい
- 印章蒐集家(R02: シール種類数×5) → magnetも種類としてカウントされる
- 共鳴(P30: シール付きブロック数×3) → シールが多いほどmagnetの増幅対象も増える

**実装複雑度**: 中。SealEffectHandlerでmagnet判定後にシール効果値を乗算する処理。

---

### S04: 変換シール (convert)

| 項目 | 値 |
|---|---|
| type | `convert` |
| name | 変換シール |
| symbol | ↔ |
| preventsClearing | false |
| ショップ出現 | 可能 |
| description | このセルのパターンに応じてゴールドを獲得（パターンなし:+1G、あり:+3G） |

**効果詳細**: convertシール付きセルが消去された際、そのセルにパターンが付与されているかどうかでゴールド獲得量が変わる。パターンなしなら+1G、パターンありなら+3G。パターンの種類は問わない。スコアへの直接的影響はない。

**goldシールとの差別化**: gold(固定+1G)に対して、convert(パターン依存で最大+3G)。パターン付きピースにconvertシールを付けることで最大効率。

**シナジー**:
- 紋様の護符 → ピースにパターンを付けてconvertの+3Gを確定
- gold_vein(P21: 金脈) → パターンとしてgold_vein + シールとしてconvertで経済効果が二重に
- 経済ビルド全般 → パターン×シールの組み合わせでゴールド収入を最大化

**実装複雑度**: 低。消去時にセルのpattern有無をチェックしてゴールド加算するだけ。

---

### S05: ブーストシール (boost)

| 項目 | 値 |
|---|---|
| type | `boost` |
| name | ブーストシール |
| symbol | ⬆ |
| preventsClearing | false |
| ショップ出現 | 可能 |
| description | このセルのパターン効果値に+3を追加加算 |

**効果詳細**: boostシール付きセルが消去された際、そのセルのパターン効果に+3を追加する。

| パターン | 通常効果 | boost付き |
|---|---|---|
| enhanced | +2 | +5 |
| aura(発動時) | +1 | +4 |
| charge | chargeValue | chargeValue+3 |
| パターンなし | 0 | +3（enhancedライクな効果） |

パターンなしのセルにboostシールがある場合でも+3のブロック点加算が発生する。

**multiシールとの差別化**: multiは「パターン効果を2倍」（乗算）。boostは「パターン効果に+3」（加算）。chargeValue=1のとき multi→2, boost→4。chargeValue=10のとき multi→20, boost→13。小さい効果にはboostが有利、大きい効果にはmultiが有利。

**シナジー**:
- パターンなしピース → boostだけで+3のブロック点を得られる（パターン依存しない）
- enhanced → +2が+5になり、scoreシール(+5)と同等の効率
- catalyst(P18: 他パターン効果1.5倍) → boost+3がさらに1.5倍=+4

**実装複雑度**: 低。SealEffectHandlerでboost判定を追加し、パターン効果計算時に+3する。

---

### S06: 鏡シール (mirror_seal)

| 項目 | 値 |
|---|---|
| type | `mirror_seal` |
| name | 鏡シール |
| symbol | 🔲 |
| preventsClearing | false |
| ショップ出現 | 可能 |
| description | 隣接する消去対象セルのシール効果をコピーして追加発動 |

**効果詳細**: mirror_seal付きセルが消去される際、上下左右に隣接する消去対象セルにシールがある場合、そのシール効果をコピーして発動する。複数の隣接シールがある場合は全てコピーする。コピー対象がmirror_sealの場合はスキップ（無限ループ防止）。

例: mirror_sealの右にscore(+5)がある → mirror_sealからも+5が発動（合計+10）
例: mirror_sealの上にgold(+1G)、右にarrow_v(+10) → +1G と +10が追加発動

**コピーレリックとの差別化**: コピーレリックは「レリック効果をコピー」。mirror_sealは「シール効果をコピー」。異なるレイヤーのコピー。

**シナジー**:
- arrowシール → mirror_sealをarrowの隣に配置してarrow効果を倍増
- magnet(S03: シール効果+50%) → magnet+mirror_sealで増幅されたシール効果をコピー
- 印章蒐集家(R02: シール種類数×5) → mirror_seal自体もシール種類としてカウント

**実装複雑度**: 中。隣接セルのシールを参照してコピー処理。mirror同士の無限ループ防止が必要。

---

### S07: 盾シール (shield)

| 項目 | 値 |
|---|---|
| type | `shield` |
| name | 盾シール |
| symbol | 🛡 |
| preventsClearing | false |
| ショップ出現 | 可能 |
| description | このセルはbombの追加消去やrustの効果を受けない |

**効果詳細**: shieldシール付きセルは以下の副次効果を無効化する:
- bomb(P01)の追加消去対象にならない
- rust(P27)のパターン効果無効化を受けない
- volatile(P24)の自動消滅が発生しない

スコアへの直接的影響はない。防御専用のシール。

**stoneシールとの差別化**: stoneは「消去自体を防ぐ」ネガティブ効果。shieldは「副次的な悪影響を防ぐ」ポジティブ効果。stoneはラインを阻害するが、shieldはラインに影響しない。

**シナジー**:
- chargeパターン → chargeブロックにshieldを付けてbombの巻き込み消去から保護
- rust(P27)ボスラウンド → shieldでrustの無効化を防ぎ、パターン効果を維持
- volatile(P24) → shieldで消滅を防ぎ、ゆっくり溜められる

**実装複雑度**: 低。bomb/rust/volatile処理でshieldシール判定を追加するだけ。

---

### S08: 虚空シール (void)

| 項目 | 値 |
|---|---|
| type | `void` |
| name | 虚空シール |
| symbol | ◆ |
| preventsClearing | false |
| ショップ出現 | 不可（ボスラウンドなどシステム配置） |
| description | 消去時にブロック点-5 |

**効果詳細**: voidシール付きセルが消去された場合、ブロック点(A)から-5する（最低0）。

**stoneシールとの差別化**: stoneは「消去を防ぐ→ラインを阻害」。voidは「消去されるがスコアを減らす」。stoneはラインそのものを完成させにくくするが、voidはラインは完成するがスコアにペナルティを与える。異なる種類の妨害。

**ショップ不出現の理由**: ネガティブシールのため、ボスラウンドの特殊条件でシステムから付与。

**シナジー**:
- ice(P10) + void → ボスラウンドの複合障害として。iceで消去が遅れ、voidでスコアが減る
- obstacle + void → obstacleはライン阻害、voidはスコア減少の別方向妨害
- shield(S07) → shieldではvoidを防げない（shieldは副次効果防御、voidは直接効果）

**実装複雑度**: 低。SealEffectHandlerでvoidセルのブロック点減算を追加。

---

### S09: リサイクルシール (recycle)

| 項目 | 値 |
|---|---|
| type | `recycle` |
| name | リサイクルシール |
| symbol | ♻ |
| preventsClearing | false |
| ショップ出現 | 可能 |
| description | 消去時、このセルのパターンが次にドローされるピースの1つに付与される |

**効果詳細**: recycleシール付きセルが消去された際、そのセルにパターンがある場合、次にデッキからドローされるピースのうちランダムな1つにそのパターンを付与する（既にパターンがある場合は上書き）。パターンがないセルのrecycleは効果なし。

例: enhanced + recycleのセルを消去 → 次のドローでランダムな1ピースがenhancedに

**デザイン意図**: パターンを「持ち越す」ことで、デッキ全体のパターン密度を上げるシール。護符（紋様の護符）の代替手段として、プレイ中にパターンを伝播させる。

**シナジー**:
- 紋様共鳴(R33: 同パターン3+で列点×2) → recycleで同じパターンを伝播させて3個以上を達成
- comboパターン → recycleでcomboを伝播させてcombo密度を上げる
- デッキ圧縮ビルド → 少ないデッキでrecycleが回ると全ピースにパターンが行き渡る

**実装複雑度**: 中。消去時にパターン情報を記録し、次のドロー処理でピースにパターンを付与。DeckServiceの拡張が必要。

---

### S10: 分裂シール (split)

| 項目 | 値 |
|---|---|
| type | `split` |
| name | 分裂シール |
| symbol | ⇅ |
| preventsClearing | false |
| ショップ出現 | 可能 |
| description | このセルのブロック点への寄与が列点にも同額加算される |

**効果詳細**: splitシール付きセルが消去された場合、そのセルがブロック点(A)に与える全ての寄与（基礎ブロック数1 + パターン効果）と同じ額を列点(B)にも加算する。つまりA側の貢献がB側にもコピーされる。

例: split + enhanced(+2) → A側に通常通り+2、さらにB側にも+2（列点がlinesCleared+2からスタート）
例: split + charge(蓄積値5) → A側に+5、B側にも+5

**A×B方式での意味**: A側の値をB側にもコピーするため、A×B = (A) × (B + Aの一部) となり、A側が大きいほどB側への波及効果も大きくなる。

**デザイン意図**: A×B方式のスコア計算でAとBを橋渡しするシール。prism(P02)が「ライン数→ブロック点」の橋渡しなのに対し、splitは「ブロック効果→列点」の橋渡し。

**シナジー**:
- chargeパターン → charge蓄積値が大きいほどsplitの恩恵が大きい（A+B両方に反映）
- enhanced → enhanced+split = A+2, B+2で合計の乗算効果が大きい
- 乗算レリック全般 → splitでB側に加算された値に乗算レリックが乗る

**実装複雑度**: 中。PatternEffectHandler/SealEffectHandlerで各セルのA寄与を計算し、splitセルの分をB側にも加算。

---

## シール分類サマリー

### 既存シール（6種）+ 新シール（10種）= 全16種

| 分類 | 既存 | 新規 |
|---|---|---|
| A加算（固定） | score(+5) | boost(+3+パターン強化) |
| A加算（条件付き） | arrow_v(+10), arrow_h(+10) | timer(滞在手数×2) |
| A-B橋渡し | — | split(A寄与をBにコピー) |
| 次回持越し | — | chain(次消去に+5) |
| メタ（増幅） | multi(パターン×2) | magnet(シール×1.5), mirror_seal(隣接シールコピー) |
| 経済 | gold(+1G) | convert(パターン依存+1〜3G) |
| パターン伝播 | — | recycle(パターン持越し) |
| ネガティブ | stone(消去防止) | void(-5ブロック点) |
| 防御 | — | shield(副次効果無効化) |

---

## 新シール × 新パターン/新レリックのシナジー

| シール | 主なシナジー先 | ビルドアーキタイプ |
|---|---|---|
| timer | charge, 忍耐(R14), チャージ加速器(R35) | チャージ/溜めビルド |
| chain | rensha, echo(P03), 連射ビルド全般 | 連射ビルド |
| magnet | arrow_v/h, convert, 印章蒐集家(R02) | シール特化ビルド |
| convert | 紋様の護符, gold_vein(P21), 経済ビルド | 経済ビルド |
| boost | 全パターン, catalyst(P18), パターンなしピース | 汎用 |
| mirror_seal | arrow_v/h, score, magnet(S03) | シール特化ビルド |
| shield | charge, volatile(P24), ボスラウンド対策 | 防御/溜めビルド |
| void | ボスラウンド（システム配置） | （プレイヤーは対処する側） |
| recycle | combo, 紋様共鳴(R33), デッキ圧縮 | パターンビルド |
| split | charge, enhanced, 乗算レリック全般 | A×B最大化ビルド |

---

## 20種にしなかった理由

新パターン30種を先に設計したことで、シールで差別化できる設計空間が限られた。以下の理由から10種に絞った:

1. **パターンとの重複回避**: crystal(P04)、shadow(P05)、spark(P16)等と効果が被るシール案は不採用とした
2. **シールの希少性**: シールは1ピースに1セルのみ付与される希少リソース。種類が多すぎると個々の出現確率が下がり、ビルド構築が困難になる
3. **理解の容易さ**: 既存6種+新10種=16種は、ショップで表示される際に把握しやすい上限
4. **質の優先**: パターンとの明確なコントラスト（位置依存、メタ効果、時間軸、経済変換）がある10種に集中した

### 将来的に追加可能なシール案（保留）

| 案 | 保留理由 |
|---|---|
| 幻影シール（消去後も一時的にfilledとして残る） | ライン完成判定への影響が大きく、バランス調整が難しい |
| 伝染シール（消去時に隣接セルにシールを付与） | recycle(S09)と設計意図が近い |
| 倍率シール（列点に×1.2を適用） | multiとの差別化が不十分 |
| 吸収シール（隣接するネガティブ効果を吸収して消す） | shield(S07)と設計意図が近い |

---

## 実装優先度の提案

### Phase 1: シンプルな効果（既存アーキテクチャで実装可能）
- **S02 chain** — GameStateにchainBonusを追加するだけ
- **S04 convert** — パターン有無チェック+ゴールド加算
- **S05 boost** — パターン効果計算に+3加算
- **S08 void** — ブロック点から-5減算

### Phase 2: カウンター/状態管理
- **S01 timer** — charge蓄積と同様のカウンター管理
- **S07 shield** — bomb/rust/volatile処理に例外判定を追加

### Phase 3: メタ効果（他効果との相互作用）
- **S03 magnet** — シール効果の乗算処理
- **S06 mirror_seal** — 隣接シールの参照とコピー
- **S10 split** — A寄与の計算とB側への転記

### Phase 4: デッキ操作
- **S09 recycle** — 消去時のパターン記録とドロー処理への反映
