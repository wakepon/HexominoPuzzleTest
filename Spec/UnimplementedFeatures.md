# 未実装機能一覧

本ドキュメントは、現行プロジェクトのコードを正（Source of Truth）として、まだ実装されていない機能をまとめたものです。

**作成日**: 2026-02-09
**最終更新**: 2026-02-17

---

## 1. アニメーション・演出

### 購入アニメーション

ショップでアイテムを購入した際のカード演出。

**未実装の内容**:
- 購入時のカードフライアウト等の演出
- `GameState` に購入アニメーション状態が存在しない
- `GameCanvas.tsx` に購入アニメーションの描画処理が存在しない

**現在の動作**:
- 購入すると即座にカードがグレーアウトする（アニメーションなし）

### ゴールド獲得ポップアップ

ラウンドクリア時のゴールド獲得を画面上でポップアップ表示する演出。

**未実装の内容**:
- 画面中央付近へのゴールド獲得量表示
- フェードアウトアニメーション
- `GameState` にゴールド獲得ポップアップ状態が存在しない

**現在の動作**:
- ラウンドクリア画面（`renderRoundClear`）に報酬額が静的に表示される

---

## 2. ヘッダーUI要素

### バージョン表示

画面上へのゲームバージョン文字列の表示。

**未実装の内容**:
- Canvas上にバージョン文字列を描画する処理が存在しない
- `StorageService.ts` に内部的なデータバージョン管理は存在するが、UI表示はない

### 設定アイコン（データリセット）

画面上に設定アイコンを表示し、そこからデータリセットを行う機能。

**未実装の内容**:
- 設定アイコンボタンのCanvas描画
- アイコンからデータリセットのフロー

**現在の動作**:
- データ削除はデバッグウィンドウ（キーボードショートカット `D` キーでトグル）内の「Delete Save」ボタンからのみ実行可能

---

---

## 3. レリック中心設計（Phase 1: 基盤変更）

詳細は [レリック中心設計への修正計画](./RelicCentricRedesign.md) を参照。

### 初期デッキの変更（6枚化）

**未実装の内容**:
- `DECK_CONFIG.minoIds` を9枚から6枚に変更
- 変更後: `mono-1, dom-h, dom-v, tro-i-h, tro-i-v, tro-l-0`

**現在の動作**:
- 初期デッキ9枚（モノミノ1 + ドミノ2 + トロミノ6）

### レリック所持上限の導入（5枠）

**未実装の内容**:
- `PlayerState` に所持上限チェック追加
- レリック表示UIを5枠固定スロットに変更
- 5枠を超えて購入する場合の売却フロー

**現在の動作**:
- レリック所持数に制限なし

### レリック売却機能

**未実装の内容**:
- ショップフェーズでの売却操作UI
- 売却時のゴールド計算（購入価格の半額、端数切り捨て）
- 5枠満杯時の入れ替えフロー（売却→購入）

**現在の動作**:
- レリックの売却手段なし（デバッグウィンドウでの削除のみ）

---

## 4. レリック中心設計（Phase 2: 経済システム）

### 利息システム

**未実装の内容**:
- ラウンドクリア時の利息計算（所持ゴールド5Gごとに+1G、上限+5G）
- 利息表示UI（ゴールド報酬内訳の表示）

**現在の動作**:
- ラウンドクリア時のゴールド報酬にのみ依存（利息なし）

### ショップ構成の変更

**未実装の内容**:
- ピース2枠 + レリック/護符3枠（合計5枠）に変更
- レリックと護符がランダムに混在する商品生成ロジック

**現在の動作**:
- ピース3枠（小/中/大）+ レリック最大3枠

---

## 5. レリック中心設計（Phase 3: 護符システム）

### 護符の型定義・データ構造

**未実装の内容**:
- `AmuletId`, `Amulet`, `AmuletDefinition`, `AmuletShopItem` 型定義
- `PlayerState` への `amuletStock` 追加
- 護符ストック状態管理

### 護符のショップ表示・購入

**未実装の内容**:
- レリック/護符枠に護符を混在表示
- 購入 → ストック（最大2個）への追加

### 護符の使用UI・効果適用

**未実装の内容**:
- 4種類の護符効果の実装:
  - 造形の護符: ピース形状をブロック単位D&Dで変更
  - 紋様の護符: ランダムパターン追加
  - 刻印の護符: ランダムシール追加
  - 消滅の護符: ピースをデッキから削除
- 護符選択 → 対象ピース選択 → 効果適用のUI

---

## 6. レリック中心設計（Phase 4: レリック拡充）

### レリック定義の拡充

**未実装の内容**:
- 現在20種 → 200〜300種への段階的拡充
- 8カテゴリ（加算/乗算/成長/経済/デッキ操作/条件変更/シナジー/リスクリターン）

### レリック間シナジー

**未実装の内容**:
- 組み合わせで効果が変化するレリック
- シナジー情報のUI表示

---

## 7. レリック中心設計（Phase 5: バランス調整）

### ゴールド経済の全体調整

**未実装の内容**:
- ラウンド報酬、レリック/護符価格、利息のバランス調整
- 24ラウンドを通じたゴールドカーブの設計

### 目標スコアの再調整

**未実装の内容**:
- レリック拡充に伴うスコアインフレへの対応
- ラウンドごとの目標スコアカーブの見直し

### レアリティ出現率の調整

**未実装の内容**:
- ラウンド進行に応じたレアリティ分布の変化
- レアリティ価格帯: common(1-6G)/uncommon(5-8G)/rare(8-10G)/epic(10-12G)

---

## 実装優先度の推奨

### 高優先度（Phase 1: 基盤変更）

1. **初期デッキ6枚化** - 影響が小さく即座に適用可能
2. **レリック所持上限5枠** - レリック中心設計の前提
3. **レリック売却機能** - 入れ替え戦略の基盤

### 中優先度（Phase 2-3: 経済・護符）

4. **利息システム** - ゴールド管理の戦略性向上
5. **ショップ構成変更** - 2+3構成への変更
6. **護符システム** - デッキの質の調整手段

### 低優先度（Phase 4-5, アニメーション）

7. **レリック拡充** - 段階的に50→100→200〜300種
8. **バランス調整** - 実装後にテストで調整
9. **購入アニメーション** - ポリッシュ（現状でもゲームプレイに支障なし）
10. **ゴールド獲得ポップアップ** - ポリッシュ（報酬額はラウンドクリア画面で確認可能）
11. **バージョン表示** - 情報提供（なくてもゲームプレイに影響なし）
12. **設定アイコン** - UX改善（現状はデバッグウィンドウ経由でデータ削除可能）

---

## 更新履歴

- 2026-02-09: 初版作成
- 2026-02-17: レリック中心設計の未実装項目を追加（Phase 1〜5: デッキ6枚化、レリック5枠・売却、利息、ショップ2+3、護符、レリック拡充、バランス調整）
- 2026-02-17: コードを正として棚卸し実施。実装済み機能を削除
  - 削除: レリック7種類（全20種類が実装済みと確認）
  - 削除: ストック機能（2スロット対応含めて実装済みと確認）
  - 削除: ラウンド進行画面（`RoundProgressRenderer.ts` で実装済みと確認）
  - 削除: デッキ一覧画面（`DeckViewRenderer.ts` で実装済みと確認）
  - 削除: デバッグモーダル（`debugRenderer.ts` で実装済みと確認）
  - 削除: ヘッダーUI要素のうちデッキボタン（`statusPanelRenderer.ts` で実装済みと確認）
  - 削除: スコアアニメーション（`scoreAnimationRenderer.ts` で実装済みと確認）
  - 削除: 技術スタック差分セクション（現状と乖離のため削除）
