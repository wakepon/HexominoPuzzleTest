# ゲーム仕様書

このディレクトリにはゲームの仕様書を格納します。

## 目次

### コアシステム
1. [ゲーム概要](./game-overview.md) - ゲームの基本情報と目的、ラウンド制、ショップシステム
2. [ゲームメカニクス](./game-mechanics.md) - コアゲームメカニクス（デッキ、ミノ配置、衝突判定、ライン消去、ラウンド制、ショップ等）
3. [ミノシステム](./mino-system.md) - ミノ定義と生成システム（全307種類）

### ローグライト要素
4. [パターン・シールシステム](./pattern-seal-system.md) - ブロックに付与する特殊効果（オーラ、苔、ゴールドシール等）
5. [レリックシステム](./relic-system.md) - 恒久的なパッシブ効果アイテム（全消しボーナス、連鎖の達人等）

### 技術仕様
6. [データ構造](./data-structures.md) - 型定義とデータモデル（DeckState、GamePhase、ShopState、PlayerState等）
7. [状態管理](./state-management.md) - ゲーム状態とアクション（ROUND/ADVANCE、SHOP/BUY_ITEM、SHOP/LEAVE等）
8. [UI・描画システム](./ui-rendering.md) - Canvas描画とユーザーインタラクション
9. [レイアウトシステム](./layout-system.md) - HD固定レイアウト計算（1280x720）
10. [アーキテクチャ](./Architecture.md) - コード構造とDomain/Service/State層の設計

## 仕様書の管理方針

- **コードが正（Source of Truth）**: 仕様書とコードにズレがある場合、コードを正として仕様書を更新する
- **数値の記載ルール**: パラメータ調整対象の値は記載せず、動作の概要のみを記載する
- **ファイルサイズ**: 800行を超えたらカテゴリ別に分割を検討する
- **更新履歴**: 各ファイルに更新履歴を記載する

## 更新方法

doc-updater エージェントを使用してコードから仕様書を生成・更新します。

## 更新履歴

- 2026-02-01: 初版作成（ゲーム概要、メカニクス、データ構造、状態管理、UI描画、レイアウトシステム）
- 2026-02-01: ミノシステム、ライン消去、スコアシステム、消去アニメーションを追加
- 2026-02-02: デッキシステム、ラウンド制、ゴールド、ショップ、ゲームフェーズ、デバッグウィンドウに関する仕様を追加・更新
- 2026-02-06: ローグライト要素追加（パターン・シールシステム、レリックシステム、ラウンドセット構成、ボス条件、ショップ拡張）
- 2026-02-09: コードベース大幅リファクタリングを反映
  - Domain/Service/State層への構造変更
  - HD固定レイアウト（1280x720）への移行
  - アクション型プレフィックス化（UI/、BOARD/、GAME/、ANIMATION/、ROUND/、SHOP/）
  - PlayerState統合（ゴールド・レリックを一元管理）
  - BlockDataMap導入（パターン・シール情報の管理強化）
  - イベントシステム追加（GameEventBus）
  - セーブデータシステム追加（StorageService）
  - ツールチップシステム追加
  - レリック発動アニメーション追加
